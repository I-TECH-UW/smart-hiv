<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="Overloads" xsi:type="a:CqlToElmInfo"/>
   <annotation xsi:type="a:Annotation">
      <a:t name="DecisionID" value="HIV.D4.DT"/>
      <a:t name="BusinessRule"/>
      <a:t name="Trigger"/>
      <a:t name="HitPolicy" value="Rule Order"/>
      <a:t name="Description" value="Data Concepts:&#xa;&#xa;&#xa;Consolidated guidelines on HIV prevention, testing, treatment, service delivery and monitoring: recommendations for a public health approach (2021) Chapter 5: Advanced HIV Disease. Figure 5.1: Algorithm for providing a package of care for people with advanced HIV disease."/>
      <a:s r="196">
         <a:s>/**
Library: HIV.D4.DT Logic

@DecisionID: HIV.D4.DT
@BusinessRule: 
@Trigger: 
@HitPolicy: Rule Order
@Description:

Data Concepts:


Consolidated guidelines on HIV prevention, testing, treatment, service delivery and monitoring: recommendations for a public health approach (2021) Chapter 5: Advanced HIV Disease. Figure 5.1: Algorithm for providing a package of care for people with advanced HIV disease.
*/
library HIVD4DTLogic</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVD4DTLogic" system="http://smart.who.int/hiv"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="17:1-17:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="19:1-19:44" localIdentifier="HIC" path="http://smart.who.int/hiv/HIVCommon" version="0.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVCommon</a:s>
               </a:s>
               <a:s> version '0.0.1' called HIC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="20:1-20:35" localIdentifier="Concepts" path="http://smart.who.int/hiv/HIVConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConcepts</a:s>
               </a:s>
               <a:s> called Concepts</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="21:1-21:44" localIdentifier="Elements" path="http://smart.who.int/hiv/HIVEncounterElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVEncounterElements</a:s>
               </a:s>
               <a:s> called Elements</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="22:1-22:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="24:1-24:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <contexts>
      <def locator="26:1-26:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="26:1-26:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="26:1-26:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="16" locator="32:1-36:3" name="W4SS single screening algorithm" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="TB screening algorithm"/>
            <a:t name="pseudocode" value="&quot;TB screening algorithm&quot;='W4SS single screening algorithm'"/>
            <a:s r="16">
               <a:s>/*
  @input: TB screening algorithm
  @pseudocode: &quot;TB screening algorithm&quot;='W4SS single screening algorithm'
  */
define &quot;W4SS single screening algorithm&quot;:
  </a:s>
               <a:s r="15">
                  <a:s>exists</a:s>
                  <a:s r="14">
                     <a:s>(
    </a:s>
                     <a:s r="14">
                        <a:s>
                           <a:s r="8">
                              <a:s r="7">
                                 <a:s>
                                    <a:s>Elements.&quot;TB screening algorithm Observation&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="13">
                           <a:s>where </a:s>
                           <a:s r="13">
                              <a:s r="10">
                                 <a:s r="9">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="10">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="12">
                                 <a:s r="11">
                                    <a:s>Concepts</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="12">
                                    <a:s>&quot;W4SS single screening algorithm&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="15" locator="33:3-36:3" xsi:type="Exists">
            <operand localId="14" locator="33:9-36:3" xsi:type="Query">
               <source localId="8" locator="34:5-34:51" alias="O">
                  <expression localId="7" locator="34:5-34:49" name="TB screening algorithm Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="13" locator="35:7-35:64" xsi:type="Equivalent">
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="10" locator="35:13-35:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="12" locator="35:23-35:64" name="W4SS single screening algorithm" libraryName="Concepts" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="26" locator="42:1-46:3" name="Sequential positive screening algorithm with W4SS and CRP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="TB screening algorithm"/>
            <a:t name="pseudocode" value="&quot;TB screening algorithm&quot;='Sequential positive screening algorithm with W4SS and CRP'"/>
            <a:s r="26">
               <a:s>/*
  @input: TB screening algorithm
  @pseudocode: &quot;TB screening algorithm&quot;='Sequential positive screening algorithm with W4SS and CRP'
  */
define &quot;Sequential positive screening algorithm with W4SS and CRP&quot;:
  </a:s>
               <a:s r="25">
                  <a:s>exists</a:s>
                  <a:s r="24">
                     <a:s>(
    </a:s>
                     <a:s r="24">
                        <a:s>
                           <a:s r="18">
                              <a:s r="17">
                                 <a:s>
                                    <a:s>Elements.&quot;TB screening algorithm Observation&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="23">
                           <a:s>where </a:s>
                           <a:s r="23">
                              <a:s r="20">
                                 <a:s r="19">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="20">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="22">
                                 <a:s r="21">
                                    <a:s>Concepts</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="22">
                                    <a:s>&quot;Sequential positive screening algorithm with W4SS and CRP&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="25" locator="43:3-46:3" xsi:type="Exists">
            <operand localId="24" locator="43:9-46:3" xsi:type="Query">
               <source localId="18" locator="44:5-44:51" alias="O">
                  <expression localId="17" locator="44:5-44:49" name="TB screening algorithm Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="23" locator="45:7-45:90" xsi:type="Equivalent">
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="20" locator="45:13-45:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="22" locator="45:23-45:90" name="Sequential positive screening algorithm with W4SS and CRP" libraryName="Concepts" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="36" locator="52:1-56:3" name="Screening with any TB symptom" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="TB screening algorithm"/>
            <a:t name="pseudocode" value="&quot;TB screening algorithm&quot;='Screening with any TB symptom'"/>
            <a:s r="36">
               <a:s>/*
  @input: TB screening algorithm
  @pseudocode: &quot;TB screening algorithm&quot;='Screening with any TB symptom'
  */
define &quot;Screening with any TB symptom&quot;:
  </a:s>
               <a:s r="35">
                  <a:s>exists</a:s>
                  <a:s r="34">
                     <a:s>(
    </a:s>
                     <a:s r="34">
                        <a:s>
                           <a:s r="28">
                              <a:s r="27">
                                 <a:s>
                                    <a:s>Elements.&quot;TB screening algorithm Observation&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="33">
                           <a:s>where </a:s>
                           <a:s r="33">
                              <a:s r="30">
                                 <a:s r="29">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="30">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="32">
                                 <a:s r="31">
                                    <a:s>Concepts</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="32">
                                    <a:s>&quot;Screening with any TB symptom&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="35" locator="53:3-56:3" xsi:type="Exists">
            <operand localId="34" locator="53:9-56:3" xsi:type="Query">
               <source localId="28" locator="54:5-54:51" alias="O">
                  <expression localId="27" locator="54:5-54:49" name="TB screening algorithm Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="33" locator="55:7-55:62" xsi:type="Equivalent">
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="30" locator="55:13-55:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                     <operand localId="32" locator="55:23-55:62" name="Screening with any TB symptom" libraryName="Concepts" xsi:type="CodeRef"/>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="41" locator="62:1-63:47" name="Age 10 or older" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="Estimated age"/>
            <a:t name="pseudocode" value="&quot;Estimated age&quot; >= 10 years"/>
            <a:s r="41">
               <a:s>/*
 @input: Estimated age
 @pseudocode: &quot;Estimated age&quot; >= 10 years
 */
define &quot;Age 10 or older&quot;:
  </a:s>
               <a:s r="40">
                  <a:s r="38">
                     <a:s r="37">
                        <a:s>Elements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="38">
                        <a:s>&quot;Current Patient Age In Years&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="39"> >= 10</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="40" locator="63:3-63:47" xsi:type="GreaterOrEqual">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="38" locator="63:3-63:41" name="Current Patient Age In Years" libraryName="Elements" xsi:type="ExpressionRef"/>
            <operand localId="39" locator="63:46-63:47" valueType="t:Integer" value="10" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="46" locator="69:1-70:46" name="Age under 15" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="Estimated age"/>
            <a:t name="pseudocode" value="&quot;Estimated age&quot; &lt; 15 years"/>
            <a:s r="46">
               <a:s>/*
 @input: Estimated age
 @pseudocode: &quot;Estimated age&quot; &lt; 15 years
 */
define &quot;Age under 15&quot;:
  </a:s>
               <a:s r="45">
                  <a:s r="43">
                     <a:s r="42">
                        <a:s>Elements</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="43">
                        <a:s>&quot;Current Patient Age In Years&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="44"> &lt; 15</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="45" locator="70:3-70:46" xsi:type="Less">
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
            <operand localId="43" locator="70:3-70:41" name="Current Patient Age In Years" libraryName="Elements" xsi:type="ExpressionRef"/>
            <operand localId="44" locator="70:45-70:46" valueType="t:Integer" value="15" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="74" locator="76:1-83:3" name="Has symptoms of TB" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="Symptoms of TB"/>
            <a:t name="pseudocode" value="&quot;Symptoms of TB&quot; IN 'Current cough', 'Fever of 39 °C or greater', 'Weight loss (reported)', 'Night sweats'"/>
            <a:s r="74">
               <a:s>/*
 @input: Symptoms of TB
 @pseudocode: &quot;Symptoms of TB&quot; IN 'Current cough', 'Fever of 39 °C or greater', 'Weight loss (reported)', 'Night sweats'
 */
define &quot;Has symptoms of TB&quot;:
  </a:s>
               <a:s r="73">
                  <a:s>exists</a:s>
                  <a:s r="72">
                     <a:s>(
    </a:s>
                     <a:s r="72">
                        <a:s>
                           <a:s r="48">
                              <a:s r="47">
                                 <a:s>
                                    <a:s>Elements.&quot;Symptoms of TB Observation&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="71">
                           <a:s>where </a:s>
                           <a:s r="71">
                              <a:s r="65">
                                 <a:s r="59">
                                    <a:s r="53">
                                       <a:s r="50">
                                          <a:s r="49">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="50">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="52">
                                          <a:s r="51">
                                             <a:s>Concepts</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="52">
                                             <a:s>&quot;Current cough&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
         or </a:s>
                                    <a:s r="58">
                                       <a:s r="55">
                                          <a:s r="54">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="55">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="57">
                                          <a:s r="56">
                                             <a:s>Concepts</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="57">
                                             <a:s>&quot;Fever of 39 °C or greater&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
         or </a:s>
                                 <a:s r="64">
                                    <a:s r="61">
                                       <a:s r="60">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="61">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="63">
                                       <a:s r="62">
                                          <a:s>Concepts</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="63">
                                          <a:s>&quot;Weight loss reported&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
         or </a:s>
                              <a:s r="70">
                                 <a:s r="67">
                                    <a:s r="66">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="67">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="69">
                                    <a:s r="68">
                                       <a:s>Concepts</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="69">
                                       <a:s>&quot;Night sweats&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="73" locator="77:3-83:3" xsi:type="Exists">
            <operand localId="72" locator="77:9-83:3" xsi:type="Query">
               <source localId="48" locator="78:5-78:43" alias="O">
                  <expression localId="47" locator="78:5-78:41" name="Symptoms of TB Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="71" locator="79:7-82:45" xsi:type="Or">
                  <operand localId="65" locator="79:13-81:53" xsi:type="Or">
                     <operand localId="59" locator="79:13-80:58" xsi:type="Or">
                        <operand localId="53" locator="79:13-79:46" xsi:type="Equivalent">
                           <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="50" locator="79:13-79:19" path="value" scope="O" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="52" locator="79:23-79:46" name="Current cough" libraryName="Concepts" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                        <operand localId="58" locator="80:13-80:58" xsi:type="Equivalent">
                           <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="55" locator="80:13-80:19" path="value" scope="O" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                              <operand localId="57" locator="80:23-80:58" name="Fever of 39 °C or greater" libraryName="Concepts" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="64" locator="81:13-81:53" xsi:type="Equivalent">
                        <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="61" locator="81:13-81:19" path="value" scope="O" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                           <operand localId="63" locator="81:23-81:53" name="Weight loss reported" libraryName="Concepts" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="70" locator="82:13-82:45" xsi:type="Equivalent">
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="67" locator="82:13-82:19" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="69" locator="82:23-82:45" name="Night sweats" libraryName="Concepts" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="87" locator="89:1-93:32" name="Does not have symptoms of TB" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="Symptoms of TB"/>
            <a:t name="pseudocode" value="&quot;Symptoms of TB&quot; = 'None'"/>
            <a:s r="87">
               <a:s>/*
 @input: Symptoms of TB
 @pseudocode: &quot;Symptoms of TB&quot; = 'None'
 */
define &quot;Does not have symptoms of TB&quot;:
  </a:s>
               <a:s r="86">
                  <a:s r="83">
                     <a:s>exists</a:s>
                     <a:s r="82">
                        <a:s>(
    </a:s>
                        <a:s r="82">
                           <a:s>
                              <a:s r="76">
                                 <a:s r="75">
                                    <a:s>
                                       <a:s>Elements.&quot;Symptoms of TB Observation&quot;</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> O</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      </a:s>
                           <a:s r="81">
                              <a:s>where </a:s>
                              <a:s r="81">
                                 <a:s r="78">
                                    <a:s r="77">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="78">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="80">
                                    <a:s r="79">
                                       <a:s>Concepts</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="80">
                                       <a:s>&quot;None&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
                  <a:s> or </a:s>
                  <a:s r="85">
                     <a:s>not</a:s>
                     <a:s r="84">
                        <a:s>(</a:s>
                        <a:s r="84">
                           <a:s>&quot;Has symptoms of TB&quot;</a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="86" locator="90:3-93:32" xsi:type="Or">
            <operand localId="83" locator="90:3-93:3" xsi:type="Exists">
               <operand localId="82" locator="90:9-93:3" xsi:type="Query">
                  <source localId="76" locator="91:5-91:43" alias="O">
                     <expression localId="75" locator="91:5-91:41" name="Symptoms of TB Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
                  </source>
                  <where localId="81" locator="92:7-92:37" xsi:type="Equivalent">
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <signature name="t:Concept" xsi:type="NamedTypeSpecifier"/>
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="78" locator="92:13-92:19" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <signature name="t:Code" xsi:type="NamedTypeSpecifier"/>
                        <operand localId="80" locator="92:23-92:37" name="None" libraryName="Concepts" xsi:type="CodeRef"/>
                     </operand>
                  </where>
               </operand>
            </operand>
            <operand localId="85" locator="93:8-93:32" xsi:type="Not">
               <operand localId="84" locator="93:11-93:32" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="92" locator="99:1-102:4" name="No C-reactive protein test done" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="C-reactive protein test result"/>
            <a:t name="pseudocode"/>
            <a:s r="92">
               <a:s>/*
 @input: C-reactive protein test result
 @pseudocode:
 */
define &quot;No C-reactive protein test done&quot;:
  </a:s>
               <a:s r="91">
                  <a:s>not</a:s>
                  <a:s r="90">
                     <a:s>(</a:s>
                     <a:s r="90">
                        <a:s>exists</a:s>
                        <a:s r="89">
                           <a:s>(
    </a:s>
                           <a:s r="89">
                              <a:s r="88">
                                 <a:s>Elements</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="89">
                                 <a:s>&quot;C reactive protein test result&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  )</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="91" locator="100:3-102:4" xsi:type="Not">
            <operand localId="90" locator="100:6-102:4" xsi:type="Exists">
               <operand localId="89" locator="100:13-102:3" name="C reactive protein test result" libraryName="Elements" xsi:type="ExpressionRef"/>
            </operand>
         </expression>
      </def>
      <def localId="101" locator="108:1-112:3" name="C-reactive protein at or under 5mg/L" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="C-reactive protein test result"/>
            <a:t name="pseudocode" value="&quot;C reactive protein test result&quot; ≤ 5 mg/L"/>
            <a:s r="101">
               <a:s>/*
 @input: C-reactive protein test result
 @pseudocode: &quot;C reactive protein test result&quot; ≤ 5 mg/L
 */
define &quot;C-reactive protein at or under 5mg/L&quot;:
  </a:s>
               <a:s r="100">
                  <a:s>exists</a:s>
                  <a:s r="99">
                     <a:s>(
    </a:s>
                     <a:s r="99">
                        <a:s>
                           <a:s r="94">
                              <a:s r="93">
                                 <a:s>
                                    <a:s>Elements.&quot;C reactive protein test result&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="98">
                           <a:s>where </a:s>
                           <a:s r="98">
                              <a:s r="96">
                                 <a:s r="95">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="96">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="97"> &lt; 5</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="100" locator="109:3-112:3" xsi:type="Exists">
            <operand localId="99" locator="109:9-112:3" xsi:type="Query">
               <source localId="94" locator="110:5-110:47" alias="O">
                  <expression localId="93" locator="110:5-110:45" name="C reactive protein test result" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="98" locator="111:7-111:23" xsi:type="Less">
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:integer" xsi:type="As">
                        <operand localId="96" locator="111:13-111:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="97" locator="111:23" valueType="t:Integer" value="5" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="110" locator="118:1-122:3" name="C-reactive protein over 5mg/L" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="C-reactive protein test result"/>
            <a:t name="pseudocode" value="&quot;C reactive protein test result&quot; > 5 mg/L"/>
            <a:s r="110">
               <a:s>/*
 @input: C-reactive protein test result
 @pseudocode: &quot;C reactive protein test result&quot; > 5 mg/L
 */
define &quot;C-reactive protein over 5mg/L&quot;:
  </a:s>
               <a:s r="109">
                  <a:s>exists</a:s>
                  <a:s r="108">
                     <a:s>(
    </a:s>
                     <a:s r="108">
                        <a:s>
                           <a:s r="103">
                              <a:s r="102">
                                 <a:s>
                                    <a:s>Elements.&quot;C reactive protein test result&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="107">
                           <a:s>where </a:s>
                           <a:s r="107">
                              <a:s r="105">
                                 <a:s r="104">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="105">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="106"> > 5</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="109" locator="119:3-122:3" xsi:type="Exists">
            <operand localId="108" locator="119:9-122:3" xsi:type="Query">
               <source localId="103" locator="120:5-120:47" alias="O">
                  <expression localId="102" locator="120:5-120:45" name="C reactive protein test result" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="107" locator="121:7-121:23" xsi:type="Greater">
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Integer" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:integer" xsi:type="As">
                        <operand localId="105" locator="121:13-121:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="106" locator="121:23" valueType="t:Integer" value="5" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="119" locator="128:1-132:3" name="History of contact with a person with TB" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="input" value="History of contact with a person with TB"/>
            <a:t name="pseudocode" value="&quot;History of contact with a person with TB&quot;=True"/>
            <a:s r="119">
               <a:s>/*
 @input: History of contact with a person with TB
 @pseudocode: &quot;History of contact with a person with TB&quot;=True
 */
define &quot;History of contact with a person with TB&quot;:
  </a:s>
               <a:s r="118">
                  <a:s>exists</a:s>
                  <a:s r="117">
                     <a:s>(
    </a:s>
                     <a:s r="117">
                        <a:s>
                           <a:s r="112">
                              <a:s r="111">
                                 <a:s>
                                    <a:s>Elements.&quot;History of contact with a person with TB Observation&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      </a:s>
                        <a:s r="116">
                           <a:s>where </a:s>
                           <a:s r="116">
                              <a:s r="114">
                                 <a:s r="113">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="114">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="115"> = true</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="118" locator="129:3-132:3" xsi:type="Exists">
            <operand localId="117" locator="129:9-132:3" xsi:type="Query">
               <source localId="112" locator="130:5-130:69" alias="O">
                  <expression localId="111" locator="130:5-130:67" name="History of contact with a person with TB Observation" libraryName="Elements" xsi:type="ExpressionRef"/>
               </source>
               <where localId="116" locator="131:7-131:26" xsi:type="Equal">
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <signature name="t:Boolean" xsi:type="NamedTypeSpecifier"/>
                  <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:boolean" xsi:type="As">
                        <operand localId="114" locator="131:13-131:19" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="115" locator="131:23-131:26" valueType="t:Boolean" value="true" xsi:type="Literal"/>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="196" locator="137:1-179:4" name="Guidance" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:t name="dynamicValue" value="Guidance"/>
            <a:s r="196">
               <a:s>/*
 @dynamicValue: Guidance
 */
define &quot;Guidance&quot;:
  </a:s>
               <a:s r="195">
                  <a:s>Combine(</a:s>
                  <a:s r="194">
                     <a:s>{
    </a:s>
                     <a:s r="127">
                        <a:s>if </a:s>
                        <a:s r="124">
                           <a:s r="122">
                              <a:s r="120">
                                 <a:s>&quot;W4SS single screening algorithm&quot;</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="121">
                                 <a:s>&quot;Age 10 or older&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="123">
                              <a:s>&quot;Has symptoms of TB&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="125">
                           <a:s>'Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  

In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  See WHO consolidated guidelines on tuberculosis, Module 3: Diagnosis - Rapid diagnostics for tuberculosis detection.  

LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill (See WHO Consolidated guidelines on HIV prevention, testing, treatment, service delivery and monitoring: recommendations for a public health approach (2021))'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="126">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="135">
                        <a:s>if </a:s>
                        <a:s r="132">
                           <a:s r="130">
                              <a:s r="128">
                                 <a:s>&quot;W4SS single screening algorithm&quot;</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="129">
                                 <a:s>&quot;Age 10 or older&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="131">
                              <a:s>&quot;Does not have symptoms of TB&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="133">
                           <a:s>'Screen negative for TB, assess for TPT.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="134">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="143">
                        <a:s>if </a:s>
                        <a:s r="140">
                           <a:s r="138">
                              <a:s r="136">
                                 <a:s>&quot;Sequential positive screening algorithm with W4SS and CRP&quot;</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="137">
                                 <a:s>&quot;Age 10 or older&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="139">
                              <a:s>&quot;Does not have symptoms of TB&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="141">
                           <a:s>'Screen negative for TB.  Assess for TPT.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="142">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="153">
                        <a:s>if </a:s>
                        <a:s r="150">
                           <a:s r="148">
                              <a:s r="146">
                                 <a:s r="144">
                                    <a:s>&quot;Sequential positive screening algorithm with W4SS and CRP&quot;</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="145">
                                    <a:s>&quot;Age 10 or older&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="147">
                                 <a:s>&quot;Has symptoms of TB&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="149">
                              <a:s>&quot;No C-reactive protein test done&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="151">
                           <a:s>'Perform C reative protein test.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="152">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="163">
                        <a:s>if </a:s>
                        <a:s r="160">
                           <a:s r="158">
                              <a:s r="156">
                                 <a:s r="154">
                                    <a:s>&quot;Sequential positive screening algorithm with W4SS and CRP&quot;</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="155">
                                    <a:s>&quot;Age 10 or older&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="157">
                                 <a:s>&quot;Has symptoms of TB&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="159">
                              <a:s>&quot;C-reactive protein at or under 5mg/L&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="161">
                           <a:s>'Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  

In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  

Currently, the c-reative protein cut-off value of > 5 mg/L is recommended, as it is the lowest threshold indicating abnormality in many clinical settings and because it is the most sensitive. At this cut-off, CRP has a similar sensitivity and higher or similar specificity to symptom screening in all subpopulations of adults and adolescents living with HIV tested (Section 5.2.2, 2021 WHO operation handbook on tuberculosis, Module 2: screening).  

LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="162">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="173">
                        <a:s>if </a:s>
                        <a:s r="170">
                           <a:s r="168">
                              <a:s r="166">
                                 <a:s r="164">
                                    <a:s>&quot;Sequential positive screening algorithm with W4SS and CRP&quot;</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="165">
                                    <a:s>&quot;Age 10 or older&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="167">
                                 <a:s>&quot;Has symptoms of TB&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="169">
                              <a:s>&quot;C-reactive protein over 5mg/L&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="171">
                           <a:s>'In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  

Currently, the c-reative protein cut-off value of > 5 mg/L is recommended, as it is the lowest threshold indicating abnormality in many clinical settings and because it is the most sensitive. At this cut-off, CRP has a similar sensitivity and higher or similar specificity to symptom screening in all subpopulations of adults and adolescents living with HIV tested (Section 5.2.2, 2021 WHO operation handbook on tuberculosis, Module 2: screening).  

LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="172">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="183">
                        <a:s>if </a:s>
                        <a:s r="180">
                           <a:s r="178">
                              <a:s r="176">
                                 <a:s r="174">
                                    <a:s>&quot;Screening with any TB symptom&quot;</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="175">
                                    <a:s>&quot;Age under 15&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="177">
                                 <a:s>&quot;Has symptoms of TB&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="179">
                              <a:s>&quot;History of contact with a person with TB&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="181">
                           <a:s>'Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  

Any child &lt; 15 years who has had close contact with someone with TB disease should be screened for TB with a symptom screen and/or CXR as part of active contact-tracing (see Algorithm A.5.1 in Annex 5). Symptoms that should be used to screen for TB are cough, fever and poor weight gain (or weight loss). In young children, reduced playfulness or lethargy should also be included in symptom screening; cough may be absent.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="182">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>,
    </a:s>
                     <a:s r="193">
                        <a:s>if </a:s>
                        <a:s r="190">
                           <a:s r="188">
                              <a:s r="186">
                                 <a:s r="184">
                                    <a:s>&quot;Screening with any TB symptom&quot;</a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="185">
                                    <a:s>&quot;Age under 15&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="187">
                                 <a:s>&quot;Does not have symptoms of TB&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="189">
                              <a:s>&quot;History of contact with a person with TB&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      then </a:s>
                        <a:s r="191">
                           <a:s>'Screen negative for TB.  Refer for TPT.'</a:s>
                        </a:s>
                        <a:s>
      else </a:s>
                        <a:s r="192">
                           <a:s>''</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  }</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="195" locator="138:3-179:4" xsi:type="Combine">
            <source localId="194" locator="138:11-179:3" xsi:type="List">
               <element localId="127" locator="139:5-145:13" xsi:type="If">
                  <condition localId="124" locator="139:8-139:87" xsi:type="And">
                     <operand localId="122" locator="139:8-139:62" xsi:type="And">
                        <operand localId="120" locator="139:8-139:40" name="W4SS single screening algorithm" xsi:type="ExpressionRef"/>
                        <operand localId="121" locator="139:46-139:62" name="Age 10 or older" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="123" locator="139:68-139:87" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="125" locator="140:12-140:771" valueType="t:String" value="Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  &#xa;&#xa;In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  See WHO consolidated guidelines on tuberculosis, Module 3: Diagnosis - Rapid diagnostics for tuberculosis detection.  &#xa;&#xa;LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill (See WHO Consolidated guidelines on HIV prevention, testing, treatment, service delivery and monitoring: recommendations for a public health approach (2021))" xsi:type="Literal"/>
                  <else localId="126" locator="145:12-145:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="135" locator="146:5-148:13" xsi:type="If">
                  <condition localId="132" locator="146:8-146:97" xsi:type="And">
                     <operand localId="130" locator="146:8-146:62" xsi:type="And">
                        <operand localId="128" locator="146:8-146:40" name="W4SS single screening algorithm" xsi:type="ExpressionRef"/>
                        <operand localId="129" locator="146:46-146:62" name="Age 10 or older" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="131" locator="146:68-146:97" name="Does not have symptoms of TB" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="133" locator="147:12-147:52" valueType="t:String" value="Screen negative for TB, assess for TPT." xsi:type="Literal"/>
                  <else localId="134" locator="148:12-148:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="143" locator="149:5-151:13" xsi:type="If">
                  <condition localId="140" locator="149:8-149:123" xsi:type="And">
                     <operand localId="138" locator="149:8-149:88" xsi:type="And">
                        <operand localId="136" locator="149:8-149:66" name="Sequential positive screening algorithm with W4SS and CRP" xsi:type="ExpressionRef"/>
                        <operand localId="137" locator="149:72-149:88" name="Age 10 or older" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="139" locator="149:94-149:123" name="Does not have symptoms of TB" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="141" locator="150:12-150:53" valueType="t:String" value="Screen negative for TB.  Assess for TPT." xsi:type="Literal"/>
                  <else localId="142" locator="151:12-151:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="153" locator="152:5-154:13" xsi:type="If">
                  <condition localId="150" locator="152:8-152:151" xsi:type="And">
                     <operand localId="148" locator="152:8-152:113" xsi:type="And">
                        <operand localId="146" locator="152:8-152:88" xsi:type="And">
                           <operand localId="144" locator="152:8-152:66" name="Sequential positive screening algorithm with W4SS and CRP" xsi:type="ExpressionRef"/>
                           <operand localId="145" locator="152:72-152:88" name="Age 10 or older" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="147" locator="152:94-152:113" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="149" locator="152:119-152:151" name="No C-reactive protein test done" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="151" locator="153:12-153:44" valueType="t:String" value="Perform C reative protein test." xsi:type="Literal"/>
                  <else localId="152" locator="154:12-154:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="163" locator="155:5-163:13" xsi:type="If">
                  <condition localId="160" locator="155:8-155:156" xsi:type="And">
                     <operand localId="158" locator="155:8-155:113" xsi:type="And">
                        <operand localId="156" locator="155:8-155:88" xsi:type="And">
                           <operand localId="154" locator="155:8-155:66" name="Sequential positive screening algorithm with W4SS and CRP" xsi:type="ExpressionRef"/>
                           <operand localId="155" locator="155:72-155:88" name="Age 10 or older" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="157" locator="155:94-155:113" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="159" locator="155:119-155:156" name="C-reactive protein at or under 5mg/L" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="161" locator="156:12-156:947" valueType="t:String" value="Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  &#xa;&#xa;In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  &#xa;&#xa;Currently, the c-reative protein cut-off value of > 5 mg/L is recommended, as it is the lowest threshold indicating abnormality in many clinical settings and because it is the most sensitive. At this cut-off, CRP has a similar sensitivity and higher or similar specificity to symptom screening in all subpopulations of adults and adolescents living with HIV tested (Section 5.2.2, 2021 WHO operation handbook on tuberculosis, Module 2: screening).  &#xa;&#xa;LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill." xsi:type="Literal"/>
                  <else localId="162" locator="163:12-163:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="173" locator="164:5-170:13" xsi:type="If">
                  <condition localId="170" locator="164:8-164:149" xsi:type="And">
                     <operand localId="168" locator="164:8-164:113" xsi:type="And">
                        <operand localId="166" locator="164:8-164:88" xsi:type="And">
                           <operand localId="164" locator="164:8-164:66" name="Sequential positive screening algorithm with W4SS and CRP" xsi:type="ExpressionRef"/>
                           <operand localId="165" locator="164:72-164:88" name="Age 10 or older" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="167" locator="164:94-164:113" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="169" locator="164:119-164:149" name="C-reactive protein over 5mg/L" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="171" locator="165:12-165:836" valueType="t:String" value="In PLHIV, diagnostic testing for TB with LF-LAM and other methods is usually considered early on.  &#xa;&#xa;Currently, the c-reative protein cut-off value of > 5 mg/L is recommended, as it is the lowest threshold indicating abnormality in many clinical settings and because it is the most sensitive. At this cut-off, CRP has a similar sensitivity and higher or similar specificity to symptom screening in all subpopulations of adults and adolescents living with HIV tested (Section 5.2.2, 2021 WHO operation handbook on tuberculosis, Module 2: screening).  &#xa;&#xa;LF-LAM can assist TB diagnosis among people with advanced HIV disease (AHD) with symptoms and signs of TB. For inpatients with CD4 count ≤200 cells/mm3, outpatients with CD4 count ≤100 cells/mm3, or individuals with any CD4 count with symptoms of AHD or if seriously ill." xsi:type="Literal"/>
                  <else localId="172" locator="170:12-170:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="183" locator="171:5-175:13" xsi:type="If">
                  <condition localId="180" locator="171:8-171:129" xsi:type="And">
                     <operand localId="178" locator="171:8-171:82" xsi:type="And">
                        <operand localId="176" locator="171:8-171:57" xsi:type="And">
                           <operand localId="174" locator="171:8-171:38" name="Screening with any TB symptom" xsi:type="ExpressionRef"/>
                           <operand localId="175" locator="171:44-171:57" name="Age under 15" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="177" locator="171:63-171:82" name="Has symptoms of TB" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="179" locator="171:88-171:129" name="History of contact with a person with TB" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="181" locator="172:12-172:546" valueType="t:String" value="Screen positive for TB.  Refer for diagnostic evaluation including mWRD &amp; clinical evaluation as indicated.  &#xa;&#xa;Any child &lt; 15 years who has had close contact with someone with TB disease should be screened for TB with a symptom screen and/or CXR as part of active contact-tracing (see Algorithm A.5.1 in Annex 5). Symptoms that should be used to screen for TB are cough, fever and poor weight gain (or weight loss). In young children, reduced playfulness or lethargy should also be included in symptom screening; cough may be absent." xsi:type="Literal"/>
                  <else localId="182" locator="175:12-175:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
               <element localId="193" locator="176:5-178:13" xsi:type="If">
                  <condition localId="190" locator="176:8-176:139" xsi:type="And">
                     <operand localId="188" locator="176:8-176:92" xsi:type="And">
                        <operand localId="186" locator="176:8-176:57" xsi:type="And">
                           <operand localId="184" locator="176:8-176:38" name="Screening with any TB symptom" xsi:type="ExpressionRef"/>
                           <operand localId="185" locator="176:44-176:57" name="Age under 15" xsi:type="ExpressionRef"/>
                        </operand>
                        <operand localId="187" locator="176:63-176:92" name="Does not have symptoms of TB" xsi:type="ExpressionRef"/>
                     </operand>
                     <operand localId="189" locator="176:98-176:139" name="History of contact with a person with TB" xsi:type="ExpressionRef"/>
                  </condition>
                  <then localId="191" locator="177:12-177:52" valueType="t:String" value="Screen negative for TB.  Refer for TPT." xsi:type="Literal"/>
                  <else localId="192" locator="178:12-178:13" valueType="t:String" value="" xsi:type="Literal"/>
               </element>
            </source>
         </expression>
      </def>
   </statements>
</library>
