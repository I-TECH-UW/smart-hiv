<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="None" xsi:type="a:CqlToElmInfo"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function WHOCommon.references has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="3006">
         <a:s>library HIVCommon version '0.0.1'</a:s>
      </a:s>
   </annotation>
   <identifier id="HIVCommon" system="http://smart.who.int/hiv" version="0.0.1"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="1" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="1">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="2" locator="5:1-5:35" localIdentifier="FHIRHelpers" path="http://hl7.org/fhir/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="2">
               <a:s>include </a:s>
               <a:s>
                  <a:s>FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="3" locator="6:1-6:29" localIdentifier="WCom" path="http://smart.who.int/hiv/WHOCommon">
         <annotation xsi:type="a:Annotation">
            <a:s r="3">
               <a:s>include </a:s>
               <a:s>
                  <a:s>WHOCommon</a:s>
               </a:s>
               <a:s> called WCom</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="4" locator="8:1-8:29" localIdentifier="HC" path="http://smart.who.int/hiv/HIVConcepts">
         <annotation xsi:type="a:Annotation">
            <a:s r="4">
               <a:s>//
include </a:s>
               <a:s>
                  <a:s>HIVConcepts</a:s>
               </a:s>
               <a:s> called HC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="5" locator="9:1-9:36" localIdentifier="HCC" path="http://smart.who.int/hiv/HIVConceptsCustom">
         <annotation xsi:type="a:Annotation">
            <a:s r="5">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVConceptsCustom</a:s>
               </a:s>
               <a:s> called HCC</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="6" locator="10:1-10:29" localIdentifier="HE" path="http://smart.who.int/hiv/HIVElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="6">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVElements</a:s>
               </a:s>
               <a:s> called HE</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="7" locator="11:1-11:39" localIdentifier="HIE" path="http://smart.who.int/hiv/HIVIndicatorElements">
         <annotation xsi:type="a:Annotation">
            <a:s r="7">
               <a:s>include </a:s>
               <a:s>
                  <a:s>HIVIndicatorElements</a:s>
               </a:s>
               <a:s> called HIE</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="13" locator="14:1-14:88" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="13">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="12">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="11">
                     <a:s>Date</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="10">
                  <a:s r="8">Interval[@2020-01-01, @2020-12-31]</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="10" locator="14:55-14:88" lowClosed="true" highClosed="true" xsi:type="Interval">
            <low localId="8" locator="14:64-14:74" xsi:type="Date">
               <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
               <month valueType="t:Integer" value="1" xsi:type="Literal"/>
               <day valueType="t:Integer" value="1" xsi:type="Literal"/>
            </low>
            <high localId="9" locator="14:77-14:87" xsi:type="Date">
               <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
               <month valueType="t:Integer" value="12" xsi:type="Literal"/>
               <day valueType="t:Integer" value="31" xsi:type="Literal"/>
            </high>
         </default>
         <parameterTypeSpecifier localId="12" locator="14:32-14:45" xsi:type="IntervalTypeSpecifier">
            <pointType localId="11" locator="14:41-14:44" name="t:Date" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
      <def localId="16" locator="15:1-15:53" name="Measurement Date" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="16">
               <a:s>parameter &quot;Measurement Date&quot; </a:s>
               <a:s r="15">
                  <a:s>Date</a:s>
               </a:s>
               <a:s r="14"> default @2020-01-01</a:s>
            </a:s>
         </annotation>
         <default localId="14" locator="15:43-15:53" xsi:type="Date">
            <year valueType="t:Integer" value="2020" xsi:type="Literal"/>
            <month valueType="t:Integer" value="1" xsi:type="Literal"/>
            <day valueType="t:Integer" value="1" xsi:type="Literal"/>
         </default>
         <parameterTypeSpecifier localId="15" locator="15:30-15:33" name="t:Date" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="19" locator="16:1-16:61" name="Testing Interval" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="19">
               <a:s>parameter &quot;Testing Interval&quot; </a:s>
               <a:s r="18">
                  <a:s>System.Quantity</a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="17">
                  <a:s>3 months</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="17" locator="16:54-16:61" value="3" unit="months" xsi:type="Quantity"/>
         <parameterTypeSpecifier localId="18" locator="16:30-16:44" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
      </def>
      <def localId="22" locator="17:1-17:64" name="Intervention Interval" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="22">
               <a:s>parameter &quot;Intervention Interval&quot; </a:s>
               <a:s r="21">
                  <a:s>System.Quantity</a:s>
               </a:s>
               <a:s> default </a:s>
               <a:s r="20">
                  <a:s>7 days</a:s>
               </a:s>
            </a:s>
         </annotation>
         <default localId="20" locator="17:59-17:64" value="7" unit="days" xsi:type="Quantity"/>
         <parameterTypeSpecifier localId="21" locator="17:35-17:49" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
      </def>
   </parameters>
   <contexts>
      <def locator="19:1-19:15" name="Patient"/>
   </contexts>
   <statements>
      <def locator="19:1-19:15" name="Patient" context="Patient">
         <expression xsi:type="SingletonFrom">
            <operand locator="19:1-19:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="45" locator="24:1-28:69" name="routine viral load sample collection" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="45">
               <a:s>//VERIFIED

define &quot;routine viral load sample collection&quot;:
  </a:s>
               <a:s r="44">
                  <a:s>
                     <a:s r="24">
                        <a:s r="23">
                           <a:s r="23">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="43">
                     <a:s>where </a:s>
                     <a:s r="43">
                        <a:s r="34">
                           <a:s r="28">
                              <a:s r="26">
                                 <a:s r="25">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="26">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="27">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  and </a:s>
                           <a:s r="33">
                              <a:s r="30">
                                 <a:s r="29">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="30">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="32">
                                 <a:s r="31">
                                    <a:s>HCC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="32">
                                    <a:s>&quot;viral load test&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="42">
                           <a:s>exists</a:s>
                           <a:s r="41">
                              <a:s>(</a:s>
                              <a:s r="41">
                                 <a:s>
                                    <a:s r="36">
                                       <a:s r="35">
                                          <a:s>
                                             <a:s>P.reasonCode</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> RC</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="40">
                                    <a:s>where </a:s>
                                    <a:s r="40">
                                       <a:s r="37">
                                          <a:s>RC</a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="39">
                                          <a:s r="38">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="39">
                                             <a:s>&quot;Routine viral load test&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="44" locator="25:3-28:69" xsi:type="Query">
            <source localId="24" locator="25:3-25:15" alias="P">
               <expression localId="23" locator="25:3-25:13" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="43" locator="26:3-28:69" xsi:type="And">
               <operand localId="34" locator="26:9-27:36" xsi:type="And">
                  <operand localId="28" locator="26:9-26:30" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="26" locator="26:9-26:16" path="status" scope="P" xsi:type="Property"/>
                     </operand>
                     <operand localId="27" locator="26:20-26:30" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="33" locator="27:7-27:36" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="30" locator="27:7-27:12" path="code" scope="P" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="32" locator="27:16-27:36" name="viral load test" libraryName="HCC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="42" locator="28:7-28:69" xsi:type="Exists">
                  <operand localId="41" locator="28:13-28:69" xsi:type="Query">
                     <source localId="36" locator="28:14-28:28" alias="RC">
                        <expression localId="35" locator="28:14-28:25" path="reasonCode" scope="P" xsi:type="Property"/>
                     </source>
                     <where localId="40" locator="28:30-28:68" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="37" locator="28:36-28:37" name="RC" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="39" locator="28:41-28:68" name="Routine viral load test" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="59" locator="30:1-33:36" name="viral load sample collection" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="59">
               <a:s>define &quot;viral load sample collection&quot;:
  </a:s>
               <a:s r="58">
                  <a:s>
                     <a:s r="47">
                        <a:s r="46">
                           <a:s r="46">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="57">
                     <a:s>where </a:s>
                     <a:s r="57">
                        <a:s r="51">
                           <a:s r="49">
                              <a:s r="48">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="49">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="50">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="56">
                           <a:s r="53">
                              <a:s r="52">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="53">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="55">
                              <a:s r="54">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="55">
                                 <a:s>&quot;viral load test&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="58" locator="31:3-33:36" xsi:type="Query">
            <source localId="47" locator="31:3-31:15" alias="P">
               <expression localId="46" locator="31:3-31:13" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="57" locator="32:3-33:36" xsi:type="And">
               <operand localId="51" locator="32:9-32:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="49" locator="32:9-32:16" path="status" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="50" locator="32:20-32:30" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="56" locator="33:7-33:36" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="53" locator="33:7-33:12" path="code" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="55" locator="33:16-33:36" name="viral load test" libraryName="HCC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="63" locator="36:1-37:29" name="First On ART" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="63">
               <a:s>define &quot;First On ART&quot;:
  </a:s>
               <a:s r="62">
                  <a:s>(</a:s>
                  <a:s r="62">
                     <a:s>First(</a:s>
                     <a:s r="61">
                        <a:s r="60">
                           <a:s>HE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="61">
                           <a:s>&quot;On ART D.DE38&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="62" locator="37:3-37:29" xsi:type="First">
            <source localId="61" locator="37:10-37:27" name="On ART D.DE38" libraryName="HE" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="81" locator="39:1-42:38" name="Viral load tests received after ART intitiation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="81">
               <a:s>define &quot;Viral load tests received after ART intitiation&quot;:
  </a:s>
               <a:s r="80">
                  <a:s>
                     <a:s r="65">
                        <a:s r="64">
                           <a:s>
                              <a:s>HE.&quot;Viral load test result D.DE387&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="74">
                     <a:s>where </a:s>
                     <a:s r="74">
                        <a:s r="69">
                           <a:s>start of </a:s>
                           <a:s r="68">
                              <a:s r="67">
                                 <a:s r="66">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="67">
                                    <a:s>issued</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="68">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="74"> after </a:s>
                        <a:s r="73">
                           <a:s>start of </a:s>
                           <a:s r="72">
                              <a:s r="71">
                                 <a:s r="70">
                                    <a:s>&quot;First On ART&quot;</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="71">
                                    <a:s>effective</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="72">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="79">
                     <a:s>sort by </a:s>
                     <a:s r="78">
                        <a:s r="77">
                           <a:s>start of </a:s>
                           <a:s r="76">
                              <a:s r="75">
                                 <a:s>issued</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="76">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="80" locator="40:3-42:38" xsi:type="Query">
            <source localId="65" locator="40:3-40:39" alias="O">
               <expression localId="64" locator="40:3-40:37" name="Viral load test result D.DE387" libraryName="HE" xsi:type="ExpressionRef"/>
            </source>
            <where localId="74" locator="41:3-41:91" xsi:type="After">
               <operand localId="69" locator="41:9-41:38" xsi:type="Start">
                  <operand localId="68" locator="41:18-41:38" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                     <operand xsi:type="As">
                        <operand localId="67" locator="41:18-41:25" path="issued" scope="O" xsi:type="Property"/>
                        <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                           <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                           <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                        </asTypeSpecifier>
                     </operand>
                  </operand>
               </operand>
               <operand localId="73" locator="41:46-41:91" xsi:type="Start">
                  <operand localId="72" locator="41:55-41:91" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                     <operand localId="71" locator="41:55-41:78" path="effective" xsi:type="Property">
                        <source localId="70" locator="41:55-41:68" name="First On ART" xsi:type="ExpressionRef"/>
                     </operand>
                  </operand>
               </operand>
            </where>
            <sort localId="79" locator="42:3-42:38">
               <by localId="78" locator="42:11-42:38" direction="asc" xsi:type="ByExpression">
                  <expression localId="77" locator="42:11-42:38" xsi:type="Start">
                     <operand localId="76" locator="42:20-42:38" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand xsi:type="As">
                           <operand localId="75" locator="42:20-42:25" name="issued" xsi:type="IdentifierRef"/>
                           <asTypeSpecifier xsi:type="ChoiceTypeSpecifier">
                              <choice name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:Timing" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:instant" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:string" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:Age" xsi:type="NamedTypeSpecifier"/>
                              <choice name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
                           </asTypeSpecifier>
                        </operand>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="107" locator="44:1-49:43" name="Elevated Viral load test during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="107">
               <a:s>define &quot;Elevated Viral load test during Measurement Period&quot;:
  </a:s>
               <a:s r="106">
                  <a:s>
                     <a:s r="83">
                        <a:s r="82">
                           <a:s>
                              <a:s>HE.&quot;Viral load test result D.DE387&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> VL</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="96">
                     <a:s>with </a:s>
                     <a:s r="85">
                        <a:s r="84">
                           <a:s>
                              <a:s>&quot;viral load sample collection&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s> 
    such that </a:s>
                     <a:s r="95">
                        <a:s r="89">
                           <a:s r="87">
                              <a:s r="86">
                                 <a:s>VL</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="87">
                                 <a:s>partOf</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="89">
                              <a:s>references(</a:s>
                              <a:s r="88">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="94">
                           <a:s r="92">
                              <a:s r="91">
                                 <a:s r="90">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="91">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="92">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="94"> during </a:s>
                           <a:s r="93">
                              <a:s>&quot;Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="100">
                     <a:s>where </a:s>
                     <a:s r="100">
                        <a:s r="98">
                           <a:s r="97">
                              <a:s>VL</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="98">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="99"> > 1000</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="105">
                     <a:s>sort by </a:s>
                     <a:s r="104">
                        <a:s r="103">
                           <a:s>start of </a:s>
                           <a:s r="102">
                              <a:s r="101">
                                 <a:s>effective</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="102">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="106" locator="45:3-49:43" xsi:type="Query">
            <source localId="83" locator="45:3-45:40" alias="VL">
               <expression localId="82" locator="45:3-45:37" name="Viral load test result D.DE387" libraryName="HE" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="96" locator="46:5-47:94" alias="P" xsi:type="With">
               <expression localId="84" locator="46:10-46:39" name="viral load sample collection" xsi:type="ExpressionRef"/>
               <suchThat localId="95" locator="47:15-47:94" xsi:type="And">
                  <operand localId="89" locator="47:15-47:37" name="references" libraryName="WCom" xsi:type="FunctionRef">
                     <operand localId="87" locator="47:15-47:23" path="partOf" scope="VL" xsi:type="Property"/>
                     <operand localId="88" locator="47:36" name="P" xsi:type="AliasRef"/>
                  </operand>
                  <operand localId="94" locator="47:43-47:94" xsi:type="IncludedIn">
                     <operand localId="92" locator="47:43-47:66" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="91" locator="47:43-47:53" path="performed" scope="P" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="93" locator="47:75-47:94" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="93" locator="47:75-47:94" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="93" locator="47:75-47:94" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="93" locator="47:75-47:94" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="100" locator="48:5-48:25" xsi:type="Greater">
               <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand asType="fhir:integer" xsi:type="As">
                     <operand localId="98" locator="48:11-48:18" path="value" scope="VL" xsi:type="Property"/>
                  </operand>
               </operand>
               <operand localId="99" locator="48:22-48:25" valueType="t:Integer" value="1000" xsi:type="Literal"/>
            </where>
            <sort localId="105" locator="49:5-49:43">
               <by localId="104" locator="49:13-49:43" direction="asc" xsi:type="ByExpression">
                  <expression localId="103" locator="49:13-49:43" xsi:type="Start">
                     <operand localId="102" locator="49:22-49:43" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="101" locator="49:22-49:30" name="effective" xsi:type="IdentifierRef"/>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="128" locator="52:1-57:43" name="Negative Tests within Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="128">
               <a:s>define &quot;Negative Tests within Measurement Period&quot;:
</a:s>
               <a:s r="127">
                  <a:s>
                     <a:s r="109">
                        <a:s r="108">
                           <a:s>
                              <a:s>HE.&quot;HIV-negative B.DE113&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="116">
                     <a:s>with </a:s>
                     <a:s r="111">
                        <a:s r="110">
                           <a:s>
                              <a:s>HE.&quot;At elevated risk for HIV acquisition B.DE225&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HIV</a:s>
                     </a:s>
                     <a:s>
    such that </a:s>
                     <a:s r="115">
                        <a:s r="113">
                           <a:s r="112">
                              <a:s>O</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="113">
                              <a:s>hasMember</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="115">
                           <a:s>references(</a:s>
                           <a:s r="114">
                              <a:s>HIV</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="121">
                     <a:s>where </a:s>
                     <a:s r="121">
                        <a:s r="119">
                           <a:s r="118">
                              <a:s r="117">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="118">
                                 <a:s>effective</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="119">
                              <a:s>toInterval()</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="121"> starts during </a:s>
                        <a:s r="120">
                           <a:s>&quot;Measurement Period&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="126">
                     <a:s>sort by </a:s>
                     <a:s r="125">
                        <a:s r="124">
                           <a:s>start of </a:s>
                           <a:s r="123">
                              <a:s r="122">
                                 <a:s>effective</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="123">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="127" locator="53:1-57:43" xsi:type="Query">
            <source localId="109" locator="53:1-53:27" alias="O">
               <expression localId="108" locator="53:1-53:25" name="HIV-negative B.DE113" libraryName="HE" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="116" locator="54:5-55:41" alias="HIV" xsi:type="With">
               <expression localId="110" locator="54:10-54:58" name="At elevated risk for HIV acquisition B.DE225" libraryName="HE" xsi:type="ExpressionRef"/>
               <suchThat localId="115" locator="55:15-55:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                  <operand localId="113" locator="55:15-55:25" path="hasMember" scope="O" xsi:type="Property"/>
                  <operand localId="114" locator="55:38-55:40" name="HIV" xsi:type="AliasRef"/>
               </suchThat>
            </relationship>
            <where localId="121" locator="56:5-56:69" xsi:type="In">
               <operand locator="56:36-56:41" xsi:type="Start">
                  <operand localId="119" locator="56:11-56:34" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                     <operand localId="118" locator="56:11-56:21" path="effective" scope="O" xsi:type="Property"/>
                  </operand>
               </operand>
               <operand xsi:type="Interval">
                  <low xsi:type="ToDateTime">
                     <operand path="low" xsi:type="Property">
                        <source localId="120" locator="56:50-56:69" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </low>
                  <lowClosedExpression path="lowClosed" xsi:type="Property">
                     <source localId="120" locator="56:50-56:69" name="Measurement Period" xsi:type="ParameterRef"/>
                  </lowClosedExpression>
                  <high xsi:type="ToDateTime">
                     <operand path="high" xsi:type="Property">
                        <source localId="120" locator="56:50-56:69" name="Measurement Period" xsi:type="ParameterRef"/>
                     </operand>
                  </high>
                  <highClosedExpression path="highClosed" xsi:type="Property">
                     <source localId="120" locator="56:50-56:69" name="Measurement Period" xsi:type="ParameterRef"/>
                  </highClosedExpression>
               </operand>
            </where>
            <sort localId="126" locator="57:5-57:43">
               <by localId="125" locator="57:13-57:43" direction="asc" xsi:type="ByExpression">
                  <expression localId="124" locator="57:13-57:43" xsi:type="Start">
                     <operand localId="123" locator="57:22-57:43" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="122" locator="57:22-57:30" name="effective" xsi:type="IdentifierRef"/>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="131" locator="59:1-60:53" name="First Negative Test within Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="131">
               <a:s>define &quot;First Negative Test within Measurement Period&quot;:
  </a:s>
               <a:s r="130">
                  <a:s>(</a:s>
                  <a:s r="130">
                     <a:s>First(</a:s>
                     <a:s r="129">
                        <a:s>&quot;Negative Tests within Measurement Period&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="130" locator="60:3-60:53" xsi:type="First">
            <source localId="129" locator="60:10-60:51" name="Negative Tests within Measurement Period" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="166" locator="62:1-68:43" name="Negative Tests after First Negative Test" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="166">
               <a:s>define &quot;Negative Tests after First Negative Test&quot;:
</a:s>
               <a:s r="165">
                  <a:s>
                     <a:s r="133">
                        <a:s r="132">
                           <a:s>
                              <a:s>HE.&quot;HIV-negative B.DE113&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="140">
                     <a:s>with </a:s>
                     <a:s r="135">
                        <a:s r="134">
                           <a:s>
                              <a:s>HE.&quot;At elevated risk for HIV acquisition B.DE225&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s> HIV</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="139">
                        <a:s r="137">
                           <a:s r="136">
                              <a:s>O</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="137">
                              <a:s>hasMember</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="139">
                           <a:s>references(</a:s>
                           <a:s r="138">
                              <a:s>HIV</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="159">
                     <a:s>where  </a:s>
                     <a:s r="159">
                        <a:s r="148">
                           <a:s r="143">
                              <a:s r="142">
                                 <a:s r="141">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="142">
                                    <a:s>effective</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="143">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="148"> starts after </a:s>
                           <a:s r="147">
                              <a:s>start of </a:s>
                              <a:s r="146">
                                 <a:s r="145">
                                    <a:s r="144">
                                       <a:s>&quot;First Negative Test within Measurement Period&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="145">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="146">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="158">
                           <a:s r="151">
                              <a:s r="150">
                                 <a:s r="149">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="150">
                                    <a:s>effective</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="151">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="158"> starts before </a:s>
                           <a:s r="157">
                              <a:s>(</a:s>
                              <a:s r="157">
                                 <a:s r="155">
                                    <a:s>start of </a:s>
                                    <a:s r="154">
                                       <a:s r="153">
                                          <a:s r="152">
                                             <a:s>&quot;First Negative Test within Measurement Period&quot;</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="153">
                                             <a:s>effective</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="154">
                                          <a:s>toInterval()</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="156">
                                    <a:s>&quot;Testing Interval&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="164">
                     <a:s>sort by </a:s>
                     <a:s r="163">
                        <a:s r="162">
                           <a:s>start of </a:s>
                           <a:s r="161">
                              <a:s r="160">
                                 <a:s>effective</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="161">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="165" locator="63:1-68:43" xsi:type="Query">
            <source localId="133" locator="63:1-63:27" alias="O">
               <expression localId="132" locator="63:1-63:25" name="HIV-negative B.DE113" libraryName="HE" xsi:type="ExpressionRef"/>
            </source>
            <relationship localId="140" locator="64:5-65:43" alias="HIV" xsi:type="With">
               <expression localId="134" locator="64:10-64:58" name="At elevated risk for HIV acquisition B.DE225" libraryName="HE" xsi:type="ExpressionRef"/>
               <suchThat localId="139" locator="65:17-65:43" name="references" libraryName="WCom" xsi:type="FunctionRef">
                  <operand localId="137" locator="65:17-65:27" path="hasMember" scope="O" xsi:type="Property"/>
                  <operand localId="138" locator="65:40-65:42" name="HIV" xsi:type="AliasRef"/>
               </suchThat>
            </relationship>
            <where localId="159" locator="66:5-67:151" xsi:type="And">
               <operand localId="148" locator="66:12-66:128" xsi:type="After">
                  <operand locator="66:37-66:42" xsi:type="Start">
                     <operand localId="143" locator="66:12-66:35" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="142" locator="66:12-66:22" path="effective" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="147" locator="66:50-66:128" xsi:type="Start">
                     <operand localId="146" locator="66:59-66:128" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="145" locator="66:59-66:115" path="effective" xsi:type="Property">
                           <source localId="144" locator="66:59-66:105" name="First Negative Test within Measurement Period" xsi:type="ExpressionRef"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="158" locator="67:11-67:151" xsi:type="Before">
                  <operand locator="67:36-67:41" xsi:type="Start">
                     <operand localId="151" locator="67:11-67:34" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="150" locator="67:11-67:21" path="effective" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="157" locator="67:50-67:151" xsi:type="Add">
                     <operand localId="155" locator="67:51-67:129" xsi:type="Start">
                        <operand localId="154" locator="67:60-67:129" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="153" locator="67:60-67:116" path="effective" xsi:type="Property">
                              <source localId="152" locator="67:60-67:106" name="First Negative Test within Measurement Period" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="156" locator="67:133-67:150" name="Testing Interval" xsi:type="ParameterRef"/>
                  </operand>
               </operand>
            </where>
            <sort localId="164" locator="68:5-68:43">
               <by localId="163" locator="68:13-68:43" direction="asc" xsi:type="ByExpression">
                  <expression localId="162" locator="68:13-68:43" xsi:type="Start">
                     <operand localId="161" locator="68:22-68:43" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="160" locator="68:22-68:30" name="effective" xsi:type="IdentifierRef"/>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="194" locator="70:3-77:3" name="patientGroups" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="194">
               <a:s>define patientGroups:
  </a:s>
               <a:s r="193">
                  <a:s>List&lt;</a:s>
                  <a:s r="167">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="172">
                     <a:s>if </a:s>
                     <a:s r="169">
                        <a:s r="168">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="169">
                           <a:s>&quot;Sex worker B.DE51&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="170">
                        <a:s>'SW'</a:s>
                     </a:s>
                     <a:s r="171"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="177">
                     <a:s>if </a:s>
                     <a:s r="174">
                        <a:s r="173">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="174">
                           <a:s>&quot;Men who have sex with men&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="175">
                        <a:s>'MSM'</a:s>
                     </a:s>
                     <a:s r="176"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="182">
                     <a:s>if </a:s>
                     <a:s r="179">
                        <a:s r="178">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="179">
                           <a:s>&quot;Trans and gender-diverse people B.DE53&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="180">
                        <a:s>'Trans'</a:s>
                     </a:s>
                     <a:s r="181"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="187">
                     <a:s>if </a:s>
                     <a:s r="184">
                        <a:s r="183">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="184">
                           <a:s>&quot;People who inject drugs B.DE54&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="185">
                        <a:s>'PWID'</a:s>
                     </a:s>
                     <a:s r="186"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="192">
                     <a:s>if </a:s>
                     <a:s r="189">
                        <a:s r="188">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="189">
                           <a:s>&quot;People living in prisons and other closed settings&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="190">
                        <a:s>'Prisoner'</a:s>
                     </a:s>
                     <a:s r="191"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="193" locator="71:3-77:3" xsi:type="List">
            <element localId="172" locator="72:5-72:50" xsi:type="If">
               <condition localId="169" locator="72:8-72:30" name="Sex worker B.DE51" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="170" locator="72:37-72:40" valueType="t:String" value="SW" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="171" locator="72:47-72:50" xsi:type="Null"/>
               </else>
            </element>
            <element localId="177" locator="73:5-73:59" xsi:type="If">
               <condition localId="174" locator="73:8-73:38" name="Men who have sex with men" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="175" locator="73:45-73:49" valueType="t:String" value="MSM" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="176" locator="73:56-73:59" xsi:type="Null"/>
               </else>
            </element>
            <element localId="182" locator="74:5-74:74" xsi:type="If">
               <condition localId="179" locator="74:8-74:51" name="Trans and gender-diverse people B.DE53" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="180" locator="74:58-74:64" valueType="t:String" value="Trans" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="181" locator="74:71-74:74" xsi:type="Null"/>
               </else>
            </element>
            <element localId="187" locator="75:5-75:65" xsi:type="If">
               <condition localId="184" locator="75:8-75:43" name="People who inject drugs B.DE54" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="185" locator="75:50-75:55" valueType="t:String" value="PWID" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="186" locator="75:62-75:65" xsi:type="Null"/>
               </else>
            </element>
            <element localId="192" locator="76:5-76:89" xsi:type="If">
               <condition localId="189" locator="76:8-76:63" name="People living in prisons and other closed settings" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="190" locator="76:70-76:79" valueType="t:String" value="Prisoner" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="191" locator="76:86-76:89" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="222" locator="79:3-86:3" name="Treatment outcome category" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="222">
               <a:s>define &quot;Treatment outcome category&quot;:
  </a:s>
               <a:s r="221">
                  <a:s>List&lt;</a:s>
                  <a:s r="195">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="200">
                     <a:s>if </a:s>
                     <a:s r="197">
                        <a:s r="196">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="197">
                           <a:s>&quot;Lost to follow-up&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="198">
                        <a:s>'LTFU'</a:s>
                     </a:s>
                     <a:s r="199"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="205">
                     <a:s>if </a:s>
                     <a:s r="202">
                        <a:s r="201">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="202">
                           <a:s>&quot;Transferred out&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="203">
                        <a:s>'Transfer Out'</a:s>
                     </a:s>
                     <a:s r="204"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="210">
                     <a:s>if </a:s>
                     <a:s r="207">
                        <a:s r="206">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="207">
                           <a:s>&quot;Death documented&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="208">
                        <a:s>'Death'</a:s>
                     </a:s>
                     <a:s r="209"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="215">
                     <a:s>if </a:s>
                     <a:s r="212">
                        <a:s r="211">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="212">
                           <a:s>&quot;Refused stopped treatment&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="213">
                        <a:s>'Stopped'</a:s>
                     </a:s>
                     <a:s r="214"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="220">
                     <a:s>if </a:s>
                     <a:s r="217">
                        <a:s r="216">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="217">
                           <a:s>&quot;On ART H.DE47&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="218">
                        <a:s>'On ART'</a:s>
                     </a:s>
                     <a:s r="219"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="221" locator="80:3-86:3" xsi:type="List">
            <element localId="200" locator="81:5-81:52" xsi:type="If">
               <condition localId="197" locator="81:8-81:30" name="Lost to follow-up" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="198" locator="81:37-81:42" valueType="t:String" value="LTFU" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="199" locator="81:49-81:52" xsi:type="Null"/>
               </else>
            </element>
            <element localId="205" locator="82:5-82:58" xsi:type="If">
               <condition localId="202" locator="82:8-82:28" name="Transferred out" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="203" locator="82:35-82:48" valueType="t:String" value="Transfer Out" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="204" locator="82:55-82:58" xsi:type="Null"/>
               </else>
            </element>
            <element localId="210" locator="83:5-83:52" xsi:type="If">
               <condition localId="207" locator="83:8-83:29" name="Death documented" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="208" locator="83:36-83:42" valueType="t:String" value="Death" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="209" locator="83:49-83:52" xsi:type="Null"/>
               </else>
            </element>
            <element localId="215" locator="84:5-84:63" xsi:type="If">
               <condition localId="212" locator="84:8-84:38" name="Refused stopped treatment" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="213" locator="84:45-84:53" valueType="t:String" value="Stopped" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="214" locator="84:60-84:63" xsi:type="Null"/>
               </else>
            </element>
            <element localId="220" locator="85:5-85:50" xsi:type="If">
               <condition localId="217" locator="85:8-85:26" name="On ART H.DE47" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="218" locator="85:33-85:40" valueType="t:String" value="On ART" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="219" locator="85:47-85:50" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="291" locator="94:1-108:7" name="By Age Stratifier" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="291">
               <a:s>/*
 * By Age Stratifiers
 * (0–4, 5–9, 10–14, 15–19, 20–24, 25–29, 30–34, 35–39, 40–44, 45–49, 50+ years)
 * 
 */
define &quot;By Age Stratifier&quot;:
    </a:s>
               <a:s r="290">
                  <a:s>case 
        </a:s>
                  <a:s r="228">
                     <a:s>when </a:s>
                     <a:s r="226">
                        <a:s r="224">
                           <a:s r="223">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="224">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="225"> &lt;= 4</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="227">
                        <a:s>'0-4'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="234">
                     <a:s>when </a:s>
                     <a:s r="232">
                        <a:s r="230">
                           <a:s r="229">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="230">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="231"> &lt;= 9</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="233">
                        <a:s>'5-9'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="240">
                     <a:s>when </a:s>
                     <a:s r="238">
                        <a:s r="236">
                           <a:s r="235">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="236">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="237"> &lt;= 14</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="239">
                        <a:s>'10–14'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="246">
                     <a:s>when </a:s>
                     <a:s r="244">
                        <a:s r="242">
                           <a:s r="241">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="242">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="243"> &lt;= 19</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="245">
                        <a:s>'15–19'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="252">
                     <a:s>when </a:s>
                     <a:s r="250">
                        <a:s r="248">
                           <a:s r="247">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="248">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="249"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="251">
                        <a:s>'20–24'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="258">
                     <a:s>when </a:s>
                     <a:s r="256">
                        <a:s r="254">
                           <a:s r="253">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="254">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="255"> &lt;= 29</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="257">
                        <a:s>'25–29'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="264">
                     <a:s>when </a:s>
                     <a:s r="262">
                        <a:s r="260">
                           <a:s r="259">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="260">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="261"> &lt;= 34</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="263">
                        <a:s>'30–34'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="270">
                     <a:s>when </a:s>
                     <a:s r="268">
                        <a:s r="266">
                           <a:s r="265">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="266">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="267"> &lt;= 39</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="269">
                        <a:s>'35–39'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="276">
                     <a:s>when </a:s>
                     <a:s r="274">
                        <a:s r="272">
                           <a:s r="271">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="272">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="273"> &lt;= 44</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="275">
                        <a:s>'40–44'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="282">
                     <a:s>when </a:s>
                     <a:s r="280">
                        <a:s r="278">
                           <a:s r="277">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="278">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="279"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="281">
                        <a:s>'45–49'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="288">
                     <a:s>when </a:s>
                     <a:s r="286">
                        <a:s r="284">
                           <a:s r="283">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="284">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="285"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="287">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="289">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="290" locator="95:5-108:7" xsi:type="Case">
            <caseItem localId="228" locator="96:9-96:47">
               <when localId="226" locator="96:14-96:36" xsi:type="LessOrEqual">
                  <operand localId="224" locator="96:14-96:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="225" locator="96:36" valueType="t:Integer" value="4" xsi:type="Literal"/>
               </when>
               <then localId="227" locator="96:43-96:47" valueType="t:String" value="0-4" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="234" locator="97:9-97:47">
               <when localId="232" locator="97:14-97:36" xsi:type="LessOrEqual">
                  <operand localId="230" locator="97:14-97:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="231" locator="97:36" valueType="t:Integer" value="9" xsi:type="Literal"/>
               </when>
               <then localId="233" locator="97:43-97:47" valueType="t:String" value="5-9" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="240" locator="98:9-98:50">
               <when localId="238" locator="98:14-98:37" xsi:type="LessOrEqual">
                  <operand localId="236" locator="98:14-98:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="237" locator="98:36-98:37" valueType="t:Integer" value="14" xsi:type="Literal"/>
               </when>
               <then localId="239" locator="98:44-98:50" valueType="t:String" value="10–14" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="246" locator="99:9-99:50">
               <when localId="244" locator="99:14-99:37" xsi:type="LessOrEqual">
                  <operand localId="242" locator="99:14-99:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="243" locator="99:36-99:37" valueType="t:Integer" value="19" xsi:type="Literal"/>
               </when>
               <then localId="245" locator="99:44-99:50" valueType="t:String" value="15–19" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="252" locator="100:9-100:50">
               <when localId="250" locator="100:14-100:37" xsi:type="LessOrEqual">
                  <operand localId="248" locator="100:14-100:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="249" locator="100:36-100:37" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="251" locator="100:44-100:50" valueType="t:String" value="20–24" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="258" locator="101:9-101:50">
               <when localId="256" locator="101:14-101:37" xsi:type="LessOrEqual">
                  <operand localId="254" locator="101:14-101:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="255" locator="101:36-101:37" valueType="t:Integer" value="29" xsi:type="Literal"/>
               </when>
               <then localId="257" locator="101:44-101:50" valueType="t:String" value="25–29" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="264" locator="102:9-102:50">
               <when localId="262" locator="102:14-102:37" xsi:type="LessOrEqual">
                  <operand localId="260" locator="102:14-102:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="261" locator="102:36-102:37" valueType="t:Integer" value="34" xsi:type="Literal"/>
               </when>
               <then localId="263" locator="102:44-102:50" valueType="t:String" value="30–34" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="270" locator="103:9-103:50">
               <when localId="268" locator="103:14-103:37" xsi:type="LessOrEqual">
                  <operand localId="266" locator="103:14-103:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="267" locator="103:36-103:37" valueType="t:Integer" value="39" xsi:type="Literal"/>
               </when>
               <then localId="269" locator="103:44-103:50" valueType="t:String" value="35–39" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="276" locator="104:9-104:50">
               <when localId="274" locator="104:14-104:37" xsi:type="LessOrEqual">
                  <operand localId="272" locator="104:14-104:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="273" locator="104:36-104:37" valueType="t:Integer" value="44" xsi:type="Literal"/>
               </when>
               <then localId="275" locator="104:44-104:50" valueType="t:String" value="40–44" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="282" locator="105:9-105:50">
               <when localId="280" locator="105:14-105:37" xsi:type="LessOrEqual">
                  <operand localId="278" locator="105:14-105:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="279" locator="105:36-105:37" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="281" locator="105:44-105:50" valueType="t:String" value="45–49" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="288" locator="106:9-106:48">
               <when localId="286" locator="106:14-106:37" xsi:type="GreaterOrEqual">
                  <operand localId="284" locator="106:14-106:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="285" locator="106:36-106:37" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="287" locator="106:44-106:48" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="289" locator="107:14-107:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="336" locator="115:1-125:7" name="By Age Stratifier 2" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="336">
               <a:s>/*
 * By Age Stratifiers
 * Age (0–4, 5–9, 10–14, 15–19, 20–24, 25–49, 50+ years)
 * 
 */
define &quot;By Age Stratifier 2&quot;:
    </a:s>
               <a:s r="335">
                  <a:s>case 
        </a:s>
                  <a:s r="297">
                     <a:s>when </a:s>
                     <a:s r="295">
                        <a:s r="293">
                           <a:s r="292">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="293">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="294"> &lt;= 4</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="296">
                        <a:s>'0-4'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="303">
                     <a:s>when </a:s>
                     <a:s r="301">
                        <a:s r="299">
                           <a:s r="298">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="299">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="300"> &lt;= 9</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="302">
                        <a:s>'5-9'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="309">
                     <a:s>when </a:s>
                     <a:s r="307">
                        <a:s r="305">
                           <a:s r="304">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="305">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="306"> &lt;= 14</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="308">
                        <a:s>'10–14'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="315">
                     <a:s>when </a:s>
                     <a:s r="313">
                        <a:s r="311">
                           <a:s r="310">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="311">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="312"> &lt;= 19</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="314">
                        <a:s>'15–19'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="321">
                     <a:s>when </a:s>
                     <a:s r="319">
                        <a:s r="317">
                           <a:s r="316">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="317">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="318"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="320">
                        <a:s>'20–24'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="327">
                     <a:s>when </a:s>
                     <a:s r="325">
                        <a:s r="323">
                           <a:s r="322">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="323">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="324"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="326">
                        <a:s>'25–49'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="333">
                     <a:s>when </a:s>
                     <a:s r="331">
                        <a:s r="329">
                           <a:s r="328">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="329">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="330"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="332">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="334">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="335" locator="116:5-125:7" xsi:type="Case">
            <caseItem localId="297" locator="117:9-117:47">
               <when localId="295" locator="117:14-117:36" xsi:type="LessOrEqual">
                  <operand localId="293" locator="117:14-117:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="294" locator="117:36" valueType="t:Integer" value="4" xsi:type="Literal"/>
               </when>
               <then localId="296" locator="117:43-117:47" valueType="t:String" value="0-4" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="303" locator="118:9-118:47">
               <when localId="301" locator="118:14-118:36" xsi:type="LessOrEqual">
                  <operand localId="299" locator="118:14-118:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="300" locator="118:36" valueType="t:Integer" value="9" xsi:type="Literal"/>
               </when>
               <then localId="302" locator="118:43-118:47" valueType="t:String" value="5-9" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="309" locator="119:9-119:50">
               <when localId="307" locator="119:14-119:37" xsi:type="LessOrEqual">
                  <operand localId="305" locator="119:14-119:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="306" locator="119:36-119:37" valueType="t:Integer" value="14" xsi:type="Literal"/>
               </when>
               <then localId="308" locator="119:44-119:50" valueType="t:String" value="10–14" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="315" locator="120:9-120:50">
               <when localId="313" locator="120:14-120:37" xsi:type="LessOrEqual">
                  <operand localId="311" locator="120:14-120:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="312" locator="120:36-120:37" valueType="t:Integer" value="19" xsi:type="Literal"/>
               </when>
               <then localId="314" locator="120:44-120:50" valueType="t:String" value="15–19" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="321" locator="121:9-121:50">
               <when localId="319" locator="121:14-121:37" xsi:type="LessOrEqual">
                  <operand localId="317" locator="121:14-121:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="318" locator="121:36-121:37" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="320" locator="121:44-121:50" valueType="t:String" value="20–24" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="327" locator="122:9-122:50">
               <when localId="325" locator="122:14-122:37" xsi:type="LessOrEqual">
                  <operand localId="323" locator="122:14-122:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="324" locator="122:36-122:37" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="326" locator="122:44-122:50" valueType="t:String" value="25–49" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="333" locator="123:9-123:48">
               <when localId="331" locator="123:14-123:37" xsi:type="GreaterOrEqual">
                  <operand localId="329" locator="123:14-123:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="330" locator="123:36-123:37" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="332" locator="123:44-123:48" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="334" locator="124:14-124:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="368" locator="127:1-134:7" name="By Age Stratifier 3" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="368">
               <a:s>define &quot;By Age Stratifier 3&quot;:
    </a:s>
               <a:s r="367">
                  <a:s>case 
        </a:s>
                  <a:s r="347">
                     <a:s>when </a:s>
                     <a:s r="345">
                        <a:s r="340">
                           <a:s r="338">
                              <a:s r="337">
                                 <a:s>HIE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="338">
                                 <a:s>&quot;Age In Years&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="339"> >= 15</a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="344">
                           <a:s r="342">
                              <a:s r="341">
                                 <a:s>HIE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="342">
                                 <a:s>&quot;Age In Years&quot;</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="343">&lt;= 19</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="346">
                        <a:s>'15-19'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="353">
                     <a:s>when </a:s>
                     <a:s r="351">
                        <a:s r="349">
                           <a:s r="348">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="349">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="350"> &lt;= 24</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="352">
                        <a:s>'20-24'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="359">
                     <a:s>when </a:s>
                     <a:s r="357">
                        <a:s r="355">
                           <a:s r="354">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="355">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="356"> &lt;= 49</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="358">
                        <a:s>'25–49'</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="365">
                     <a:s>when </a:s>
                     <a:s r="363">
                        <a:s r="361">
                           <a:s r="360">
                              <a:s>HIE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="361">
                              <a:s>&quot;Age In Years&quot;</a:s>
                           </a:s>
                        </a:s>
                        <a:s r="362"> >= 50</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="364">
                        <a:s>'50+'</a:s>
                     </a:s>
                  </a:s>
                  <a:s r="366">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="367" locator="128:5-134:7" xsi:type="Case">
            <caseItem localId="347" locator="129:9-129:78">
               <when localId="345" locator="129:14-129:65" xsi:type="And">
                  <operand localId="340" locator="129:14-129:37" xsi:type="GreaterOrEqual">
                     <operand localId="338" locator="129:14-129:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                     <operand localId="339" locator="129:36-129:37" valueType="t:Integer" value="15" xsi:type="Literal"/>
                  </operand>
                  <operand localId="344" locator="129:43-129:65" xsi:type="LessOrEqual">
                     <operand localId="342" locator="129:43-129:60" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                     <operand localId="343" locator="129:64-129:65" valueType="t:Integer" value="19" xsi:type="Literal"/>
                  </operand>
               </when>
               <then localId="346" locator="129:72-129:78" valueType="t:String" value="15-19" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="353" locator="130:9-130:50">
               <when localId="351" locator="130:14-130:37" xsi:type="LessOrEqual">
                  <operand localId="349" locator="130:14-130:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="350" locator="130:36-130:37" valueType="t:Integer" value="24" xsi:type="Literal"/>
               </when>
               <then localId="352" locator="130:44-130:50" valueType="t:String" value="20-24" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="359" locator="131:9-131:50">
               <when localId="357" locator="131:14-131:37" xsi:type="LessOrEqual">
                  <operand localId="355" locator="131:14-131:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="356" locator="131:36-131:37" valueType="t:Integer" value="49" xsi:type="Literal"/>
               </when>
               <then localId="358" locator="131:44-131:50" valueType="t:String" value="25–49" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="365" locator="132:9-132:48">
               <when localId="363" locator="132:14-132:37" xsi:type="GreaterOrEqual">
                  <operand localId="361" locator="132:14-132:31" name="Age In Years" libraryName="HIE" xsi:type="ExpressionRef"/>
                  <operand localId="362" locator="132:36-132:37" valueType="t:Integer" value="50" xsi:type="Literal"/>
               </when>
               <then localId="364" locator="132:44-132:48" valueType="t:String" value="50+" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:String" xsi:type="As">
               <operand localId="366" locator="133:14-133:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="386" locator="140:3-146:7" name="HIV status of partner or contact" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="386">
               <a:s>/*
 * By state stratifier
 */

  define &quot;HIV status of partner or contact&quot;:
    </a:s>
               <a:s r="385">
                  <a:s>case 
        </a:s>
                  <a:s r="373">
                     <a:s>when </a:s>
                     <a:s r="370">
                        <a:s r="369">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="370">
                           <a:s>&quot;Already knew positive&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="372">
                        <a:s r="371">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="372">
                           <a:s>&quot;Already knew positive&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="378">
                     <a:s>when </a:s>
                     <a:s r="375">
                        <a:s r="374">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="375">
                           <a:s>&quot;Newly diagnosed&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="377">
                        <a:s r="376">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="377">
                           <a:s>&quot;Newly diagnosed&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="383">
                     <a:s>when </a:s>
                     <a:s r="380">
                        <a:s r="379">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="380">
                           <a:s>&quot;Negative H.DE37&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="382">
                        <a:s r="381">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="382">
                           <a:s>&quot;Negative - HIV.H.DE37&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="384">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="385" locator="141:5-146:7" xsi:type="Case">
            <caseItem localId="373" locator="142:9-142:72">
               <when localId="370" locator="142:14-142:40" name="Already knew positive" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="372" locator="142:47-142:72" name="Already knew positive" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="378" locator="143:9-143:60">
               <when localId="375" locator="143:14-143:34" name="Newly diagnosed" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="377" locator="143:41-143:60" name="Newly diagnosed" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="383" locator="144:9-144:66">
               <when localId="380" locator="144:14-144:34" name="Negative H.DE37" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="382" locator="144:41-144:66" name="Negative - HIV.H.DE37" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else asType="t:Code" xsi:type="As">
               <operand localId="384" locator="145:14-145:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="419" locator="149:3-157:3" name="HIV prevention intervention" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="419">
               <a:s>//(including PrEP, OAMT, NSP, STI services, VMMC) 
  define &quot;HIV prevention intervention&quot;:
  </a:s>
               <a:s r="418">
                  <a:s>List&lt;</a:s>
                  <a:s r="387">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="392">
                     <a:s>if </a:s>
                     <a:s r="389">
                        <a:s r="388">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="389">
                           <a:s>&quot;PrEP service&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="390">
                        <a:s>'PrEP'</a:s>
                     </a:s>
                     <a:s r="391"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="397">
                     <a:s>if </a:s>
                     <a:s r="394">
                        <a:s r="393">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="394">
                           <a:s>&quot;OAMT&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="395">
                        <a:s>'OAMT'</a:s>
                     </a:s>
                     <a:s r="396"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="402">
                     <a:s>if </a:s>
                     <a:s r="399">
                        <a:s r="398">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="399">
                           <a:s>&quot;NSP&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="400">
                        <a:s>'NSP'</a:s>
                     </a:s>
                     <a:s r="401"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="407">
                     <a:s>if </a:s>
                     <a:s r="404">
                        <a:s r="403">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="404">
                           <a:s>&quot;STI services&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="405">
                        <a:s>'STI services'</a:s>
                     </a:s>
                     <a:s r="406"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="412">
                     <a:s>if </a:s>
                     <a:s r="409">
                        <a:s r="408">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="409">
                           <a:s>&quot;VMMC&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="410">
                        <a:s>'VMMC'</a:s>
                     </a:s>
                     <a:s r="411"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="417">
                     <a:s>if </a:s>
                     <a:s r="414">
                        <a:s r="413">
                           <a:s>HIE</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="414">
                           <a:s>&quot;Other PRV.DE8&quot;</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="415">
                        <a:s>'other prevention'</a:s>
                     </a:s>
                     <a:s r="416"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="418" locator="150:3-157:3" xsi:type="List">
            <element localId="392" locator="151:5-151:47" xsi:type="If">
               <condition localId="389" locator="151:8-151:25" name="PrEP service" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="390" locator="151:32-151:37" valueType="t:String" value="PrEP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="391" locator="151:44-151:47" xsi:type="Null"/>
               </else>
            </element>
            <element localId="397" locator="152:5-152:39" xsi:type="If">
               <condition localId="394" locator="152:8-152:17" name="OAMT" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="395" locator="152:24-152:29" valueType="t:String" value="OAMT" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="396" locator="152:36-152:39" xsi:type="Null"/>
               </else>
            </element>
            <element localId="402" locator="153:5-153:37" xsi:type="If">
               <condition localId="399" locator="153:8-153:16" name="NSP" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="400" locator="153:23-153:27" valueType="t:String" value="NSP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="401" locator="153:34-153:37" xsi:type="Null"/>
               </else>
            </element>
            <element localId="407" locator="154:5-154:55" xsi:type="If">
               <condition localId="404" locator="154:8-154:25" name="STI services" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="405" locator="154:32-154:45" valueType="t:String" value="STI services" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="406" locator="154:52-154:55" xsi:type="Null"/>
               </else>
            </element>
            <element localId="412" locator="155:5-155:39" xsi:type="If">
               <condition localId="409" locator="155:8-155:17" name="VMMC" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="410" locator="155:24-155:29" valueType="t:String" value="VMMC" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="411" locator="155:36-155:39" xsi:type="Null"/>
               </else>
            </element>
            <element localId="417" locator="156:5-156:60" xsi:type="If">
               <condition localId="414" locator="156:8-156:26" name="Other PRV.DE8" libraryName="HIE" xsi:type="ExpressionRef"/>
               <then localId="415" locator="156:33-156:50" valueType="t:String" value="other prevention" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="416" locator="156:57-156:60" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="465" locator="160:1-165:5" name="Patient Deceased during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="465">
               <a:s>//DRAFT
define &quot;Patient Deceased during Measurement Period&quot;:
  </a:s>
               <a:s r="464">
                  <a:s>case 
    </a:s>
                  <a:s r="442">
                     <a:s>when </a:s>
                     <a:s r="428">
                        <a:s r="423">
                           <a:s r="421">
                              <a:s r="420">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="421">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s> is </a:s>
                           <a:s r="422">
                              <a:s>FHIR.boolean</a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="427">
                           <a:s r="425">
                              <a:s r="424">
                                 <a:s>Patient</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="425">
                                 <a:s>deceased</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="426"> ~ true</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="441">
                        <a:s r="434">
                           <a:s r="431">
                              <a:s r="430">
                                 <a:s r="429">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="430">
                                    <a:s>meta</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="431">
                                 <a:s>lastUpdated</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="434"> before </a:s>
                           <a:s r="433">
                              <a:s>end of  </a:s>
                              <a:s r="432">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and  </a:s>
                        <a:s r="440">
                           <a:s r="437">
                              <a:s r="436">
                                 <a:s r="435">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="436">
                                    <a:s>meta</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="437">
                                 <a:s>lastUpdated</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="440"> after </a:s>
                           <a:s r="439">
                              <a:s>start of </a:s>
                              <a:s r="438">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="462">
                     <a:s>when </a:s>
                     <a:s r="446">
                        <a:s r="444">
                           <a:s r="443">
                              <a:s>Patient</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="444">
                              <a:s>deceased</a:s>
                           </a:s>
                        </a:s>
                        <a:s> is </a:s>
                        <a:s r="445">
                           <a:s>FHIR.dateTime</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="461">
                        <a:s r="453">
                           <a:s r="450">
                              <a:s r="448">
                                 <a:s r="447">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="448">
                                    <a:s>deceased</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="449">
                                 <a:s>FHIR.dateTime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="453"> before </a:s>
                           <a:s r="452">
                              <a:s>end of  </a:s>
                              <a:s r="451">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="460">
                           <a:s r="457">
                              <a:s r="455">
                                 <a:s r="454">
                                    <a:s>Patient</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="455">
                                    <a:s>deceased</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="456">
                                 <a:s>FHIR.dateTime</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="460"> after </a:s>
                           <a:s r="459">
                              <a:s>start of </a:s>
                              <a:s r="458">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="463">
    else false
  end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="464" locator="161:3-165:5" xsi:type="Case">
            <caseItem localId="442" locator="162:5-162:201">
               <when localId="428" locator="162:10-162:69" xsi:type="And">
                  <operand localId="423" locator="162:10-162:41" xsi:type="Is">
                     <operand localId="421" locator="162:10-162:25" path="deceased" xsi:type="Property">
                        <source localId="420" locator="162:10-162:16" name="Patient" xsi:type="ExpressionRef"/>
                     </operand>
                     <isTypeSpecifier localId="422" locator="162:30-162:41" name="fhir:boolean" xsi:type="NamedTypeSpecifier"/>
                  </operand>
                  <operand localId="427" locator="162:47-162:69" xsi:type="Equivalent">
                     <operand name="ToBoolean" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:boolean" xsi:type="As">
                           <operand localId="425" locator="162:47-162:62" path="deceased" xsi:type="Property">
                              <source localId="424" locator="162:47-162:53" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="426" locator="162:66-162:69" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  </operand>
               </when>
               <then localId="441" locator="162:76-162:201" xsi:type="And">
                  <operand localId="434" locator="162:76-162:135" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="431" locator="162:76-162:99" path="lastUpdated" xsi:type="Property">
                           <source localId="430" locator="162:76-162:87" path="meta" xsi:type="Property">
                              <source localId="429" locator="162:76-162:82" name="Patient" xsi:type="ExpressionRef"/>
                           </source>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="433" locator="162:108-162:135" xsi:type="End">
                           <operand localId="432" locator="162:116-162:135" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="440" locator="162:142-162:201" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="437" locator="162:142-162:165" path="lastUpdated" xsi:type="Property">
                           <source localId="436" locator="162:142-162:153" path="meta" xsi:type="Property">
                              <source localId="435" locator="162:142-162:148" name="Patient" xsi:type="ExpressionRef"/>
                           </source>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="439" locator="162:173-162:201" xsi:type="Start">
                           <operand localId="438" locator="162:182-162:201" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="462" locator="163:5-163:191">
               <when localId="446" locator="163:10-163:42" xsi:type="Is">
                  <operand localId="444" locator="163:10-163:25" path="deceased" xsi:type="Property">
                     <source localId="443" locator="163:10-163:16" name="Patient" xsi:type="ExpressionRef"/>
                  </operand>
                  <isTypeSpecifier localId="445" locator="163:30-163:42" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
               </when>
               <then localId="461" locator="163:49-163:191" xsi:type="And">
                  <operand localId="453" locator="163:49-163:117" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="450" locator="163:49-163:81" strict="false" xsi:type="As">
                           <operand localId="448" locator="163:49-163:64" path="deceased" xsi:type="Property">
                              <source localId="447" locator="163:49-163:55" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                           <asTypeSpecifier localId="449" locator="163:69-163:81" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="452" locator="163:90-163:117" xsi:type="End">
                           <operand localId="451" locator="163:98-163:117" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="460" locator="163:123-163:191" xsi:type="After">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="457" locator="163:123-163:155" strict="false" xsi:type="As">
                           <operand localId="455" locator="163:123-163:138" path="deceased" xsi:type="Property">
                              <source localId="454" locator="163:123-163:129" name="Patient" xsi:type="ExpressionRef"/>
                           </operand>
                           <asTypeSpecifier localId="456" locator="163:143-163:155" name="fhir:dateTime" xsi:type="NamedTypeSpecifier"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="459" locator="163:163-163:191" xsi:type="Start">
                           <operand localId="458" locator="163:172-163:191" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else localId="463" locator="164:10-164:14" valueType="t:Boolean" value="false" xsi:type="Literal"/>
         </expression>
      </def>
      <def localId="494" locator="167:1-172:39" name="HIV Positive Condition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="494">
               <a:s>define &quot;HIV Positive Condition&quot;:
</a:s>
               <a:s r="493">
                  <a:s>
                     <a:s r="467">
                        <a:s r="466">
                           <a:s r="466">
                              <a:s>[Condition]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> C</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="487">
                     <a:s>where </a:s>
                     <a:s r="487">
                        <a:s r="481">
                           <a:s r="472">
                              <a:s r="469">
                                 <a:s r="468">
                                    <a:s>C</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="469">
                                    <a:s>clinicalStatus</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="471">
                                 <a:s r="470">
                                    <a:s>HCC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="471">
                                    <a:s>&quot;active&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="480">
                              <a:s>exists</a:s>
                              <a:s r="479">
                                 <a:s>(</a:s>
                                 <a:s r="479">
                                    <a:s>
                                       <a:s r="474">
                                          <a:s r="473">
                                             <a:s>
                                                <a:s>C.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> CC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="478">
                                       <a:s>where </a:s>
                                       <a:s r="478">
                                          <a:s r="475">
                                             <a:s>CC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="477">
                                             <a:s r="476">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="477">
                                                <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="486">
                           <a:s r="483">
                              <a:s r="482">
                                 <a:s>C</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="483">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="485">
                              <a:s r="484">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="485">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="492">
                     <a:s>sort by </a:s>
                     <a:s r="491">
                        <a:s r="490">
                           <a:s>start of </a:s>
                           <a:s r="489">
                              <a:s r="488">
                                 <a:s>onset</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="489">
                                 <a:s>toInterval()</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="493" locator="168:1-172:39" xsi:type="Query">
            <source localId="467" locator="168:1-168:13" alias="C">
               <expression localId="466" locator="168:1-168:11" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
            </source>
            <where localId="487" locator="169:5-171:48" xsi:type="And">
               <operand localId="481" locator="169:11-170:66" xsi:type="And">
                  <operand localId="472" locator="169:11-169:41" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="469" locator="169:11-169:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="471" locator="169:30-169:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
                  <operand localId="480" locator="170:9-170:66" xsi:type="Exists">
                     <operand localId="479" locator="170:15-170:66" xsi:type="Query">
                        <source localId="474" locator="170:16-170:28" alias="CC">
                           <expression localId="473" locator="170:16-170:25" path="category" scope="C" xsi:type="Property"/>
                        </source>
                        <where localId="478" locator="170:30-170:65" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="475" locator="170:36-170:37" name="CC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="477" locator="170:41-170:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="486" locator="171:9-171:48" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="483" locator="171:9-171:14" path="code" scope="C" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="485" locator="171:18-171:48" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
            <sort localId="492" locator="172:5-172:39">
               <by localId="491" locator="172:13-172:39" direction="asc" xsi:type="ByExpression">
                  <expression localId="490" locator="172:13-172:39" xsi:type="Start">
                     <operand localId="489" locator="172:22-172:39" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="488" locator="172:22-172:26" name="onset" xsi:type="IdentifierRef"/>
                     </operand>
                  </expression>
               </by>
            </sort>
         </expression>
      </def>
      <def localId="497" locator="174:1-175:33" name="First HIV Positive Condition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="497">
               <a:s>define &quot;First HIV Positive Condition&quot;:
  </a:s>
               <a:s r="496">
                  <a:s>First(</a:s>
                  <a:s r="495">
                     <a:s>&quot;HIV Positive Condition&quot;</a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="496" locator="175:3-175:33" xsi:type="First">
            <source localId="495" locator="175:9-175:32" name="HIV Positive Condition" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="519" locator="177:1-181:49" name="HIV Positive Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="519">
               <a:s>define &quot;HIV Positive Observation&quot;:
</a:s>
               <a:s r="518">
                  <a:s>
                     <a:s r="499">
                        <a:s r="498">
                           <a:s r="498">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="517">
                     <a:s>where </a:s>
                     <a:s r="517">
                        <a:s r="511">
                           <a:s r="505">
                              <a:s r="501">
                                 <a:s r="500">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="501">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="504">
                                 <a:s>{</a:s>
                                 <a:s r="502">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="503">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="510">
                              <a:s r="507">
                                 <a:s r="506">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="507">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="509">
                                 <a:s r="508">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="509">
                                    <a:s>&quot;HIV status&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="516">
                           <a:s r="513">
                              <a:s r="512">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="513">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="515">
                              <a:s r="514">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="515">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="518" locator="178:1-181:49" xsi:type="Query">
            <source localId="499" locator="178:1-178:15" alias="O">
               <expression localId="498" locator="178:1-178:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="517" locator="179:5-181:49" xsi:type="And">
               <operand localId="511" locator="179:11-180:32" xsi:type="And">
                  <operand localId="505" locator="179:11-179:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="501" locator="179:11-179:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="504" locator="179:23-179:42" xsi:type="List">
                        <element localId="502" locator="179:24-179:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="503" locator="179:33-179:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="510" locator="180:9-180:32" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="507" locator="180:9-180:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="509" locator="180:18-180:32" name="HIV status" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="516" locator="181:9-181:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="513" locator="181:9-181:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="515" locator="181:19-181:49" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="541" locator="183:1-187:49" name="HIV Positive Observation - HIV Self Test" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="541">
               <a:s>define &quot;HIV Positive Observation - HIV Self Test&quot;:
</a:s>
               <a:s r="540">
                  <a:s>
                     <a:s r="521">
                        <a:s r="520">
                           <a:s r="520">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="539">
                     <a:s>where </a:s>
                     <a:s r="539">
                        <a:s r="533">
                           <a:s r="527">
                              <a:s r="523">
                                 <a:s r="522">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="523">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="526">
                                 <a:s>{</a:s>
                                 <a:s r="524">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="525">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="532">
                              <a:s r="529">
                                 <a:s r="528">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="529">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="531">
                                 <a:s r="530">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="531">
                                    <a:s>&quot;HIV self-test&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="538">
                           <a:s r="535">
                              <a:s r="534">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="535">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="537">
                              <a:s r="536">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="537">
                                 <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="540" locator="184:1-187:49" xsi:type="Query">
            <source localId="521" locator="184:1-184:15" alias="O">
               <expression localId="520" locator="184:1-184:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="539" locator="185:5-187:49" xsi:type="And">
               <operand localId="533" locator="185:11-186:35" xsi:type="And">
                  <operand localId="527" locator="185:11-185:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="523" locator="185:11-185:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="526" locator="185:23-185:42" xsi:type="List">
                        <element localId="524" locator="185:24-185:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="525" locator="185:33-185:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="532" locator="186:9-186:35" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="529" locator="186:9-186:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="531" locator="186:18-186:35" name="HIV self-test" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="538" locator="187:9-187:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="535" locator="187:9-187:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="537" locator="187:19-187:49" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="563" locator="189:1-193:49" name="HIV Negative Observation" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="563">
               <a:s>define &quot;HIV Negative Observation&quot;:
</a:s>
               <a:s r="562">
                  <a:s>
                     <a:s r="543">
                        <a:s r="542">
                           <a:s r="542">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="561">
                     <a:s>where </a:s>
                     <a:s r="561">
                        <a:s r="555">
                           <a:s r="549">
                              <a:s r="545">
                                 <a:s r="544">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="545">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="548">
                                 <a:s>{</a:s>
                                 <a:s r="546">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="547">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="554">
                              <a:s r="551">
                                 <a:s r="550">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="551">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="553">
                                 <a:s r="552">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="553">
                                    <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="560">
                           <a:s r="557">
                              <a:s r="556">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="557">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="559">
                              <a:s r="558">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="559">
                                 <a:s>&quot;HIV-negative - HIV.B.DE117&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="562" locator="190:1-193:49" xsi:type="Query">
            <source localId="543" locator="190:1-190:15" alias="O">
               <expression localId="542" locator="190:1-190:13" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="561" locator="191:5-193:49" xsi:type="And">
               <operand localId="555" locator="191:11-192:64" xsi:type="And">
                  <operand localId="549" locator="191:11-191:42" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="545" locator="191:11-191:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="548" locator="191:23-191:42" xsi:type="List">
                        <element localId="546" locator="191:24-191:30" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="547" locator="191:33-191:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="554" locator="192:9-192:64" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="551" locator="192:9-192:14" path="code" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="553" locator="192:18-192:64" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="560" locator="193:9-193:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="557" locator="193:9-193:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="559" locator="193:19-193:49" name="HIV-negative - HIV.B.DE117" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="579" locator="195:1-198:64" name="HIV test resulted" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="579">
               <a:s>define &quot;HIV test resulted&quot;:
  </a:s>
               <a:s r="578">
                  <a:s>
                     <a:s r="565">
                        <a:s r="564">
                           <a:s r="564">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="577">
                     <a:s>where </a:s>
                     <a:s r="577">
                        <a:s r="571">
                           <a:s r="567">
                              <a:s r="566">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="567">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> in </a:s>
                           <a:s r="570">
                              <a:s>{</a:s>
                              <a:s r="568">
                                 <a:s>'final'</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="569">
                                 <a:s>'amended'</a:s>
                              </a:s>
                              <a:s>}</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="576">
                           <a:s r="573">
                              <a:s r="572">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="573">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="575">
                              <a:s r="574">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="575">
                                 <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="578" locator="196:3-198:64" xsi:type="Query">
            <source localId="565" locator="196:3-196:17" alias="O">
               <expression localId="564" locator="196:3-196:15" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="577" locator="197:5-198:64" xsi:type="And">
               <operand localId="571" locator="197:11-197:42" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="567" locator="197:11-197:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="570" locator="197:23-197:42" xsi:type="List">
                     <element localId="568" locator="197:24-197:30" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="569" locator="197:33-197:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="576" locator="198:9-198:64" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="573" locator="198:9-198:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="575" locator="198:18-198:64" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="596" locator="200:1-203:70" name="HIV PREP Active" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="596">
               <a:s>define &quot;HIV PREP Active&quot;:
</a:s>
               <a:s r="595">
                  <a:s>
                     <a:s r="581">
                        <a:s r="580">
                           <a:s r="580">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="594">
                     <a:s>where </a:s>
                     <a:s r="594">
                        <a:s r="585">
                           <a:s r="583">
                              <a:s r="582">
                                 <a:s>MS</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="583">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="584">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="593">
                           <a:s>exists</a:s>
                           <a:s r="592">
                              <a:s>(</a:s>
                              <a:s r="592">
                                 <a:s>
                                    <a:s r="587">
                                       <a:s r="586">
                                          <a:s>
                                             <a:s>MS.reasonCode</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> C</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="591">
                                    <a:s>where </a:s>
                                    <a:s r="591">
                                       <a:s r="588">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="590">
                                          <a:s r="589">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="590">
                                             <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="595" locator="201:1-203:70" xsi:type="Query">
            <source localId="581" locator="201:1-201:24" alias="MS">
               <expression localId="580" locator="201:1-201:21" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <where localId="594" locator="202:5-203:70" xsi:type="And">
               <operand localId="585" locator="202:11-202:33" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="583" locator="202:11-202:19" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="584" locator="202:23-202:33" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="593" locator="203:9-203:70" xsi:type="Exists">
                  <operand localId="592" locator="203:15-203:70" xsi:type="Query">
                     <source localId="587" locator="203:16-203:30" alias="C">
                        <expression localId="586" locator="203:16-203:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="591" locator="203:32-203:69" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="588" locator="203:38" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="590" locator="203:42-203:69" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="622" locator="205:2-209:72" name="Client is at elevated risk for HIV acquisition" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="622">
               <a:s>define &quot;Client is at elevated risk for HIV acquisition&quot;:
    </a:s>
               <a:s r="621">
                  <a:s>
                     <a:s r="598">
                        <a:s r="597">
                           <a:s r="597">
                              <a:s>[Observation]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="620">
                     <a:s>where </a:s>
                     <a:s r="620">
                        <a:s r="614">
                           <a:s r="605">
                              <a:s r="600">
                                 <a:s r="599">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="600">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="604">
                                 <a:s>{ </a:s>
                                 <a:s r="601">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="602">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="603">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="613">
                              <a:s>exists</a:s>
                              <a:s r="612">
                                 <a:s>(</a:s>
                                 <a:s r="612">
                                    <a:s>
                                       <a:s r="607">
                                          <a:s r="606">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="611">
                                       <a:s>where </a:s>
                                       <a:s r="611">
                                          <a:s r="608">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="610">
                                             <a:s r="609">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="610">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="619">
                           <a:s r="616">
                              <a:s r="615">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="616">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="618">
                              <a:s r="617">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="618">
                                 <a:s>&quot;At elevated risk for HIV acquisition - HIV.B.DE225&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="621" locator="206:5-209:72" xsi:type="Query">
            <source localId="598" locator="206:5-206:19" alias="O">
               <expression localId="597" locator="206:5-206:17" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
            </source>
            <where localId="620" locator="207:5-209:72" xsi:type="And">
               <operand localId="614" locator="207:11-208:61" xsi:type="And">
                  <operand localId="605" locator="207:11-207:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="600" locator="207:11-207:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="604" locator="207:23-207:57" xsi:type="List">
                        <element localId="601" locator="207:25-207:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="602" locator="207:34-207:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="603" locator="207:45-207:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="613" locator="208:9-208:61" xsi:type="Exists">
                     <operand localId="612" locator="208:15-208:61" xsi:type="Query">
                        <source localId="607" locator="208:16-208:28" alias="OC">
                           <expression localId="606" locator="208:16-208:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="611" locator="208:30-208:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="608" locator="208:36-208:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="610" locator="208:41-208:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="619" locator="209:9-209:72" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="616" locator="209:9-209:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="618" locator="209:18-209:72" name="At elevated risk for HIV acquisition - HIV.B.DE225" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="641" locator="211:1-215:56" name="PREP Prescription" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="641">
               <a:s>define &quot;PREP Prescription&quot;:
    </a:s>
               <a:s r="640">
                  <a:s>
                     <a:s r="624">
                        <a:s r="623">
                           <a:s r="623">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="639">
                     <a:s>where </a:s>
                     <a:s r="639">
                        <a:s r="633">
                           <a:s r="628">
                              <a:s r="626">
                                 <a:s r="625">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="626">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="627">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="632">
                              <a:s r="630">
                                 <a:s r="629">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="630">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="631">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="638">
                           <a:s r="635">
                              <a:s r="634">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="635">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="637">
                              <a:s r="636">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="637">
                                 <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="640" locator="212:5-215:56" xsi:type="Query">
            <source localId="624" locator="212:5-212:26" alias="MR">
               <expression localId="623" locator="212:5-212:23" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="639" locator="213:9-215:56" xsi:type="And">
               <operand localId="633" locator="213:15-214:31" xsi:type="And">
                  <operand localId="628" locator="213:15-213:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="626" locator="213:15-213:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="627" locator="213:27-213:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="632" locator="214:13-214:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="630" locator="214:13-214:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="631" locator="214:25-214:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="638" locator="215:13-215:56" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="635" locator="215:13-215:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="637" locator="215:29-215:56" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="660" locator="217:1-221:55" name="PEP Prescription" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="660">
               <a:s>define &quot;PEP Prescription&quot;:
    </a:s>
               <a:s r="659">
                  <a:s>
                     <a:s r="643">
                        <a:s r="642">
                           <a:s r="642">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="658">
                     <a:s>where </a:s>
                     <a:s r="658">
                        <a:s r="652">
                           <a:s r="647">
                              <a:s r="645">
                                 <a:s r="644">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="645">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="646">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="651">
                              <a:s r="649">
                                 <a:s r="648">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="649">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="650">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="657">
                           <a:s r="654">
                              <a:s r="653">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="654">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="656">
                              <a:s r="655">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="656">
                                 <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="659" locator="218:5-221:55" xsi:type="Query">
            <source localId="643" locator="218:5-218:26" alias="MR">
               <expression localId="642" locator="218:5-218:23" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="658" locator="219:9-221:55" xsi:type="And">
               <operand localId="652" locator="219:15-220:31" xsi:type="And">
                  <operand localId="647" locator="219:15-219:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="645" locator="219:15-219:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="646" locator="219:27-219:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="651" locator="220:13-220:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="649" locator="220:13-220:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="650" locator="220:25-220:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="657" locator="221:13-221:55" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="654" locator="221:13-221:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="656" locator="221:29-221:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="706" locator="223:1-232:3" name="PEP Prescribed before start of Measurement Period and Completed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="706">
               <a:s>define &quot;PEP Prescribed before start of Measurement Period and Completed&quot;:
  </a:s>
               <a:s r="705">
                  <a:s>
                     <a:s r="662">
                        <a:s r="661">
                           <a:s r="661">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="691">
                     <a:s>with </a:s>
                     <a:s r="664">
                        <a:s r="663">
                           <a:s r="663">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="690">
                        <a:s r="684">
                           <a:s r="678">
                              <a:s r="673">
                                 <a:s r="668">
                                    <a:s r="666">
                                       <a:s r="665">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="666">
                                          <a:s>basedOn</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="668">
                                       <a:s>references(</a:s>
                                       <a:s r="667">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> and </a:s>
                                 <a:s r="672">
                                    <a:s r="670">
                                       <a:s r="669">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="670">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="671">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="677">
                                 <a:s r="675">
                                    <a:s r="674">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="675">
                                       <a:s>intent</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> = </a:s>
                                 <a:s r="676">
                                    <a:s>'order'</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="683">
                              <a:s r="680">
                                 <a:s r="679">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="680">
                                    <a:s>medication</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="682">
                                 <a:s r="681">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="682">
                                    <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="689">
                           <a:s r="686">
                              <a:s r="685">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="686">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="689"> before </a:s>
                           <a:s r="688">
                              <a:s>end of </a:s>
                              <a:s r="687">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="704">
                     <a:s>where </a:s>
                     <a:s r="704">
                        <a:s>(</a:s>
                        <a:s r="704">
                           <a:s r="695">
                              <a:s r="693">
                                 <a:s r="692">
                                    <a:s>MS</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="693">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="694">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  and </a:s>
                           <a:s r="703">
                              <a:s>exists</a:s>
                              <a:s r="702">
                                 <a:s>(</a:s>
                                 <a:s r="702">
                                    <a:s>
                                       <a:s r="697">
                                          <a:s r="696">
                                             <a:s>
                                                <a:s>MS.reasonCode</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="701">
                                       <a:s>where </a:s>
                                       <a:s r="701">
                                          <a:s r="698">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="700">
                                             <a:s r="699">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="700">
                                                <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="705" locator="224:3-232:3" xsi:type="Query">
            <source localId="662" locator="224:3-224:26" alias="MS">
               <expression localId="661" locator="224:3-224:23" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="691" locator="225:5-229:60" alias="MR" xsi:type="With">
               <expression localId="663" locator="225:10-225:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="690" locator="226:17-229:60" xsi:type="And">
                  <operand localId="684" locator="226:17-228:55" xsi:type="And">
                     <operand localId="678" locator="226:17-227:31" xsi:type="And">
                        <operand localId="673" locator="226:17-226:69" xsi:type="And">
                           <operand localId="668" locator="226:17-226:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                              <operand localId="666" locator="226:17-226:26" path="basedOn" scope="MS" xsi:type="Property"/>
                              <operand localId="667" locator="226:39-226:40" name="MR" xsi:type="AliasRef"/>
                           </operand>
                           <operand localId="672" locator="226:47-226:69" xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="670" locator="226:47-226:55" path="status" scope="MR" xsi:type="Property"/>
                              </operand>
                              <operand localId="671" locator="226:59-226:69" valueType="t:String" value="completed" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="677" locator="227:13-227:31" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="675" locator="227:13-227:21" path="intent" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="676" locator="227:25-227:31" valueType="t:String" value="order" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="683" locator="228:13-228:55" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="680" locator="228:13-228:25" path="medication" scope="MR" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="682" locator="228:29-228:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="689" locator="229:13-229:60" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="686" locator="229:13-229:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="688" locator="229:34-229:60" xsi:type="End">
                           <operand localId="687" locator="229:41-229:60" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="704" locator="230:3-232:3" xsi:type="And">
               <operand localId="695" locator="230:10-230:32" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="693" locator="230:10-230:18" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="694" locator="230:22-230:32" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="703" locator="231:7-231:68" xsi:type="Exists">
                  <operand localId="702" locator="231:13-231:68" xsi:type="Query">
                     <source localId="697" locator="231:14-231:28" alias="C">
                        <expression localId="696" locator="231:14-231:26" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="701" locator="231:30-231:67" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="698" locator="231:36" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="700" locator="231:40-231:67" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="758" locator="234:1-244:3" name="PEP Prescribed during Measurement Period and Completed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="758">
               <a:s>define &quot;PEP Prescribed during Measurement Period and Completed&quot;:
  </a:s>
               <a:s r="757">
                  <a:s>
                     <a:s r="708">
                        <a:s r="707">
                           <a:s r="707">
                              <a:s>[MedicationStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="743">
                     <a:s>with </a:s>
                     <a:s r="710">
                        <a:s r="709">
                           <a:s r="709">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="742">
                        <a:s r="736">
                           <a:s r="730">
                              <a:s r="724">
                                 <a:s r="719">
                                    <a:s r="714">
                                       <a:s r="712">
                                          <a:s r="711">
                                             <a:s>MS</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="712">
                                             <a:s>basedOn</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="714">
                                          <a:s>references(</a:s>
                                          <a:s r="713">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> and </a:s>
                                    <a:s r="718">
                                       <a:s r="716">
                                          <a:s r="715">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="716">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="717">
                                          <a:s>'completed'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="723">
                                    <a:s r="721">
                                       <a:s r="720">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="721">
                                          <a:s>intent</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="722">
                                       <a:s>'order'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="729">
                                 <a:s r="726">
                                    <a:s r="725">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="726">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="728">
                                    <a:s r="727">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="728">
                                       <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="735">
                              <a:s r="732">
                                 <a:s r="731">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="732">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="735"> after </a:s>
                              <a:s r="734">
                                 <a:s>start of </a:s>
                                 <a:s r="733">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="741">
                           <a:s r="738">
                              <a:s r="737">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="738">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="741"> before </a:s>
                           <a:s r="740">
                              <a:s>end of </a:s>
                              <a:s r="739">
                                 <a:s>&quot;Measurement Period&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="756">
                     <a:s>where </a:s>
                     <a:s r="756">
                        <a:s>(</a:s>
                        <a:s r="756">
                           <a:s r="747">
                              <a:s r="745">
                                 <a:s r="744">
                                    <a:s>MS</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="745">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="746">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  and </a:s>
                           <a:s r="755">
                              <a:s>exists</a:s>
                              <a:s r="754">
                                 <a:s>(</a:s>
                                 <a:s r="754">
                                    <a:s>
                                       <a:s r="749">
                                          <a:s r="748">
                                             <a:s>
                                                <a:s>MS.reasonCode</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="753">
                                       <a:s>where </a:s>
                                       <a:s r="753">
                                          <a:s r="750">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="752">
                                             <a:s r="751">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="752">
                                                <a:s>&quot;PrEP for HIV prevention&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="757" locator="235:3-244:3" xsi:type="Query">
            <source localId="708" locator="235:3-235:26" alias="MS">
               <expression localId="707" locator="235:3-235:23" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="743" locator="236:5-241:60" alias="MR" xsi:type="With">
               <expression localId="709" locator="236:10-236:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="742" locator="237:17-241:60" xsi:type="And">
                  <operand localId="736" locator="237:17-240:61" xsi:type="And">
                     <operand localId="730" locator="237:17-239:55" xsi:type="And">
                        <operand localId="724" locator="237:17-238:31" xsi:type="And">
                           <operand localId="719" locator="237:17-237:69" xsi:type="And">
                              <operand localId="714" locator="237:17-237:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="712" locator="237:17-237:26" path="basedOn" scope="MS" xsi:type="Property"/>
                                 <operand localId="713" locator="237:39-237:40" name="MR" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="718" locator="237:47-237:69" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="716" locator="237:47-237:55" path="status" scope="MR" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="717" locator="237:59-237:69" valueType="t:String" value="completed" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="723" locator="238:13-238:31" xsi:type="Equal">
                              <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="721" locator="238:13-238:21" path="intent" scope="MR" xsi:type="Property"/>
                              </operand>
                              <operand localId="722" locator="238:25-238:31" valueType="t:String" value="order" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="729" locator="239:13-239:55" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="726" locator="239:13-239:25" path="medication" scope="MR" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="728" locator="239:29-239:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="735" locator="240:13-240:61" xsi:type="After">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="732" locator="240:13-240:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="734" locator="240:33-240:61" xsi:type="Start">
                              <operand localId="733" locator="240:42-240:61" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="741" locator="241:13-241:60" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="738" locator="241:13-241:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="740" locator="241:34-241:60" xsi:type="End">
                           <operand localId="739" locator="241:41-241:60" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="756" locator="242:3-244:3" xsi:type="And">
               <operand localId="747" locator="242:10-242:32" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="745" locator="242:10-242:18" path="status" scope="MS" xsi:type="Property"/>
                  </operand>
                  <operand localId="746" locator="242:22-242:32" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="755" locator="243:7-243:68" xsi:type="Exists">
                  <operand localId="754" locator="243:13-243:68" xsi:type="Query">
                     <source localId="749" locator="243:14-243:28" alias="C">
                        <expression localId="748" locator="243:14-243:26" path="reasonCode" scope="MS" xsi:type="Property"/>
                     </source>
                     <where localId="753" locator="243:30-243:67" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="750" locator="243:36" name="C" xsi:type="AliasRef"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="752" locator="243:40-243:67" name="PrEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="817" locator="246:1-257:3" name="HIV Test Positive After PEP Prescribed during Measurement Period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="817">
               <a:s>define &quot;HIV Test Positive After PEP Prescribed during Measurement Period&quot;:
  </a:s>
               <a:s r="816">
                  <a:s>
                     <a:s r="760">
                        <a:s r="759">
                           <a:s r="759">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;HIV test result - HIV.B.DE111&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="803">
                     <a:s>with </a:s>
                     <a:s r="762">
                        <a:s r="761">
                           <a:s r="761">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="802">
                        <a:s r="794">
                           <a:s r="788">
                              <a:s r="782">
                                 <a:s r="776">
                                    <a:s r="771">
                                       <a:s r="766">
                                          <a:s r="764">
                                             <a:s r="763">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="764">
                                                <a:s>basedOn</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="766">
                                             <a:s>references(</a:s>
                                             <a:s r="765">
                                                <a:s>MR</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="770">
                                          <a:s r="768">
                                             <a:s r="767">
                                                <a:s>MR</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="768">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="769">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
        and </a:s>
                                    <a:s r="775">
                                       <a:s r="773">
                                          <a:s r="772">
                                             <a:s>MR</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="773">
                                             <a:s>intent</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="774">
                                          <a:s>'order'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="781">
                                    <a:s r="778">
                                       <a:s r="777">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="778">
                                          <a:s>medication</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="780">
                                       <a:s r="779">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="780">
                                          <a:s>&quot;PEP for HIV prevention&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="787">
                                 <a:s r="784">
                                    <a:s r="783">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="784">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="787"> after </a:s>
                                 <a:s r="786">
                                    <a:s>start of </a:s>
                                    <a:s r="785">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="793">
                              <a:s r="790">
                                 <a:s r="789">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="790">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="793"> before </a:s>
                              <a:s r="792">
                                 <a:s>end of </a:s>
                                 <a:s r="791">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="801">
                           <a:s r="796">
                              <a:s r="795">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="796">
                                 <a:s>issued</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="801"> before </a:s>
                           <a:s r="800">
                              <a:s>(</a:s>
                              <a:s r="800">
                                 <a:s r="798">
                                    <a:s r="797">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="798">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> + </a:s>
                                 <a:s r="799">
                                    <a:s>3 months</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="815">
                     <a:s>where </a:s>
                     <a:s r="815">
                        <a:s>( </a:s>
                        <a:s r="815">
                           <a:s r="809">
                              <a:s r="805">
                                 <a:s r="804">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="805">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="808">
                                 <a:s>{</a:s>
                                 <a:s r="806">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="807">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>}</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="814">
                              <a:s r="811">
                                 <a:s r="810">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="811">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> ~ </a:s>
                              <a:s r="813">
                                 <a:s r="812">
                                    <a:s>HC</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="813">
                                    <a:s>&quot;HIV-positive - HIV.B.DE112&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="816" locator="247:3-257:3" xsi:type="Query">
            <source localId="760" locator="247:3-247:53" alias="O">
               <expression localId="759" locator="247:3-247:51" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="247:17-247:50" name="HIV test result - HIV.B.DE111" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <relationship localId="803" locator="248:5-254:54" alias="MR" xsi:type="With">
               <expression localId="761" locator="248:10-248:28" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
               <suchThat localId="802" locator="249:17-254:54" xsi:type="And">
                  <operand localId="794" locator="249:17-253:60" xsi:type="And">
                     <operand localId="788" locator="249:17-252:61" xsi:type="And">
                        <operand localId="782" locator="249:17-251:55" xsi:type="And">
                           <operand localId="776" locator="249:17-250:31" xsi:type="And">
                              <operand localId="771" locator="249:17-249:68" xsi:type="And">
                                 <operand localId="766" locator="249:17-249:40" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="764" locator="249:17-249:25" path="basedOn" scope="O" xsi:type="Property"/>
                                    <operand localId="765" locator="249:38-249:39" name="MR" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="770" locator="249:46-249:68" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="768" locator="249:46-249:54" path="status" scope="MR" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="769" locator="249:58-249:68" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="775" locator="250:13-250:31" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="773" locator="250:13-250:21" path="intent" scope="MR" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="774" locator="250:25-250:31" valueType="t:String" value="order" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="781" locator="251:13-251:55" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="778" locator="251:13-251:25" path="medication" scope="MR" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="780" locator="251:29-251:55" name="PEP for HIV prevention" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="787" locator="252:13-252:61" xsi:type="After">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="784" locator="252:13-252:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="786" locator="252:33-252:61" xsi:type="Start">
                                 <operand localId="785" locator="252:42-252:61" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="793" locator="253:13-253:60" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="790" locator="253:13-253:25" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="792" locator="253:34-253:60" xsi:type="End">
                              <operand localId="791" locator="253:41-253:60" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="801" locator="254:13-254:54" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="796" locator="254:13-254:20" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="800" locator="254:29-254:54" xsi:type="Add">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="798" locator="254:30-254:42" path="authoredOn" scope="MR" xsi:type="Property"/>
                        </operand>
                        <operand localId="799" locator="254:46-254:53" value="3" unit="months" xsi:type="Quantity"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="815" locator="255:3-257:3" xsi:type="And">
               <operand localId="809" locator="255:11-255:42" xsi:type="In">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="805" locator="255:11-255:18" path="status" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand localId="808" locator="255:23-255:42" xsi:type="List">
                     <element localId="806" locator="255:24-255:30" valueType="t:String" value="final" xsi:type="Literal"/>
                     <element localId="807" locator="255:33-255:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="814" locator="256:9-256:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="811" locator="256:9-256:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="813" locator="256:19-256:49" name="HIV-positive - HIV.B.DE112" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="855" locator="259:1-266:32" name="Needle Syringe Dispensed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="855">
               <a:s>define &quot;Needle Syringe Dispensed&quot;:  
  </a:s>
               <a:s r="854">
                  <a:s>
                     <a:s r="819">
                        <a:s r="818">
                           <a:s r="818">
                              <a:s>[DeviceUseStatement]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> DUS</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="849">
                     <a:s>with </a:s>
                     <a:s r="821">
                        <a:s r="820">
                           <a:s r="820">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="848">
                        <a:s r="842">
                           <a:s r="833">
                              <a:s r="825">
                                 <a:s r="823">
                                    <a:s r="822">
                                       <a:s>DUS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="823">
                                       <a:s>reasonReference</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="825">
                                    <a:s>references(</a:s>
                                    <a:s r="824">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> 
        and </a:s>
                              <a:s r="832">
                                 <a:s r="827">
                                    <a:s r="826">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="827">
                                       <a:s>status</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> in </a:s>
                                 <a:s r="831">
                                    <a:s>{ </a:s>
                                    <a:s r="828">
                                       <a:s>'final'</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="829">
                                       <a:s>'amended'</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="830">
                                       <a:s>'corrected'</a:s>
                                    </a:s>
                                    <a:s> }</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="841">
                              <a:s>exists</a:s>
                              <a:s r="840">
                                 <a:s>(</a:s>
                                 <a:s r="840">
                                    <a:s>
                                       <a:s r="835">
                                          <a:s r="834">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="839">
                                       <a:s>where </a:s>
                                       <a:s r="839">
                                          <a:s r="836">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="838">
                                             <a:s r="837">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="838">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="847">
                           <a:s r="844">
                              <a:s r="843">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="844">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="846">
                              <a:s r="845">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="846">
                                 <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="853">
                     <a:s>where </a:s>
                     <a:s r="853">
                        <a:s r="851">
                           <a:s r="850">
                              <a:s>DUS</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="851">
                              <a:s>status</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="852">
                           <a:s>'completed'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="854" locator="260:3-266:32" xsi:type="Query">
            <source localId="819" locator="260:3-260:26" alias="DUS">
               <expression localId="818" locator="260:3-260:22" dataType="fhir:DeviceUseStatement" templateId="http://hl7.org/fhir/StructureDefinition/DeviceUseStatement" xsi:type="Retrieve"/>
            </source>
            <relationship localId="849" locator="261:3-265:63" alias="O" xsi:type="With">
               <expression localId="820" locator="261:8-261:62" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="261:22-261:61" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
               <suchThat localId="848" locator="262:17-265:63" xsi:type="And">
                  <operand localId="842" locator="262:17-264:65" xsi:type="And">
                     <operand localId="833" locator="262:17-263:59" xsi:type="And">
                        <operand localId="825" locator="262:17-262:49" name="references" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="823" locator="262:17-262:35" path="reasonReference" scope="DUS" xsi:type="Property"/>
                           <operand localId="824" locator="262:48" name="O" xsi:type="AliasRef"/>
                        </operand>
                        <operand localId="832" locator="263:13-263:59" xsi:type="In">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="827" locator="263:13-263:20" path="status" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand localId="831" locator="263:25-263:59" xsi:type="List">
                              <element localId="828" locator="263:27-263:33" valueType="t:String" value="final" xsi:type="Literal"/>
                              <element localId="829" locator="263:36-263:44" valueType="t:String" value="amended" xsi:type="Literal"/>
                              <element localId="830" locator="263:47-263:57" valueType="t:String" value="corrected" xsi:type="Literal"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="841" locator="264:13-264:65" xsi:type="Exists">
                        <operand localId="840" locator="264:19-264:65" xsi:type="Query">
                           <source localId="835" locator="264:20-264:32" alias="OC">
                              <expression localId="834" locator="264:20-264:29" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="839" locator="264:34-264:64" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="836" locator="264:40-264:41" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="838" locator="264:45-264:64" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="847" locator="265:13-265:63" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="844" locator="265:13-265:19" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="846" locator="265:23-265:63" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="853" locator="266:3-266:32" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="851" locator="266:9-266:18" path="status" scope="DUS" xsi:type="Property"/>
               </operand>
               <operand localId="852" locator="266:22-266:32" valueType="t:String" value="completed" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="881" locator="268:1-272:59" name="PWID_person" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="881">
               <a:s>define PWID_person:
  </a:s>
               <a:s r="880">
                  <a:s>
                     <a:s r="857">
                        <a:s r="856">
                           <a:s r="856">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="879">
                     <a:s>where </a:s>
                     <a:s r="879">
                        <a:s r="873">
                           <a:s r="864">
                              <a:s r="859">
                                 <a:s r="858">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="859">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="863">
                                 <a:s>{ </a:s>
                                 <a:s r="860">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="861">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="862">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="872">
                              <a:s>exists</a:s>
                              <a:s r="871">
                                 <a:s>(</a:s>
                                 <a:s r="871">
                                    <a:s>
                                       <a:s r="866">
                                          <a:s r="865">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="870">
                                       <a:s>where </a:s>
                                       <a:s r="870">
                                          <a:s r="867">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="869">
                                             <a:s r="868">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="869">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="878">
                           <a:s r="875">
                              <a:s r="874">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="875">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="877">
                              <a:s r="876">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="877">
                                 <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="880" locator="269:3-272:59" xsi:type="Query">
            <source localId="857" locator="269:3-269:59" alias="O">
               <expression localId="856" locator="269:3-269:57" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="269:17-269:56" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="879" locator="270:3-272:59" xsi:type="And">
               <operand localId="873" locator="270:9-271:61" xsi:type="And">
                  <operand localId="864" locator="270:9-270:55" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="859" locator="270:9-270:16" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="863" locator="270:21-270:55" xsi:type="List">
                        <element localId="860" locator="270:23-270:29" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="861" locator="270:32-270:40" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="862" locator="270:43-270:53" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="872" locator="271:9-271:61" xsi:type="Exists">
                     <operand localId="871" locator="271:15-271:61" xsi:type="Query">
                        <source localId="866" locator="271:16-271:28" alias="OC">
                           <expression localId="865" locator="271:16-271:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="870" locator="271:30-271:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="867" locator="271:36-271:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="869" locator="271:41-271:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="878" locator="272:9-272:59" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="875" locator="272:9-272:15" path="value" scope="O" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="877" locator="272:19-272:59" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="922" locator="274:1-288:5" name="OAMT_initiated" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="922">
               <a:s>define &quot;OAMT_initiated&quot;:
</a:s>
               <a:s r="921">
                  <a:s>exists</a:s>
                  <a:s r="920">
                     <a:s>(
    </a:s>
                     <a:s r="920">
                        <a:s>
                           <a:s r="883">
                              <a:s r="882">
                                 <a:s r="882">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="919">
                           <a:s>where </a:s>
                           <a:s r="919">
                              <a:s r="891">
                                 <a:s>exists</a:s>
                                 <a:s r="890">
                                    <a:s>(</a:s>
                                    <a:s r="890">
                                       <a:s>
                                          <a:s r="885">
                                             <a:s r="884">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="889">
                                          <a:s>where </a:s>
                                          <a:s r="889">
                                             <a:s r="886">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="888">
                                                <a:s r="887">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="888">
                                                   <a:s>&quot;OAMT&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="918">
                                 <a:s>(</a:s>
                                 <a:s r="918">
                                    <a:s r="906">
                                       <a:s>exists </a:s>
                                       <a:s r="905">
                                          <a:s>(
      </a:s>
                                          <a:s r="905">
                                             <a:s>
                                                <a:s r="893">
                                                   <a:s r="892">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="904">
                                                <a:s>where </a:s>
                                                <a:s r="904">
                                                   <a:s r="898">
                                                      <a:s r="895">
                                                         <a:s r="894">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="895">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="898"> starts after </a:s>
                                                      <a:s r="897">
                                                         <a:s>start of </a:s>
                                                         <a:s r="896">
                                                            <a:s>&quot;Measurement Period&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
      and </a:s>
                                                   <a:s r="903">
                                                      <a:s r="900">
                                                         <a:s r="899">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="900">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="903"> starts before </a:s>
                                                      <a:s r="902">
                                                         <a:s>end of </a:s>
                                                         <a:s r="901">
                                                            <a:s>&quot;Measurement Period&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="917">
                                       <a:s>(
      </a:s>
                                       <a:s r="917">
                                          <a:s r="911">
                                             <a:s r="908">
                                                <a:s r="907">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="908">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="911"> starts after </a:s>
                                             <a:s r="910">
                                                <a:s>start of </a:s>
                                                <a:s r="909">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
      and </a:s>
                                          <a:s r="916">
                                             <a:s r="913">
                                                <a:s r="912">
                                                   <a:s>EOC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="913">
                                                   <a:s>period</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s r="916"> starts before </a:s>
                                             <a:s r="915">
                                                <a:s>end of </a:s>
                                                <a:s r="914">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="921" locator="275:1-288:5" xsi:type="Exists">
            <operand localId="920" locator="275:7-288:5" xsi:type="Query">
               <source localId="883" locator="276:5-276:23" alias="EOC">
                  <expression localId="882" locator="276:5-276:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="919" locator="277:5-287:5" xsi:type="And">
                  <operand localId="891" locator="277:11-277:48" xsi:type="Exists">
                     <operand localId="890" locator="277:17-277:48" xsi:type="Query">
                        <source localId="885" locator="277:18-277:27" alias="T">
                           <expression localId="884" locator="277:18-277:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="889" locator="277:29-277:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="886" locator="277:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="888" locator="277:39-277:47" name="OAMT" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="918" locator="278:9-287:5" xsi:type="Or">
                     <operand localId="906" locator="278:10-282:5" xsi:type="Exists">
                        <operand localId="905" locator="278:17-282:5" xsi:type="Query">
                           <source localId="893" locator="279:7-279:25" alias="H">
                              <expression localId="892" locator="279:7-279:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="904" locator="280:7-281:60" xsi:type="And">
                              <operand localId="898" locator="280:13-280:63" xsi:type="After">
                                 <operand locator="280:22-280:27" xsi:type="Start">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="895" locator="280:13-280:20" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="897" locator="280:35-280:63" xsi:type="Start">
                                       <operand localId="896" locator="280:44-280:63" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="903" locator="281:11-281:60" xsi:type="Before">
                                 <operand locator="281:20-281:25" xsi:type="Start">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="900" locator="281:11-281:18" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="902" locator="281:34-281:60" xsi:type="End">
                                       <operand localId="901" locator="281:41-281:60" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="917" locator="283:8-286:5" xsi:type="And">
                        <operand localId="911" locator="284:7-284:59" xsi:type="After">
                           <operand locator="284:18-284:23" xsi:type="Start">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="908" locator="284:7-284:16" path="period" scope="EOC" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="910" locator="284:31-284:59" xsi:type="Start">
                                 <operand localId="909" locator="284:40-284:59" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="916" locator="285:11-285:62" xsi:type="Before">
                           <operand locator="285:22-285:27" xsi:type="Start">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="913" locator="285:11-285:20" path="period" scope="EOC" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="915" locator="285:36-285:62" xsi:type="End">
                                 <operand localId="914" locator="285:43-285:62" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="984" locator="290:1-307:5" name="OAMT_retained" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="984">
               <a:s>define &quot;OAMT_retained&quot;:
</a:s>
               <a:s r="983">
                  <a:s>exists</a:s>
                  <a:s r="982">
                     <a:s>(
    </a:s>
                     <a:s r="982">
                        <a:s>
                           <a:s r="924">
                              <a:s r="923">
                                 <a:s r="923">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="981">
                           <a:s>where </a:s>
                           <a:s r="981">
                              <a:s r="932">
                                 <a:s>exists</a:s>
                                 <a:s r="931">
                                    <a:s>(</a:s>
                                    <a:s r="931">
                                       <a:s>
                                          <a:s r="926">
                                             <a:s r="925">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="930">
                                          <a:s>where </a:s>
                                          <a:s r="930">
                                             <a:s r="927">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="929">
                                                <a:s r="928">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="929">
                                                   <a:s>&quot;OAMT&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="980">
                                 <a:s>(</a:s>
                                 <a:s r="980">
                                    <a:s r="955">
                                       <a:s>exists </a:s>
                                       <a:s r="954">
                                          <a:s>(
      </a:s>
                                          <a:s r="954">
                                             <a:s>
                                                <a:s r="934">
                                                   <a:s r="933">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="953">
                                                <a:s>where </a:s>
                                                <a:s r="953">
                                                   <a:s r="945">
                                                      <a:s r="939">
                                                         <a:s r="936">
                                                            <a:s r="935">
                                                               <a:s>H</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="936">
                                                               <a:s>period</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="939"> starts after </a:s>
                                                         <a:s r="938">
                                                            <a:s>start of </a:s>
                                                            <a:s r="937">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>
      and </a:s>
                                                      <a:s r="944">
                                                         <a:s r="941">
                                                            <a:s r="940">
                                                               <a:s>H</a:s>
                                                            </a:s>
                                                            <a:s>.</a:s>
                                                            <a:s r="941">
                                                               <a:s>period</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s r="944"> starts before </a:s>
                                                         <a:s r="943">
                                                            <a:s>end of </a:s>
                                                            <a:s r="942">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>
      and </a:s>
                                                   <a:s r="952">
                                                      <a:s r="947">
                                                         <a:s r="946">
                                                            <a:s>H</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="947">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s r="952"> ends after </a:s>
                                                      <a:s r="951">
                                                         <a:s>(</a:s>
                                                         <a:s r="951">
                                                            <a:s r="949">
                                                               <a:s>end of </a:s>
                                                               <a:s r="948">
                                                                  <a:s>&quot;Measurement Period&quot;</a:s>
                                                               </a:s>
                                                            </a:s>
                                                            <a:s> + </a:s>
                                                            <a:s r="950">
                                                               <a:s>6 months</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s>)</a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="979">
                                       <a:s>(
      </a:s>
                                       <a:s r="979">
                                          <a:s r="966">
                                             <a:s r="960">
                                                <a:s r="957">
                                                   <a:s r="956">
                                                      <a:s>EOC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="957">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s r="960"> starts after </a:s>
                                                <a:s r="959">
                                                   <a:s>start of </a:s>
                                                   <a:s r="958">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      and </a:s>
                                             <a:s r="965">
                                                <a:s r="962">
                                                   <a:s r="961">
                                                      <a:s>EOC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="962">
                                                      <a:s>period</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s r="965"> starts before </a:s>
                                                <a:s r="964">
                                                   <a:s>end of </a:s>
                                                   <a:s r="963">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
      and </a:s>
                                          <a:s r="978">
                                             <a:s>(</a:s>
                                             <a:s r="978">
                                                <a:s r="973">
                                                   <a:s r="968">
                                                      <a:s r="967">
                                                         <a:s>EOC</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="968">
                                                         <a:s>period</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s r="973"> ends after </a:s>
                                                   <a:s r="972">
                                                      <a:s>(</a:s>
                                                      <a:s r="972">
                                                         <a:s r="970">
                                                            <a:s>end of </a:s>
                                                            <a:s r="969">
                                                               <a:s>&quot;Measurement Period&quot;</a:s>
                                                            </a:s>
                                                         </a:s>
                                                         <a:s> + </a:s>
                                                         <a:s r="971">
                                                            <a:s>6 months</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s>)</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s>
      or </a:s>
                                                <a:s r="977">
                                                   <a:s r="976">
                                                      <a:s>end of </a:s>
                                                      <a:s r="975">
                                                         <a:s r="974">
                                                            <a:s>EOC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="975">
                                                            <a:s>period</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> is null</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="983" locator="291:1-307:5" xsi:type="Exists">
            <operand localId="982" locator="291:7-307:5" xsi:type="Query">
               <source localId="924" locator="292:5-292:23" alias="EOC">
                  <expression localId="923" locator="292:5-292:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="981" locator="293:5-306:5" xsi:type="And">
                  <operand localId="932" locator="293:11-293:48" xsi:type="Exists">
                     <operand localId="931" locator="293:17-293:48" xsi:type="Query">
                        <source localId="926" locator="293:18-293:27" alias="T">
                           <expression localId="925" locator="293:18-293:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="930" locator="293:29-293:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="927" locator="293:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="929" locator="293:39-293:47" name="OAMT" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="980" locator="294:9-306:5" xsi:type="Or">
                     <operand localId="955" locator="294:10-299:5" xsi:type="Exists">
                        <operand localId="954" locator="294:17-299:5" xsi:type="Query">
                           <source localId="934" locator="295:7-295:25" alias="H">
                              <expression localId="933" locator="295:7-295:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="953" locator="296:7-298:70" xsi:type="And">
                              <operand localId="945" locator="296:13-297:60" xsi:type="And">
                                 <operand localId="939" locator="296:13-296:63" xsi:type="After">
                                    <operand locator="296:22-296:27" xsi:type="Start">
                                       <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="936" locator="296:13-296:20" path="period" scope="H" xsi:type="Property"/>
                                       </operand>
                                    </operand>
                                    <operand xsi:type="ToDateTime">
                                       <operand localId="938" locator="296:35-296:63" xsi:type="Start">
                                          <operand localId="937" locator="296:44-296:63" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </operand>
                                 </operand>
                                 <operand localId="944" locator="297:11-297:60" xsi:type="Before">
                                    <operand locator="297:20-297:25" xsi:type="Start">
                                       <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                          <operand localId="941" locator="297:11-297:18" path="period" scope="H" xsi:type="Property"/>
                                       </operand>
                                    </operand>
                                    <operand xsi:type="ToDateTime">
                                       <operand localId="943" locator="297:34-297:60" xsi:type="End">
                                          <operand localId="942" locator="297:41-297:60" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                    </operand>
                                 </operand>
                              </operand>
                              <operand localId="952" locator="298:11-298:70" xsi:type="After">
                                 <operand locator="298:20-298:23" xsi:type="End">
                                    <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="947" locator="298:11-298:18" path="period" scope="H" xsi:type="Property"/>
                                    </operand>
                                 </operand>
                                 <operand xsi:type="ToDateTime">
                                    <operand localId="951" locator="298:31-298:70" xsi:type="Add">
                                       <operand localId="949" locator="298:32-298:58" xsi:type="End">
                                          <operand localId="948" locator="298:39-298:58" name="Measurement Period" xsi:type="ParameterRef"/>
                                       </operand>
                                       <operand localId="950" locator="298:62-298:69" value="6" unit="months" xsi:type="Quantity"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="979" locator="300:8-305:5" xsi:type="And">
                        <operand localId="966" locator="301:7-302:62" xsi:type="And">
                           <operand localId="960" locator="301:7-301:59" xsi:type="After">
                              <operand locator="301:18-301:23" xsi:type="Start">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="957" locator="301:7-301:16" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="959" locator="301:31-301:59" xsi:type="Start">
                                    <operand localId="958" locator="301:40-301:59" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="965" locator="302:11-302:62" xsi:type="Before">
                              <operand locator="302:22-302:27" xsi:type="Start">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="962" locator="302:11-302:20" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="964" locator="302:36-302:62" xsi:type="End">
                                    <operand localId="963" locator="302:43-302:62" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="978" locator="303:11-304:35" xsi:type="Or">
                           <operand localId="973" locator="303:12-303:73" xsi:type="After">
                              <operand locator="303:23-303:26" xsi:type="End">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="968" locator="303:12-303:21" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="972" locator="303:34-303:73" xsi:type="Add">
                                    <operand localId="970" locator="303:35-303:61" xsi:type="End">
                                       <operand localId="969" locator="303:42-303:61" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                    <operand localId="971" locator="303:65-303:72" value="6" unit="months" xsi:type="Quantity"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="977" locator="304:10-304:34" xsi:type="IsNull">
                              <operand localId="976" locator="304:10-304:26" xsi:type="End">
                                 <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="975" locator="304:17-304:26" path="period" scope="EOC" xsi:type="Property"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1003" locator="309:1-313:43" name="methadone_prescribed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1003">
               <a:s>define &quot;methadone_prescribed&quot;:
</a:s>
               <a:s r="1002">
                  <a:s>
                     <a:s r="986">
                        <a:s r="985">
                           <a:s r="985">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="1001">
                     <a:s>where </a:s>
                     <a:s r="1001">
                        <a:s r="995">
                           <a:s r="990">
                              <a:s r="988">
                                 <a:s r="987">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="988">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="989">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="994">
                              <a:s r="992">
                                 <a:s r="991">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="992">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="993">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="1000">
                           <a:s r="997">
                              <a:s r="996">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="997">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="999">
                              <a:s r="998">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="999">
                                 <a:s>&quot;methadone&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1002" locator="310:1-313:43" xsi:type="Query">
            <source localId="986" locator="310:1-310:22" alias="MR">
               <expression localId="985" locator="310:1-310:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="1001" locator="311:9-313:43" xsi:type="And">
               <operand localId="995" locator="311:15-312:31" xsi:type="And">
                  <operand localId="990" locator="311:15-311:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="988" locator="311:15-311:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="989" locator="311:27-311:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="994" locator="312:13-312:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="992" locator="312:13-312:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="993" locator="312:25-312:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="1000" locator="313:13-313:43" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="997" locator="313:13-313:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="999" locator="313:29-313:43" name="methadone" libraryName="HCC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="1022" locator="315:1-319:47" name="buprenorphine_prescribed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1022">
               <a:s>define &quot;buprenorphine_prescribed&quot;:
</a:s>
               <a:s r="1021">
                  <a:s>
                     <a:s r="1005">
                        <a:s r="1004">
                           <a:s r="1004">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="1020">
                     <a:s>where </a:s>
                     <a:s r="1020">
                        <a:s r="1014">
                           <a:s r="1009">
                              <a:s r="1007">
                                 <a:s r="1006">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1007">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1008">
                                 <a:s>'completed'</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        and </a:s>
                           <a:s r="1013">
                              <a:s r="1011">
                                 <a:s r="1010">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1011">
                                    <a:s>intent</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="1012">
                                 <a:s>'order'</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="1019">
                           <a:s r="1016">
                              <a:s r="1015">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1016">
                                 <a:s>medication</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="1018">
                              <a:s r="1017">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1018">
                                 <a:s>&quot;buprenorphine&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1021" locator="316:1-319:47" xsi:type="Query">
            <source localId="1005" locator="316:1-316:22" alias="MR">
               <expression localId="1004" locator="316:1-316:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="1020" locator="317:9-319:47" xsi:type="And">
               <operand localId="1014" locator="317:15-318:31" xsi:type="And">
                  <operand localId="1009" locator="317:15-317:37" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1007" locator="317:15-317:23" path="status" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="1008" locator="317:27-317:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1013" locator="318:13-318:31" xsi:type="Equal">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1011" locator="318:13-318:21" path="intent" scope="MR" xsi:type="Property"/>
                     </operand>
                     <operand localId="1012" locator="318:25-318:31" valueType="t:String" value="order" xsi:type="Literal"/>
                  </operand>
               </operand>
               <operand localId="1019" locator="319:13-319:47" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand asType="fhir:CodeableConcept" xsi:type="As">
                        <operand localId="1016" locator="319:13-319:25" path="medication" scope="MR" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="1018" locator="319:29-319:47" name="buprenorphine" libraryName="HCC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="1047" locator="325:1-330:4" name="Lost to Follow Up during the measurement period" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1047">
               <a:s>define &quot;Lost to Follow Up during the measurement period&quot;:
    </a:s>
               <a:s r="1046">
                  <a:s>exists</a:s>
                  <a:s r="1045">
                     <a:s>(</a:s>
                     <a:s r="1045">
                        <a:s>
                           <a:s r="1024">
                              <a:s r="1023">
                                 <a:s>
                                    <a:s>HE.&quot;On ART H.DE47&quot;</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> H</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
   </a:s>
                        <a:s r="1044">
                           <a:s>where </a:s>
                           <a:s r="1044">
                              <a:s r="1035">
                                 <a:s r="1029">
                                    <a:s r="1026">
                                       <a:s r="1025">
                                          <a:s>H</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1026">
                                          <a:s>effective</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1029"> starts before </a:s>
                                    <a:s r="1028">
                                       <a:s>end of </a:s>
                                       <a:s r="1027">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1034">
                                    <a:s r="1031">
                                       <a:s r="1030">
                                          <a:s>H</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1031">
                                          <a:s>effective</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1034"> ends after </a:s>
                                    <a:s r="1033">
                                       <a:s>start of </a:s>
                                       <a:s r="1032">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
	and </a:s>
                              <a:s r="1043">
                                 <a:s>not </a:s>
                                 <a:s r="1042">
                                    <a:s>(</a:s>
                                    <a:s r="1042">
                                       <a:s r="1037">
                                          <a:s r="1036">
                                             <a:s>H</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1037">
                                             <a:s>effective</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="1042"> ends after </a:s>
                                       <a:s r="1041">
                                          <a:s>(</a:s>
                                          <a:s r="1041">
                                             <a:s r="1039">
                                                <a:s>end of </a:s>
                                                <a:s r="1038">
                                                   <a:s>&quot;Measurement Period&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> - </a:s>
                                             <a:s r="1040">
                                                <a:s>28 days</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
   )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1046" locator="326:5-330:4" xsi:type="Exists">
            <operand localId="1045" locator="326:11-330:4" xsi:type="Query">
               <source localId="1024" locator="326:12-326:31" alias="H">
                  <expression localId="1023" locator="326:12-326:29" name="On ART H.DE47" libraryName="HE" xsi:type="ExpressionRef"/>
               </source>
               <where localId="1044" locator="327:4-329:73" xsi:type="And">
                  <operand localId="1035" locator="327:10-328:60" xsi:type="And">
                     <operand localId="1029" locator="327:10-327:62" xsi:type="Before">
                        <operand locator="327:22-327:27" xsi:type="Start">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="1026" locator="327:10-327:20" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1028" locator="327:36-327:62" xsi:type="End">
                              <operand localId="1027" locator="327:43-327:62" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1034" locator="328:9-328:60" xsi:type="After">
                        <operand locator="328:21-328:24" xsi:type="End">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="1031" locator="328:9-328:19" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1033" locator="328:32-328:60" xsi:type="Start">
                              <operand localId="1032" locator="328:41-328:60" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1043" locator="329:6-329:73" xsi:type="Not">
                     <operand localId="1042" locator="329:10-329:73" xsi:type="After">
                        <operand locator="329:23-329:26" xsi:type="End">
                           <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:Period" xsi:type="As">
                                 <operand localId="1037" locator="329:11-329:21" path="effective" scope="H" xsi:type="Property"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1041" locator="329:34-329:72" xsi:type="Subtract">
                              <operand localId="1039" locator="329:35-329:61" xsi:type="End">
                                 <operand localId="1038" locator="329:42-329:61" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                              <operand localId="1040" locator="329:65-329:71" value="28" unit="days" xsi:type="Quantity"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1086" locator="332:1-337:7" name="HIV Status" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1086">
               <a:s>define &quot;HIV Status&quot;:
    </a:s>
               <a:s r="1085">
                  <a:s>case 
        </a:s>
                  <a:s r="1059">
                     <a:s>when </a:s>
                     <a:s r="1056">
                        <a:s>exists</a:s>
                        <a:s r="1055">
                           <a:s>(</a:s>
                           <a:s r="1055">
                              <a:s>
                                 <a:s r="1049">
                                    <a:s r="1048">
                                       <a:s>
                                          <a:s>&quot;HIV Positive Condition&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> C</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="1054">
                                 <a:s>where </a:s>
                                 <a:s r="1054">
                                    <a:s r="1051">
                                       <a:s r="1050">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1051">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1054"> before </a:s>
                                    <a:s r="1053">
                                       <a:s>end of </a:s>
                                       <a:s r="1052">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1058">
                        <a:s r="1057">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1058">
                           <a:s>&quot;HIV-positive - HIV.B.DE116&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="1082">
                     <a:s>when </a:s>
                     <a:s r="1079">
                        <a:s r="1069">
                           <a:s>not </a:s>
                           <a:s r="1068">
                              <a:s>exists</a:s>
                              <a:s r="1067">
                                 <a:s>(</a:s>
                                 <a:s r="1067">
                                    <a:s>
                                       <a:s r="1061">
                                          <a:s r="1060">
                                             <a:s>
                                                <a:s>&quot;HIV Positive Condition&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="1066">
                                       <a:s>where </a:s>
                                       <a:s r="1066">
                                          <a:s r="1063">
                                             <a:s r="1062">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1063">
                                                <a:s>onset</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="1066"> before </a:s>
                                          <a:s r="1065">
                                             <a:s>end of </a:s>
                                             <a:s r="1064">
                                                <a:s>&quot;Measurement Period&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> and </a:s>
                        <a:s r="1078">
                           <a:s>exists</a:s>
                           <a:s r="1077">
                              <a:s>(</a:s>
                              <a:s r="1077">
                                 <a:s>
                                    <a:s r="1071">
                                       <a:s r="1070">
                                          <a:s>
                                             <a:s>&quot;HIV Negative Observation&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> O</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> </a:s>
                                 <a:s r="1076">
                                    <a:s>where </a:s>
                                    <a:s r="1076">
                                       <a:s r="1073">
                                          <a:s r="1072">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1073">
                                             <a:s>issued</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="1076"> before </a:s>
                                       <a:s r="1075">
                                          <a:s>end of </a:s>
                                          <a:s r="1074">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="1081">
                        <a:s r="1080">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1081">
                           <a:s>&quot;HIV-negative - HIV.B.DE117&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        else </a:s>
                  <a:s r="1084">
                     <a:s r="1083">
                        <a:s>HC</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="1084">
                        <a:s>&quot;Unknown - HIV.B.DE118&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1085" locator="333:5-337:7" xsi:type="Case">
            <caseItem localId="1059" locator="334:9-334:133">
               <when localId="1056" locator="334:14-334:96" xsi:type="Exists">
                  <operand localId="1055" locator="334:20-334:96" xsi:type="Query">
                     <source localId="1049" locator="334:21-334:46" alias="C">
                        <expression localId="1048" locator="334:21-334:44" name="HIV Positive Condition" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="1054" locator="334:48-334:95" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:dateTime" xsi:type="As">
                              <operand localId="1051" locator="334:54-334:60" path="onset" scope="C" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1053" locator="334:69-334:95" xsi:type="End">
                              <operand localId="1052" locator="334:76-334:95" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="1058" locator="334:103-334:133" name="HIV-positive - HIV.B.DE116" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="1082" locator="335:9-335:229">
               <when localId="1079" locator="335:14-335:191" xsi:type="And">
                  <operand localId="1069" locator="335:14-335:100" xsi:type="Not">
                     <operand localId="1068" locator="335:18-335:100" xsi:type="Exists">
                        <operand localId="1067" locator="335:24-335:100" xsi:type="Query">
                           <source localId="1061" locator="335:25-335:50" alias="C">
                              <expression localId="1060" locator="335:25-335:48" name="HIV Positive Condition" xsi:type="ExpressionRef"/>
                           </source>
                           <where localId="1066" locator="335:52-335:99" xsi:type="Before">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="1063" locator="335:58-335:64" path="onset" scope="C" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="1065" locator="335:73-335:99" xsi:type="End">
                                    <operand localId="1064" locator="335:80-335:99" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1078" locator="335:106-335:191" xsi:type="Exists">
                     <operand localId="1077" locator="335:112-335:191" xsi:type="Query">
                        <source localId="1071" locator="335:113-335:140" alias="O">
                           <expression localId="1070" locator="335:113-335:138" name="HIV Negative Observation" xsi:type="ExpressionRef"/>
                        </source>
                        <where localId="1076" locator="335:142-335:190" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1073" locator="335:148-335:155" path="issued" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="1075" locator="335:164-335:190" xsi:type="End">
                                 <operand localId="1074" locator="335:171-335:190" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </when>
               <then localId="1081" locator="335:199-335:229" name="HIV-negative - HIV.B.DE117" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else localId="1084" locator="336:14-336:39" name="Unknown - HIV.B.DE118" libraryName="HC" xsi:type="CodeRef"/>
         </expression>
      </def>
      <def localId="1113" locator="343:2-349:3" name="SW" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1113">
               <a:s>/*
 * Key populations (men who have sex with men, people living in prisons and other closed settings, people who inject drugs, sex workers, trans and gender diverse people)
 */

 define SW:
  </a:s>
               <a:s r="1112">
                  <a:s>exists </a:s>
                  <a:s r="1111">
                     <a:s>(
    </a:s>
                     <a:s r="1111">
                        <a:s>
                           <a:s r="1088">
                              <a:s r="1087">
                                 <a:s r="1087">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1110">
                           <a:s>where </a:s>
                           <a:s r="1110">
                              <a:s r="1104">
                                 <a:s r="1095">
                                    <a:s r="1090">
                                       <a:s r="1089">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1090">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1094">
                                       <a:s>{ </a:s>
                                       <a:s r="1091">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1092">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1093">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1103">
                                    <a:s>exists</a:s>
                                    <a:s r="1102">
                                       <a:s>(</a:s>
                                       <a:s r="1102">
                                          <a:s>
                                             <a:s r="1097">
                                                <a:s r="1096">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1101">
                                             <a:s>where </a:s>
                                             <a:s r="1101">
                                                <a:s r="1098">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1100">
                                                   <a:s r="1099">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1100">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1109">
                                 <a:s r="1106">
                                    <a:s r="1105">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1106">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1108">
                                    <a:s r="1107">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1108">
                                       <a:s>&quot;Sex worker - HIV.B.DE51&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1112" locator="344:3-349:3" xsi:type="Exists">
            <operand localId="1111" locator="344:10-349:3" xsi:type="Query">
               <source localId="1088" locator="345:5-345:61" alias="O">
                  <expression localId="1087" locator="345:5-345:59" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="345:19-345:58" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1110" locator="346:5-348:46" xsi:type="And">
                  <operand localId="1104" locator="346:11-347:61" xsi:type="And">
                     <operand localId="1095" locator="346:11-346:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1090" locator="346:11-346:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1094" locator="346:23-346:57" xsi:type="List">
                           <element localId="1091" locator="346:25-346:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1092" locator="346:34-346:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1093" locator="346:45-346:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1103" locator="347:9-347:61" xsi:type="Exists">
                        <operand localId="1102" locator="347:15-347:61" xsi:type="Query">
                           <source localId="1097" locator="347:16-347:28" alias="OC">
                              <expression localId="1096" locator="347:16-347:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1101" locator="347:30-347:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1098" locator="347:36-347:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1100" locator="347:41-347:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1109" locator="348:9-348:46" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1106" locator="348:9-348:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1108" locator="348:19-348:46" name="Sex worker - HIV.B.DE51" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1140" locator="351:2-357:3" name="MSM" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1140">
               <a:s>define MSM:
  </a:s>
               <a:s r="1139">
                  <a:s>exists </a:s>
                  <a:s r="1138">
                     <a:s>(
    </a:s>
                     <a:s r="1138">
                        <a:s>
                           <a:s r="1115">
                              <a:s r="1114">
                                 <a:s r="1114">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1137">
                           <a:s>where </a:s>
                           <a:s r="1137">
                              <a:s r="1131">
                                 <a:s r="1122">
                                    <a:s r="1117">
                                       <a:s r="1116">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1117">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1121">
                                       <a:s>{ </a:s>
                                       <a:s r="1118">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1119">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1120">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1130">
                                    <a:s>exists</a:s>
                                    <a:s r="1129">
                                       <a:s>(</a:s>
                                       <a:s r="1129">
                                          <a:s>
                                             <a:s r="1124">
                                                <a:s r="1123">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1128">
                                             <a:s>where </a:s>
                                             <a:s r="1128">
                                                <a:s r="1125">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1127">
                                                   <a:s r="1126">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1127">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1136">
                                 <a:s r="1133">
                                    <a:s r="1132">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1133">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1135">
                                    <a:s r="1134">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1135">
                                       <a:s>&quot;Men who have sex with men&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1139" locator="352:3-357:3" xsi:type="Exists">
            <operand localId="1138" locator="352:10-357:3" xsi:type="Query">
               <source localId="1115" locator="353:5-353:61" alias="O">
                  <expression localId="1114" locator="353:5-353:59" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="353:19-353:58" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1137" locator="354:5-356:48" xsi:type="And">
                  <operand localId="1131" locator="354:11-355:61" xsi:type="And">
                     <operand localId="1122" locator="354:11-354:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1117" locator="354:11-354:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1121" locator="354:23-354:57" xsi:type="List">
                           <element localId="1118" locator="354:25-354:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1119" locator="354:34-354:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1120" locator="354:45-354:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1130" locator="355:9-355:61" xsi:type="Exists">
                        <operand localId="1129" locator="355:15-355:61" xsi:type="Query">
                           <source localId="1124" locator="355:16-355:28" alias="OC">
                              <expression localId="1123" locator="355:16-355:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1128" locator="355:30-355:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1125" locator="355:36-355:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1127" locator="355:41-355:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1136" locator="356:9-356:48" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1133" locator="356:9-356:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1135" locator="356:19-356:48" name="Men who have sex with men" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1167" locator="359:3-365:3" name="Trans" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1167">
               <a:s>define Trans:
  </a:s>
               <a:s r="1166">
                  <a:s>exists </a:s>
                  <a:s r="1165">
                     <a:s>(
    </a:s>
                     <a:s r="1165">
                        <a:s>
                           <a:s r="1142">
                              <a:s r="1141">
                                 <a:s r="1141">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1164">
                           <a:s>where </a:s>
                           <a:s r="1164">
                              <a:s r="1158">
                                 <a:s r="1149">
                                    <a:s r="1144">
                                       <a:s r="1143">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1144">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1148">
                                       <a:s>{ </a:s>
                                       <a:s r="1145">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1146">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1147">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1157">
                                    <a:s>exists</a:s>
                                    <a:s r="1156">
                                       <a:s>(</a:s>
                                       <a:s r="1156">
                                          <a:s>
                                             <a:s r="1151">
                                                <a:s r="1150">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1155">
                                             <a:s>where </a:s>
                                             <a:s r="1155">
                                                <a:s r="1152">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1154">
                                                   <a:s r="1153">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1154">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1163">
                                 <a:s r="1160">
                                    <a:s r="1159">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1160">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1162">
                                    <a:s r="1161">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1162">
                                       <a:s>&quot;Trans and gender-diverse people - HIV.B.DE53&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1166" locator="360:3-365:3" xsi:type="Exists">
            <operand localId="1165" locator="360:10-365:3" xsi:type="Query">
               <source localId="1142" locator="361:5-361:61" alias="O">
                  <expression localId="1141" locator="361:5-361:59" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="361:19-361:58" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1164" locator="362:5-364:67" xsi:type="And">
                  <operand localId="1158" locator="362:11-363:61" xsi:type="And">
                     <operand localId="1149" locator="362:11-362:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1144" locator="362:11-362:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1148" locator="362:23-362:57" xsi:type="List">
                           <element localId="1145" locator="362:25-362:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1146" locator="362:34-362:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1147" locator="362:45-362:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1157" locator="363:9-363:61" xsi:type="Exists">
                        <operand localId="1156" locator="363:15-363:61" xsi:type="Query">
                           <source localId="1151" locator="363:16-363:28" alias="OC">
                              <expression localId="1150" locator="363:16-363:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1155" locator="363:30-363:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1152" locator="363:36-363:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1154" locator="363:41-363:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1163" locator="364:9-364:67" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1160" locator="364:9-364:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1162" locator="364:19-364:67" name="Trans and gender-diverse people - HIV.B.DE53" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1194" locator="367:3-373:3" name="PWID" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1194">
               <a:s>define PWID:
  </a:s>
               <a:s r="1193">
                  <a:s>exists </a:s>
                  <a:s r="1192">
                     <a:s>(
    </a:s>
                     <a:s r="1192">
                        <a:s>
                           <a:s r="1169">
                              <a:s r="1168">
                                 <a:s r="1168">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1191">
                           <a:s>where </a:s>
                           <a:s r="1191">
                              <a:s r="1185">
                                 <a:s r="1176">
                                    <a:s r="1171">
                                       <a:s r="1170">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1171">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1175">
                                       <a:s>{ </a:s>
                                       <a:s r="1172">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1173">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1174">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1184">
                                    <a:s>exists</a:s>
                                    <a:s r="1183">
                                       <a:s>(</a:s>
                                       <a:s r="1183">
                                          <a:s>
                                             <a:s r="1178">
                                                <a:s r="1177">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1182">
                                             <a:s>where </a:s>
                                             <a:s r="1182">
                                                <a:s r="1179">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1181">
                                                   <a:s r="1180">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1181">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1190">
                                 <a:s r="1187">
                                    <a:s r="1186">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1187">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1189">
                                    <a:s r="1188">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1189">
                                       <a:s>&quot;People who inject drugs - HIV.B.DE54&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1193" locator="368:3-373:3" xsi:type="Exists">
            <operand localId="1192" locator="368:10-373:3" xsi:type="Query">
               <source localId="1169" locator="369:5-369:61" alias="O">
                  <expression localId="1168" locator="369:5-369:59" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="369:19-369:58" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1191" locator="370:5-372:59" xsi:type="And">
                  <operand localId="1185" locator="370:11-371:61" xsi:type="And">
                     <operand localId="1176" locator="370:11-370:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1171" locator="370:11-370:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1175" locator="370:23-370:57" xsi:type="List">
                           <element localId="1172" locator="370:25-370:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1173" locator="370:34-370:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1174" locator="370:45-370:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1184" locator="371:9-371:61" xsi:type="Exists">
                        <operand localId="1183" locator="371:15-371:61" xsi:type="Query">
                           <source localId="1178" locator="371:16-371:28" alias="OC">
                              <expression localId="1177" locator="371:16-371:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1182" locator="371:30-371:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1179" locator="371:36-371:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1181" locator="371:41-371:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1190" locator="372:9-372:59" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1187" locator="372:9-372:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1189" locator="372:19-372:59" name="People who inject drugs - HIV.B.DE54" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1221" locator="375:3-381:3" name="Prisoner" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1221">
               <a:s>define Prisoner:
  </a:s>
               <a:s r="1220">
                  <a:s>exists </a:s>
                  <a:s r="1219">
                     <a:s>(
    </a:s>
                     <a:s r="1219">
                        <a:s>
                           <a:s r="1196">
                              <a:s r="1195">
                                 <a:s r="1195">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;Key population member - HIV.E.DE113&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1218">
                           <a:s>where </a:s>
                           <a:s r="1218">
                              <a:s r="1212">
                                 <a:s r="1203">
                                    <a:s r="1198">
                                       <a:s r="1197">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1198">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1202">
                                       <a:s>{ </a:s>
                                       <a:s r="1199">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1200">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1201">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1211">
                                    <a:s>exists</a:s>
                                    <a:s r="1210">
                                       <a:s>(</a:s>
                                       <a:s r="1210">
                                          <a:s>
                                             <a:s r="1205">
                                                <a:s r="1204">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1209">
                                             <a:s>where </a:s>
                                             <a:s r="1209">
                                                <a:s r="1206">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1208">
                                                   <a:s r="1207">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1208">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1217">
                                 <a:s r="1214">
                                    <a:s r="1213">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1214">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1216">
                                    <a:s r="1215">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1216">
                                       <a:s>&quot;People living in prisons and other closed settings&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1220" locator="376:3-381:3" xsi:type="Exists">
            <operand localId="1219" locator="376:10-381:3" xsi:type="Query">
               <source localId="1196" locator="377:5-377:61" alias="O">
                  <expression localId="1195" locator="377:5-377:59" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="377:19-377:58" name="Key population member - HIV.E.DE113" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1218" locator="378:5-380:73" xsi:type="And">
                  <operand localId="1212" locator="378:11-379:61" xsi:type="And">
                     <operand localId="1203" locator="378:11-378:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1198" locator="378:11-378:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1202" locator="378:23-378:57" xsi:type="List">
                           <element localId="1199" locator="378:25-378:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1200" locator="378:34-378:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1201" locator="378:45-378:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1211" locator="379:9-379:61" xsi:type="Exists">
                        <operand localId="1210" locator="379:15-379:61" xsi:type="Query">
                           <source localId="1205" locator="379:16-379:28" alias="OC">
                              <expression localId="1204" locator="379:16-379:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1209" locator="379:30-379:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1206" locator="379:36-379:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1208" locator="379:41-379:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1217" locator="380:9-380:73" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1214" locator="380:9-380:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1216" locator="380:19-380:73" name="People living in prisons and other closed settings" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1251" locator="383:3-390:3" name="TB_diagnosed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1251">
               <a:s>define TB_diagnosed:
  </a:s>
               <a:s r="1250">
                  <a:s>exists</a:s>
                  <a:s r="1249">
                     <a:s>(
    </a:s>
                     <a:s r="1249">
                        <a:s>(</a:s>
                        <a:s r="1249">
                           <a:s>
                              <a:s r="1223">
                                 <a:s r="1222">
                                    <a:s r="1222">
                                       <a:s>[Condition]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    </a:s>
                           <a:s r="1248">
                              <a:s>where </a:s>
                              <a:s r="1248">
                                 <a:s r="1243">
                                    <a:s r="1237">
                                       <a:s r="1228">
                                          <a:s r="1225">
                                             <a:s r="1224">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1225">
                                                <a:s>clinicalStatus</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1227">
                                             <a:s r="1226">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1227">
                                                <a:s>&quot;active&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    and </a:s>
                                       <a:s r="1236">
                                          <a:s>exists</a:s>
                                          <a:s r="1235">
                                             <a:s>(</a:s>
                                             <a:s r="1235">
                                                <a:s>
                                                   <a:s r="1230">
                                                      <a:s r="1229">
                                                         <a:s>
                                                            <a:s>C.category</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> CC</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> </a:s>
                                                <a:s r="1234">
                                                   <a:s>where </a:s>
                                                   <a:s r="1234">
                                                      <a:s r="1231">
                                                         <a:s>CC</a:s>
                                                      </a:s>
                                                      <a:s> ~ </a:s>
                                                      <a:s r="1233">
                                                         <a:s r="1232">
                                                            <a:s>HCC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="1233">
                                                            <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    and </a:s>
                                    <a:s r="1242">
                                       <a:s r="1239">
                                          <a:s r="1238">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1239">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1241">
                                          <a:s r="1240">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1241">
                                             <a:s>&quot;Diagnosed TB&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1247">
                                    <a:s r="1245">
                                       <a:s r="1244">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1245">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1247"> during </a:s>
                                    <a:s r="1246">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1250" locator="384:3-390:3" xsi:type="Exists">
            <operand localId="1249" locator="384:9-390:3" xsi:type="Query">
               <source localId="1223" locator="385:6-385:18" alias="C">
                  <expression localId="1222" locator="385:6-385:16" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
               </source>
               <where localId="1248" locator="386:5-389:43" xsi:type="And">
                  <operand localId="1243" locator="386:11-388:34" xsi:type="And">
                     <operand localId="1237" locator="386:11-387:66" xsi:type="And">
                        <operand localId="1228" locator="386:11-386:41" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1225" locator="386:11-386:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1227" locator="386:30-386:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                        <operand localId="1236" locator="387:9-387:66" xsi:type="Exists">
                           <operand localId="1235" locator="387:15-387:66" xsi:type="Query">
                              <source localId="1230" locator="387:16-387:28" alias="CC">
                                 <expression localId="1229" locator="387:16-387:25" path="category" scope="C" xsi:type="Property"/>
                              </source>
                              <where localId="1234" locator="387:30-387:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="1231" locator="387:36-387:37" name="CC" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="1233" locator="387:41-387:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                                 </operand>
                              </where>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1242" locator="388:9-388:34" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1239" locator="388:9-388:14" path="code" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1241" locator="388:18-388:34" name="Diagnosed TB" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1247" locator="389:9-389:43" xsi:type="IncludedIn">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:Period" xsi:type="As">
                           <operand localId="1245" locator="389:9-389:15" path="onset" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1246" locator="389:24-389:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1246" locator="389:24-389:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1246" locator="389:24-389:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1246" locator="389:24-389:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1281" locator="392:3-399:3" name="TB_presumptive" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1281">
               <a:s>define TB_presumptive:
  </a:s>
               <a:s r="1280">
                  <a:s>exists</a:s>
                  <a:s r="1279">
                     <a:s>(
    </a:s>
                     <a:s r="1279">
                        <a:s>(</a:s>
                        <a:s r="1279">
                           <a:s>
                              <a:s r="1253">
                                 <a:s r="1252">
                                    <a:s r="1252">
                                       <a:s>[Condition]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> C</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    </a:s>
                           <a:s r="1278">
                              <a:s>where </a:s>
                              <a:s r="1278">
                                 <a:s r="1273">
                                    <a:s r="1267">
                                       <a:s r="1258">
                                          <a:s r="1255">
                                             <a:s r="1254">
                                                <a:s>C</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1255">
                                                <a:s>clinicalStatus</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1257">
                                             <a:s r="1256">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1257">
                                                <a:s>&quot;active&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    and </a:s>
                                       <a:s r="1266">
                                          <a:s>exists</a:s>
                                          <a:s r="1265">
                                             <a:s>(</a:s>
                                             <a:s r="1265">
                                                <a:s>
                                                   <a:s r="1260">
                                                      <a:s r="1259">
                                                         <a:s>
                                                            <a:s>C.category</a:s>
                                                         </a:s>
                                                      </a:s>
                                                      <a:s> CC</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> </a:s>
                                                <a:s r="1264">
                                                   <a:s>where </a:s>
                                                   <a:s r="1264">
                                                      <a:s r="1261">
                                                         <a:s>CC</a:s>
                                                      </a:s>
                                                      <a:s> ~ </a:s>
                                                      <a:s r="1263">
                                                         <a:s r="1262">
                                                            <a:s>HCC</a:s>
                                                         </a:s>
                                                         <a:s>.</a:s>
                                                         <a:s r="1263">
                                                            <a:s>&quot;encounter-diagnosis&quot;</a:s>
                                                         </a:s>
                                                      </a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
    and </a:s>
                                    <a:s r="1272">
                                       <a:s r="1269">
                                          <a:s r="1268">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1269">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1271">
                                          <a:s r="1270">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1271">
                                             <a:s>&quot;Presumptive TB - HIV.D.DE945&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1277">
                                    <a:s r="1275">
                                       <a:s r="1274">
                                          <a:s>C</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1275">
                                          <a:s>onset</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1277"> during </a:s>
                                    <a:s r="1276">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1280" locator="393:3-399:3" xsi:type="Exists">
            <operand localId="1279" locator="393:9-399:3" xsi:type="Query">
               <source localId="1253" locator="394:6-394:18" alias="C">
                  <expression localId="1252" locator="394:6-394:16" dataType="fhir:Condition" templateId="http://hl7.org/fhir/StructureDefinition/Condition" xsi:type="Retrieve"/>
               </source>
               <where localId="1278" locator="395:5-398:43" xsi:type="And">
                  <operand localId="1273" locator="395:11-397:50" xsi:type="And">
                     <operand localId="1267" locator="395:11-396:66" xsi:type="And">
                        <operand localId="1258" locator="395:11-395:41" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1255" locator="395:11-395:26" path="clinicalStatus" scope="C" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1257" locator="395:30-395:41" name="active" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                        <operand localId="1266" locator="396:9-396:66" xsi:type="Exists">
                           <operand localId="1265" locator="396:15-396:66" xsi:type="Query">
                              <source localId="1260" locator="396:16-396:28" alias="CC">
                                 <expression localId="1259" locator="396:16-396:25" path="category" scope="C" xsi:type="Property"/>
                              </source>
                              <where localId="1264" locator="396:30-396:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="1261" locator="396:36-396:37" name="CC" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="1263" locator="396:41-396:65" name="encounter-diagnosis" libraryName="HCC" xsi:type="CodeRef"/>
                                 </operand>
                              </where>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1272" locator="397:9-397:50" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1269" locator="397:9-397:14" path="code" scope="C" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1271" locator="397:18-397:50" name="Presumptive TB - HIV.D.DE945" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1277" locator="398:9-398:43" xsi:type="IncludedIn">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:Period" xsi:type="As">
                           <operand localId="1275" locator="398:9-398:15" path="onset" scope="C" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="Interval">
                        <low xsi:type="ToDateTime">
                           <operand path="low" xsi:type="Property">
                              <source localId="1276" locator="398:24-398:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </low>
                        <lowClosedExpression path="lowClosed" xsi:type="Property">
                           <source localId="1276" locator="398:24-398:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </lowClosedExpression>
                        <high xsi:type="ToDateTime">
                           <operand path="high" xsi:type="Property">
                              <source localId="1276" locator="398:24-398:43" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </high>
                        <highClosedExpression path="highClosed" xsi:type="Property">
                           <source localId="1276" locator="398:24-398:43" name="Measurement Period" xsi:type="ParameterRef"/>
                        </highClosedExpression>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1308" locator="402:1-408:3" name="Exposure_Occupational" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1308">
               <a:s>define Exposure_Occupational:
  </a:s>
               <a:s r="1307">
                  <a:s>exists </a:s>
                  <a:s r="1306">
                     <a:s>(
    </a:s>
                     <a:s r="1306">
                        <a:s>
                           <a:s r="1283">
                              <a:s r="1282">
                                 <a:s r="1282">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1305">
                           <a:s>where </a:s>
                           <a:s r="1305">
                              <a:s r="1299">
                                 <a:s r="1290">
                                    <a:s r="1285">
                                       <a:s r="1284">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1285">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1289">
                                       <a:s>{ </a:s>
                                       <a:s r="1286">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1287">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1288">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1298">
                                    <a:s>exists</a:s>
                                    <a:s r="1297">
                                       <a:s>(</a:s>
                                       <a:s r="1297">
                                          <a:s>
                                             <a:s r="1292">
                                                <a:s r="1291">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1296">
                                             <a:s>where </a:s>
                                             <a:s r="1296">
                                                <a:s r="1293">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1295">
                                                   <a:s r="1294">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1295">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1304">
                                 <a:s r="1301">
                                    <a:s r="1300">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1301">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1303">
                                    <a:s r="1302">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1303">
                                       <a:s>&quot;Occupational&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1307" locator="403:3-408:3" xsi:type="Exists">
            <operand localId="1306" locator="403:10-408:3" xsi:type="Query">
               <source localId="1283" locator="404:5-404:43" alias="O">
                  <expression localId="1282" locator="404:5-404:41" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="404:19-404:40" name="HIV exposure type" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1305" locator="405:5-407:35" xsi:type="And">
                  <operand localId="1299" locator="405:11-406:61" xsi:type="And">
                     <operand localId="1290" locator="405:11-405:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1285" locator="405:11-405:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1289" locator="405:23-405:57" xsi:type="List">
                           <element localId="1286" locator="405:25-405:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1287" locator="405:34-405:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1288" locator="405:45-405:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1298" locator="406:9-406:61" xsi:type="Exists">
                        <operand localId="1297" locator="406:15-406:61" xsi:type="Query">
                           <source localId="1292" locator="406:16-406:28" alias="OC">
                              <expression localId="1291" locator="406:16-406:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1296" locator="406:30-406:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1293" locator="406:36-406:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1295" locator="406:41-406:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1304" locator="407:9-407:35" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1301" locator="407:9-407:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1303" locator="407:19-407:35" name="Occupational" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1335" locator="410:1-416:3" name="Exposure_Non_Occupational_violent" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1335">
               <a:s>define Exposure_Non_Occupational_violent:
  </a:s>
               <a:s r="1334">
                  <a:s>exists </a:s>
                  <a:s r="1333">
                     <a:s>(
    </a:s>
                     <a:s r="1333">
                        <a:s>
                           <a:s r="1310">
                              <a:s r="1309">
                                 <a:s r="1309">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1332">
                           <a:s>where </a:s>
                           <a:s r="1332">
                              <a:s r="1326">
                                 <a:s r="1317">
                                    <a:s r="1312">
                                       <a:s r="1311">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1312">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1316">
                                       <a:s>{ </a:s>
                                       <a:s r="1313">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1314">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1315">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1325">
                                    <a:s>exists</a:s>
                                    <a:s r="1324">
                                       <a:s>(</a:s>
                                       <a:s r="1324">
                                          <a:s>
                                             <a:s r="1319">
                                                <a:s r="1318">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1323">
                                             <a:s>where </a:s>
                                             <a:s r="1323">
                                                <a:s r="1320">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1322">
                                                   <a:s r="1321">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1322">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1331">
                                 <a:s r="1328">
                                    <a:s r="1327">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1328">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1330">
                                    <a:s r="1329">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1330">
                                       <a:s>&quot;Non-occupational violent&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1334" locator="411:3-416:3" xsi:type="Exists">
            <operand localId="1333" locator="411:10-416:3" xsi:type="Query">
               <source localId="1310" locator="412:5-412:43" alias="O">
                  <expression localId="1309" locator="412:5-412:41" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="412:19-412:40" name="HIV exposure type" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1332" locator="413:5-415:47" xsi:type="And">
                  <operand localId="1326" locator="413:11-414:61" xsi:type="And">
                     <operand localId="1317" locator="413:11-413:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1312" locator="413:11-413:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1316" locator="413:23-413:57" xsi:type="List">
                           <element localId="1313" locator="413:25-413:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1314" locator="413:34-413:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1315" locator="413:45-413:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1325" locator="414:9-414:61" xsi:type="Exists">
                        <operand localId="1324" locator="414:15-414:61" xsi:type="Query">
                           <source localId="1319" locator="414:16-414:28" alias="OC">
                              <expression localId="1318" locator="414:16-414:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1323" locator="414:30-414:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1320" locator="414:36-414:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1322" locator="414:41-414:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1331" locator="415:9-415:47" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1328" locator="415:9-415:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1330" locator="415:19-415:47" name="Non-occupational violent" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1362" locator="418:1-424:3" name="Exposure_Non_Occupational_consensual_sex" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1362">
               <a:s>define Exposure_Non_Occupational_consensual_sex:
  </a:s>
               <a:s r="1361">
                  <a:s>exists </a:s>
                  <a:s r="1360">
                     <a:s>(
    </a:s>
                     <a:s r="1360">
                        <a:s>
                           <a:s r="1337">
                              <a:s r="1336">
                                 <a:s r="1336">
                                    <a:s>[Observation: </a:s>
                                    <a:s>
                                       <a:s>HC.&quot;HIV exposure type&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1359">
                           <a:s>where </a:s>
                           <a:s r="1359">
                              <a:s r="1353">
                                 <a:s r="1344">
                                    <a:s r="1339">
                                       <a:s r="1338">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1339">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> in </a:s>
                                    <a:s r="1343">
                                       <a:s>{ </a:s>
                                       <a:s r="1340">
                                          <a:s>'final'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1341">
                                          <a:s>'amended'</a:s>
                                       </a:s>
                                       <a:s>, </a:s>
                                       <a:s r="1342">
                                          <a:s>'corrected'</a:s>
                                       </a:s>
                                       <a:s> }</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1352">
                                    <a:s>exists</a:s>
                                    <a:s r="1351">
                                       <a:s>(</a:s>
                                       <a:s r="1351">
                                          <a:s>
                                             <a:s r="1346">
                                                <a:s r="1345">
                                                   <a:s>
                                                      <a:s>O.category</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> OC</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1350">
                                             <a:s>where </a:s>
                                             <a:s r="1350">
                                                <a:s r="1347">
                                                   <a:s>OC</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1349">
                                                   <a:s r="1348">
                                                      <a:s>HCC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1349">
                                                      <a:s>&quot;social-history&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1358">
                                 <a:s r="1355">
                                    <a:s r="1354">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1355">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1357">
                                    <a:s r="1356">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1357">
                                       <a:s>&quot;Non-occupational consensual sex&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1361" locator="419:3-424:3" xsi:type="Exists">
            <operand localId="1360" locator="419:10-424:3" xsi:type="Query">
               <source localId="1337" locator="420:5-420:43" alias="O">
                  <expression localId="1336" locator="420:5-420:41" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                     <codes xsi:type="ToList">
                        <operand locator="420:19-420:40" name="HIV exposure type" libraryName="HC" xsi:type="CodeRef"/>
                     </codes>
                  </expression>
               </source>
               <where localId="1359" locator="421:5-423:54" xsi:type="And">
                  <operand localId="1353" locator="421:11-422:61" xsi:type="And">
                     <operand localId="1344" locator="421:11-421:57" xsi:type="In">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1339" locator="421:11-421:18" path="status" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand localId="1343" locator="421:23-421:57" xsi:type="List">
                           <element localId="1340" locator="421:25-421:31" valueType="t:String" value="final" xsi:type="Literal"/>
                           <element localId="1341" locator="421:34-421:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                           <element localId="1342" locator="421:45-421:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="1352" locator="422:9-422:61" xsi:type="Exists">
                        <operand localId="1351" locator="422:15-422:61" xsi:type="Query">
                           <source localId="1346" locator="422:16-422:28" alias="OC">
                              <expression localId="1345" locator="422:16-422:25" path="category" scope="O" xsi:type="Property"/>
                           </source>
                           <where localId="1350" locator="422:30-422:60" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1347" locator="422:36-422:37" name="OC" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1349" locator="422:41-422:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1358" locator="423:9-423:54" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1355" locator="423:9-423:15" path="value" scope="O" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1357" locator="423:19-423:54" name="Non-occupational consensual sex" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1377" locator="426:1-431:3" name="hiv_exposure_type" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1377">
               <a:s>define hiv_exposure_type:
  </a:s>
               <a:s r="1376">
                  <a:s>List&lt;</a:s>
                  <a:s r="1363">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1367">
                     <a:s>if </a:s>
                     <a:s r="1364">
                        <a:s>Exposure_Occupational</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1365">
                        <a:s>'Occupational'</a:s>
                     </a:s>
                     <a:s r="1366"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1371">
                     <a:s>if </a:s>
                     <a:s r="1368">
                        <a:s>Exposure_Non_Occupational_violent</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1369">
                        <a:s>'Non-occupational violent'</a:s>
                     </a:s>
                     <a:s r="1370"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1375">
                     <a:s>if </a:s>
                     <a:s r="1372">
                        <a:s>Exposure_Non_Occupational_consensual_sex</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1373">
                        <a:s>'Non-occupational consensual sex'</a:s>
                     </a:s>
                     <a:s r="1374"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1376" locator="427:3-431:3" xsi:type="List">
            <element localId="1367" locator="428:5-428:58" xsi:type="If">
               <condition localId="1364" locator="428:8-428:28" name="Exposure_Occupational" xsi:type="ExpressionRef"/>
               <then localId="1365" locator="428:35-428:48" valueType="t:String" value="Occupational" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1366" locator="428:55-428:58" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1371" locator="429:5-429:82" xsi:type="If">
               <condition localId="1368" locator="429:8-429:40" name="Exposure_Non_Occupational_violent" xsi:type="ExpressionRef"/>
               <then localId="1369" locator="429:47-429:72" valueType="t:String" value="Non-occupational violent" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1370" locator="429:79-429:82" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1375" locator="430:5-430:96" xsi:type="If">
               <condition localId="1372" locator="430:8-430:47" name="Exposure_Non_Occupational_consensual_sex" xsi:type="ExpressionRef"/>
               <then localId="1373" locator="430:54-430:86" valueType="t:String" value="Non-occupational consensual sex" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1374" locator="430:93-430:96" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1422" locator="435:1-442:51" name="Community_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1422">
               <a:s>/*@triggeredBy Encounter with location = community level testing*/

define &quot;Community_testing&quot;:
  </a:s>
               <a:s r="1421">
                  <a:s>exists</a:s>
                  <a:s r="1420">
                     <a:s>(</a:s>
                     <a:s r="1420">
                        <a:s>
                           <a:s r="1379">
                              <a:s r="1378">
                                 <a:s r="1378">
                                    <a:s>[Observation]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1395">
                           <a:s>with </a:s>
                           <a:s r="1381">
                              <a:s r="1380">
                                 <a:s r="1380">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                           <a:s>
      such that </a:s>
                           <a:s r="1394">
                              <a:s r="1385">
                                 <a:s r="1383">
                                    <a:s r="1382">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1383">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1385">
                                    <a:s>references(</a:s>
                                    <a:s r="1384">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1393">
                                 <a:s>exists</a:s>
                                 <a:s r="1392">
                                    <a:s>(</a:s>
                                    <a:s r="1392">
                                       <a:s>
                                          <a:s r="1387">
                                             <a:s r="1386">
                                                <a:s>
                                                   <a:s>E.location.physicalType</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> PT</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1391">
                                          <a:s>where </a:s>
                                          <a:s r="1391">
                                             <a:s r="1388">
                                                <a:s>PT</a:s>
                                             </a:s>
                                             <a:s> ~  </a:s>
                                             <a:s r="1390">
                                                <a:s r="1389">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1390">
                                                   <a:s>&quot;Community-level testing&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s> 
  </a:s>
                        <a:s r="1419">
                           <a:s>where </a:s>
                           <a:s r="1419">
                              <a:s>(</a:s>
                              <a:s r="1419">
                                 <a:s r="1413">
                                    <a:s r="1407">
                                       <a:s r="1401">
                                          <a:s r="1397">
                                             <a:s r="1396">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1397">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="1400">
                                             <a:s>{ </a:s>
                                             <a:s r="1398">
                                                <a:s>'final'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1399">
                                                <a:s>'amended'</a:s>
                                             </a:s>
                                             <a:s> }</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
  and </a:s>
                                       <a:s r="1406">
                                          <a:s r="1403">
                                             <a:s r="1402">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1403">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1405">
                                             <a:s r="1404">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1405">
                                                <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
  and </a:s>
                                    <a:s r="1412">
                                       <a:s r="1409">
                                          <a:s r="1408">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1409">
                                             <a:s>issued</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="1412"> after </a:s>
                                       <a:s r="1411">
                                          <a:s>start of </a:s>
                                          <a:s r="1410">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
  and </a:s>
                                 <a:s r="1418">
                                    <a:s r="1415">
                                       <a:s r="1414">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1415">
                                          <a:s>issued</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1418"> before </a:s>
                                    <a:s r="1417">
                                       <a:s>end of </a:s>
                                       <a:s r="1416">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1421" locator="436:3-442:51" xsi:type="Exists">
            <operand localId="1420" locator="436:9-442:51" xsi:type="Query">
               <source localId="1379" locator="436:10-436:24" alias="O">
                  <expression localId="1378" locator="436:10-436:22" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
               </source>
               <relationship localId="1395" locator="437:5-438:121" alias="E" xsi:type="With">
                  <expression localId="1380" locator="437:10-437:20" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
                  <suchThat localId="1394" locator="438:17-438:121" xsi:type="And">
                     <operand localId="1385" locator="438:17-438:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="1383" locator="438:17-438:27" path="encounter" scope="O" xsi:type="Property"/>
                        <operand localId="1384" locator="438:40" name="E" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="1393" locator="438:47-438:121" xsi:type="Exists">
                        <operand localId="1392" locator="438:53-438:121" xsi:type="Query">
                           <source localId="1387" locator="438:54-438:79" alias="PT">
                              <expression localId="1386" locator="438:54-438:76" xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="location" scope="E" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="physicalType" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="physicalType" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </expression>
                           </source>
                           <where localId="1391" locator="438:81-438:120" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1388" locator="438:87-438:88" name="PT" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1390" locator="438:93-438:120" name="Community-level testing" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </suchThat>
               </relationship>
               <where localId="1419" locator="439:3-442:50" xsi:type="And">
                  <operand localId="1413" locator="439:10-441:50" xsi:type="And">
                     <operand localId="1407" locator="439:10-440:62" xsi:type="And">
                        <operand localId="1401" locator="439:10-439:43" xsi:type="In">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1397" locator="439:10-439:17" path="status" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand localId="1400" locator="439:22-439:43" xsi:type="List">
                              <element localId="1398" locator="439:24-439:30" valueType="t:String" value="final" xsi:type="Literal"/>
                              <element localId="1399" locator="439:33-439:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="1406" locator="440:7-440:62" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1403" locator="440:7-440:12" path="code" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1405" locator="440:16-440:62" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1412" locator="441:7-441:50" xsi:type="After">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1409" locator="441:7-441:14" path="issued" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1411" locator="441:22-441:50" xsi:type="Start">
                              <operand localId="1410" locator="441:31-441:50" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1418" locator="442:7-442:49" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1415" locator="442:7-442:14" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="1417" locator="442:23-442:49" xsi:type="End">
                           <operand localId="1416" locator="442:30-442:49" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1467" locator="446:1-454:3" name="Facility_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1467">
               <a:s>/*@triggeredBy Encounter with location = facility level testing*/
define &quot;Facility_testing&quot;:
  </a:s>
               <a:s r="1466">
                  <a:s>exists</a:s>
                  <a:s r="1465">
                     <a:s>(</a:s>
                     <a:s r="1465">
                        <a:s>
                           <a:s r="1424">
                              <a:s r="1423">
                                 <a:s r="1423">
                                    <a:s>[Observation]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> O</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1440">
                           <a:s>with </a:s>
                           <a:s r="1426">
                              <a:s r="1425">
                                 <a:s r="1425">
                                    <a:s>[Encounter]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> E</a:s>
                           </a:s>
                           <a:s>
      such that </a:s>
                           <a:s r="1439">
                              <a:s r="1430">
                                 <a:s r="1428">
                                    <a:s r="1427">
                                       <a:s>O</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1428">
                                       <a:s>encounter</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1430">
                                    <a:s>references(</a:s>
                                    <a:s r="1429">
                                       <a:s>E</a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1438">
                                 <a:s>exists</a:s>
                                 <a:s r="1437">
                                    <a:s>(</a:s>
                                    <a:s r="1437">
                                       <a:s>
                                          <a:s r="1432">
                                             <a:s r="1431">
                                                <a:s>
                                                   <a:s>E.location.physicalType</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> PT</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1436">
                                          <a:s>where </a:s>
                                          <a:s r="1436">
                                             <a:s r="1433">
                                                <a:s>PT</a:s>
                                             </a:s>
                                             <a:s> ~  </a:s>
                                             <a:s r="1435">
                                                <a:s r="1434">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1435">
                                                   <a:s>&quot;Facility-level testing&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  </a:s>
                        <a:s r="1464">
                           <a:s>where </a:s>
                           <a:s r="1464">
                              <a:s>(</a:s>
                              <a:s r="1464">
                                 <a:s r="1458">
                                    <a:s r="1452">
                                       <a:s r="1446">
                                          <a:s r="1442">
                                             <a:s r="1441">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1442">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> in </a:s>
                                          <a:s r="1445">
                                             <a:s>{ </a:s>
                                             <a:s r="1443">
                                                <a:s>'final'</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="1444">
                                                <a:s>'amended'</a:s>
                                             </a:s>
                                             <a:s> }</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
  and </a:s>
                                       <a:s r="1451">
                                          <a:s r="1448">
                                             <a:s r="1447">
                                                <a:s>O</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1448">
                                                <a:s>code</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1450">
                                             <a:s r="1449">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1450">
                                                <a:s>&quot;Rapid diagnostic test for HIV - HIV.B.DE82&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>
  and </a:s>
                                    <a:s r="1457">
                                       <a:s r="1454">
                                          <a:s r="1453">
                                             <a:s>O</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1454">
                                             <a:s>issued</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s r="1457"> after </a:s>
                                       <a:s r="1456">
                                          <a:s>start of </a:s>
                                          <a:s r="1455">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
  and </a:s>
                                 <a:s r="1463">
                                    <a:s r="1460">
                                       <a:s r="1459">
                                          <a:s>O</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1460">
                                          <a:s>issued</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1463"> before </a:s>
                                    <a:s r="1462">
                                       <a:s>end of </a:s>
                                       <a:s r="1461">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1466" locator="447:3-454:3" xsi:type="Exists">
            <operand localId="1465" locator="447:9-454:3" xsi:type="Query">
               <source localId="1424" locator="447:10-447:24" alias="O">
                  <expression localId="1423" locator="447:10-447:22" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" xsi:type="Retrieve"/>
               </source>
               <relationship localId="1440" locator="448:5-449:120" alias="E" xsi:type="With">
                  <expression localId="1425" locator="448:10-448:20" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" xsi:type="Retrieve"/>
                  <suchThat localId="1439" locator="449:17-449:120" xsi:type="And">
                     <operand localId="1430" locator="449:17-449:41" name="references" libraryName="WCom" xsi:type="FunctionRef">
                        <operand localId="1428" locator="449:17-449:27" path="encounter" scope="O" xsi:type="Property"/>
                        <operand localId="1429" locator="449:40" name="E" xsi:type="AliasRef"/>
                     </operand>
                     <operand localId="1438" locator="449:47-449:120" xsi:type="Exists">
                        <operand localId="1437" locator="449:53-449:120" xsi:type="Query">
                           <source localId="1432" locator="449:54-449:79" alias="PT">
                              <expression localId="1431" locator="449:54-449:76" xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="location" scope="E" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="physicalType" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="physicalType" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </expression>
                           </source>
                           <where localId="1436" locator="449:81-449:119" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1433" locator="449:87-449:88" name="PT" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1435" locator="449:93-449:119" name="Facility-level testing" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </suchThat>
               </relationship>
               <where localId="1464" locator="450:3-453:50" xsi:type="And">
                  <operand localId="1458" locator="450:10-452:50" xsi:type="And">
                     <operand localId="1452" locator="450:10-451:62" xsi:type="And">
                        <operand localId="1446" locator="450:10-450:43" xsi:type="In">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1442" locator="450:10-450:17" path="status" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand localId="1445" locator="450:22-450:43" xsi:type="List">
                              <element localId="1443" locator="450:24-450:30" valueType="t:String" value="final" xsi:type="Literal"/>
                              <element localId="1444" locator="450:33-450:41" valueType="t:String" value="amended" xsi:type="Literal"/>
                           </operand>
                        </operand>
                        <operand localId="1451" locator="451:7-451:62" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1448" locator="451:7-451:12" path="code" scope="O" xsi:type="Property"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1450" locator="451:16-451:62" name="Rapid diagnostic test for HIV - HIV.B.DE82" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1457" locator="452:7-452:50" xsi:type="After">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1454" locator="452:7-452:14" path="issued" scope="O" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="1456" locator="452:22-452:50" xsi:type="Start">
                              <operand localId="1455" locator="452:31-452:50" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1463" locator="453:7-453:49" xsi:type="Before">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1460" locator="453:7-453:14" path="issued" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="1462" locator="453:23-453:49" xsi:type="End">
                           <operand localId="1461" locator="453:30-453:49" name="Measurement Period" xsi:type="ParameterRef"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1494" locator="457:1-469:5" name="ANC_case" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1494">
               <a:s>//lifted this from ANC DAK
define &quot;ANC_case&quot;:
</a:s>
               <a:s r="1493">
                  <a:s>exists</a:s>
                  <a:s r="1492">
                     <a:s>(
    </a:s>
                     <a:s r="1492">
                        <a:s>
                           <a:s r="1469">
                              <a:s r="1468">
                                 <a:s r="1468">
                                    <a:s>[EpisodeOfCare]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> EOC</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1491">
                           <a:s>where </a:s>
                           <a:s r="1491">
                              <a:s r="1477">
                                 <a:s>exists</a:s>
                                 <a:s r="1476">
                                    <a:s>(</a:s>
                                    <a:s r="1476">
                                       <a:s>
                                          <a:s r="1471">
                                             <a:s r="1470">
                                                <a:s>
                                                   <a:s>EOC.type</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> T</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1475">
                                          <a:s>where </a:s>
                                          <a:s r="1475">
                                             <a:s r="1472">
                                                <a:s>T</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1474">
                                                <a:s r="1473">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1474">
                                                   <a:s>&quot;Already on ART at first antenatal care visit&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1490">
                                 <a:s>(</a:s>
                                 <a:s r="1490">
                                    <a:s r="1485">
                                       <a:s>exists </a:s>
                                       <a:s r="1484">
                                          <a:s>(
      </a:s>
                                          <a:s r="1484">
                                             <a:s>
                                                <a:s r="1479">
                                                   <a:s r="1478">
                                                      <a:s>
                                                         <a:s>EOC.statusHistory</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s> H</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>
      </a:s>
                                             <a:s r="1483">
                                                <a:s>where </a:s>
                                                <a:s r="1483">
                                                   <a:s r="1481">
                                                      <a:s r="1480">
                                                         <a:s>H</a:s>
                                                      </a:s>
                                                      <a:s>.</a:s>
                                                      <a:s r="1481">
                                                         <a:s>period</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s r="1483"> overlaps </a:s>
                                                   <a:s r="1482">
                                                      <a:s>&quot;Measurement Period&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>
    )</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
    or </a:s>
                                    <a:s r="1489">
                                       <a:s>(
      </a:s>
                                       <a:s r="1489">
                                          <a:s r="1487">
                                             <a:s r="1486">
                                                <a:s>EOC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1487">
                                                <a:s>period</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s r="1489"> overlaps </a:s>
                                          <a:s r="1488">
                                             <a:s>&quot;Measurement Period&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
    )</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    )</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1493" locator="458:1-469:5" xsi:type="Exists">
            <operand localId="1492" locator="458:7-469:5" xsi:type="Query">
               <source localId="1469" locator="459:5-459:23" alias="EOC">
                  <expression localId="1468" locator="459:5-459:19" dataType="fhir:EpisodeOfCare" templateId="http://hl7.org/fhir/StructureDefinition/EpisodeOfCare" xsi:type="Retrieve"/>
               </source>
               <where localId="1491" locator="460:5-468:5" xsi:type="And">
                  <operand localId="1477" locator="460:11-460:88" xsi:type="Exists">
                     <operand localId="1476" locator="460:17-460:88" xsi:type="Query">
                        <source localId="1471" locator="460:18-460:27" alias="T">
                           <expression localId="1470" locator="460:18-460:25" path="type" scope="EOC" xsi:type="Property"/>
                        </source>
                        <where localId="1475" locator="460:29-460:87" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1472" locator="460:35" name="T" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1474" locator="460:39-460:87" name="Already on ART at first antenatal care visit" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="1490" locator="461:9-468:5" xsi:type="Or">
                     <operand localId="1485" locator="461:10-464:5" xsi:type="Exists">
                        <operand localId="1484" locator="461:17-464:5" xsi:type="Query">
                           <source localId="1479" locator="462:7-462:25" alias="H">
                              <expression localId="1478" locator="462:7-462:23" path="statusHistory" scope="EOC" xsi:type="Property"/>
                           </source>
                           <where localId="1483" locator="463:7-463:50" xsi:type="Overlaps">
                              <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1481" locator="463:13-463:20" path="period" scope="H" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="Interval">
                                 <low xsi:type="ToDateTime">
                                    <operand path="low" xsi:type="Property">
                                       <source localId="1482" locator="463:31-463:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </low>
                                 <lowClosedExpression path="lowClosed" xsi:type="Property">
                                    <source localId="1482" locator="463:31-463:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </lowClosedExpression>
                                 <high xsi:type="ToDateTime">
                                    <operand path="high" xsi:type="Property">
                                       <source localId="1482" locator="463:31-463:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                    </operand>
                                 </high>
                                 <highClosedExpression path="highClosed" xsi:type="Property">
                                    <source localId="1482" locator="463:31-463:50" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </highClosedExpression>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                     <operand localId="1489" locator="465:8-467:5" xsi:type="Overlaps">
                        <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1487" locator="466:7-466:16" path="period" scope="EOC" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="Interval">
                           <low xsi:type="ToDateTime">
                              <operand path="low" xsi:type="Property">
                                 <source localId="1488" locator="466:27-466:46" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </low>
                           <lowClosedExpression path="lowClosed" xsi:type="Property">
                              <source localId="1488" locator="466:27-466:46" name="Measurement Period" xsi:type="ParameterRef"/>
                           </lowClosedExpression>
                           <high xsi:type="ToDateTime">
                              <operand path="high" xsi:type="Property">
                                 <source localId="1488" locator="466:27-466:46" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </high>
                           <highClosedExpression path="highClosed" xsi:type="Property">
                              <source localId="1488" locator="466:27-466:46" name="Measurement Period" xsi:type="ParameterRef"/>
                           </highClosedExpression>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1536" locator="472:3-480:3" name="PREP Product Oral" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1536">
               <a:s>define &quot;PREP Product Oral&quot;:
  </a:s>
               <a:s r="1535">
                  <a:s>exists</a:s>
                  <a:s r="1534">
                     <a:s>(</a:s>
                     <a:s r="1534">
                        <a:s>
                           <a:s r="1496">
                              <a:s r="1495">
                                 <a:s r="1495">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1533">
                           <a:s>where </a:s>
                           <a:s r="1533">
                              <a:s r="1509">
                                 <a:s r="1500">
                                    <a:s r="1498">
                                       <a:s r="1497">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1498">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1499">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1508">
                                    <a:s>exists</a:s>
                                    <a:s r="1507">
                                       <a:s>(</a:s>
                                       <a:s r="1507">
                                          <a:s>
                                             <a:s r="1502">
                                                <a:s r="1501">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1506">
                                             <a:s>where </a:s>
                                             <a:s r="1506">
                                                <a:s r="1503">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1505">
                                                   <a:s r="1504">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1505">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1532">
                                 <a:s>(</a:s>
                                 <a:s r="1532">
                                    <a:s r="1526">
                                       <a:s r="1520">
                                          <a:s r="1514">
                                             <a:s r="1511">
                                                <a:s r="1510">
                                                   <a:s>MS</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1511">
                                                   <a:s>medication</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1513">
                                                <a:s r="1512">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1513">
                                                   <a:s>&quot;TDF + FTC - HIV.C.DE18&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> or
    </a:s>
                                          <a:s r="1519">
                                             <a:s r="1516">
                                                <a:s r="1515">
                                                   <a:s>MS</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1516">
                                                   <a:s>medication</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1518">
                                                <a:s r="1517">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1518">
                                                   <a:s>&quot;TDF - HIV.C.DE19&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> or
    </a:s>
                                       <a:s r="1525">
                                          <a:s r="1522">
                                             <a:s r="1521">
                                                <a:s>MS</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1522">
                                                <a:s>medication</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="1524">
                                             <a:s r="1523">
                                                <a:s>HC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="1524">
                                                <a:s>&quot;TDF + 3TC - HIV.C.DE20&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> or
    </a:s>
                                    <a:s r="1531">
                                       <a:s r="1528">
                                          <a:s r="1527">
                                             <a:s>MS</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1528">
                                             <a:s>medication</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~ </a:s>
                                       <a:s r="1530">
                                          <a:s r="1529">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1530">
                                             <a:s>&quot;Other TDF-based regimen&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1535" locator="473:3-480:3" xsi:type="Exists">
            <operand localId="1534" locator="473:9-480:3" xsi:type="Query">
               <source localId="1496" locator="473:10-473:33" alias="MS">
                  <expression localId="1495" locator="473:10-473:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1533" locator="474:5-479:49" xsi:type="And">
                  <operand localId="1509" locator="474:11-475:64" xsi:type="And">
                     <operand localId="1500" locator="474:11-474:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1498" locator="474:11-474:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1499" locator="474:23-474:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1508" locator="475:9-475:64" xsi:type="Exists">
                        <operand localId="1507" locator="475:15-475:64" xsi:type="Query">
                           <source localId="1502" locator="475:16-475:30" alias="C">
                              <expression localId="1501" locator="475:16-475:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1506" locator="475:32-475:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1503" locator="475:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1505" locator="475:42-475:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1532" locator="476:9-479:49" xsi:type="Or">
                     <operand localId="1526" locator="476:10-478:47" xsi:type="Or">
                        <operand localId="1520" locator="476:10-477:41" xsi:type="Or">
                           <operand localId="1514" locator="476:10-476:52" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="1511" locator="476:10-476:22" path="medication" scope="MS" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1513" locator="476:26-476:52" name="TDF + FTC - HIV.C.DE18" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                           <operand localId="1519" locator="477:5-477:41" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:CodeableConcept" xsi:type="As">
                                    <operand localId="1516" locator="477:5-477:17" path="medication" scope="MS" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1518" locator="477:21-477:41" name="TDF - HIV.C.DE19" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="1525" locator="478:5-478:47" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:CodeableConcept" xsi:type="As">
                                 <operand localId="1522" locator="478:5-478:17" path="medication" scope="MS" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1524" locator="478:21-478:47" name="TDF + 3TC - HIV.C.DE20" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="1531" locator="479:5-479:48" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="1528" locator="479:5-479:17" path="medication" scope="MS" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="1530" locator="479:21-479:48" name="Other TDF-based regimen" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1560" locator="482:3-487:3" name="PREP Product long-acting device" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1560">
               <a:s>define &quot;PREP Product long-acting device&quot;:
  </a:s>
               <a:s r="1559">
                  <a:s>exists</a:s>
                  <a:s r="1558">
                     <a:s>(</a:s>
                     <a:s r="1558">
                        <a:s>
                           <a:s r="1538">
                              <a:s r="1537">
                                 <a:s r="1537">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1557">
                           <a:s>where </a:s>
                           <a:s r="1557">
                              <a:s r="1551">
                                 <a:s r="1542">
                                    <a:s r="1540">
                                       <a:s r="1539">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1540">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1541">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1550">
                                    <a:s>exists</a:s>
                                    <a:s r="1549">
                                       <a:s>(</a:s>
                                       <a:s r="1549">
                                          <a:s>
                                             <a:s r="1544">
                                                <a:s r="1543">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1548">
                                             <a:s>where </a:s>
                                             <a:s r="1548">
                                                <a:s r="1545">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1547">
                                                   <a:s r="1546">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1547">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1556">
                                 <a:s r="1553">
                                    <a:s r="1552">
                                       <a:s>MS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1553">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1555">
                                    <a:s r="1554">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1555">
                                       <a:s>&quot;Dapivirine vaginal ring DVR - HIV.C.DE22&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1559" locator="483:3-487:3" xsi:type="Exists">
            <operand localId="1558" locator="483:9-487:3" xsi:type="Query">
               <source localId="1538" locator="483:10-483:33" alias="MS">
                  <expression localId="1537" locator="483:10-483:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1557" locator="484:5-486:69" xsi:type="And">
                  <operand localId="1551" locator="484:11-485:64" xsi:type="And">
                     <operand localId="1542" locator="484:11-484:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1540" locator="484:11-484:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1541" locator="484:23-484:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1550" locator="485:9-485:64" xsi:type="Exists">
                        <operand localId="1549" locator="485:15-485:64" xsi:type="Query">
                           <source localId="1544" locator="485:16-485:30" alias="C">
                              <expression localId="1543" locator="485:16-485:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1548" locator="485:32-485:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1545" locator="485:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1547" locator="485:42-485:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1556" locator="486:9-486:69" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1553" locator="486:9-486:21" path="medication" scope="MS" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1555" locator="486:25-486:69" name="Dapivirine vaginal ring DVR - HIV.C.DE22" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1584" locator="489:3-494:3" name="PREP Product long-acting injectable" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1584">
               <a:s>define &quot;PREP Product long-acting injectable&quot;:
  </a:s>
               <a:s r="1583">
                  <a:s>exists</a:s>
                  <a:s r="1582">
                     <a:s>(</a:s>
                     <a:s r="1582">
                        <a:s>
                           <a:s r="1562">
                              <a:s r="1561">
                                 <a:s r="1561">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1581">
                           <a:s>where </a:s>
                           <a:s r="1581">
                              <a:s r="1575">
                                 <a:s r="1566">
                                    <a:s r="1564">
                                       <a:s r="1563">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1564">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1565">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1574">
                                    <a:s>exists</a:s>
                                    <a:s r="1573">
                                       <a:s>(</a:s>
                                       <a:s r="1573">
                                          <a:s>
                                             <a:s r="1568">
                                                <a:s r="1567">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1572">
                                             <a:s>where </a:s>
                                             <a:s r="1572">
                                                <a:s r="1569">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1571">
                                                   <a:s r="1570">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1571">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1580">
                                 <a:s r="1577">
                                    <a:s r="1576">
                                       <a:s>MS</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1577">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="1579">
                                    <a:s r="1578">
                                       <a:s>HC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1579">
                                       <a:s>&quot;CAB-LA - HIV.C.DE23&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1583" locator="490:3-494:3" xsi:type="Exists">
            <operand localId="1582" locator="490:9-494:3" xsi:type="Query">
               <source localId="1562" locator="490:10-490:33" alias="MS">
                  <expression localId="1561" locator="490:10-490:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1581" locator="491:5-493:48" xsi:type="And">
                  <operand localId="1575" locator="491:11-492:64" xsi:type="And">
                     <operand localId="1566" locator="491:11-491:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1564" locator="491:11-491:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1565" locator="491:23-491:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1574" locator="492:9-492:64" xsi:type="Exists">
                        <operand localId="1573" locator="492:15-492:64" xsi:type="Query">
                           <source localId="1568" locator="492:16-492:30" alias="C">
                              <expression localId="1567" locator="492:16-492:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1572" locator="492:32-492:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1569" locator="492:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1571" locator="492:42-492:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1580" locator="493:9-493:48" xsi:type="Equivalent">
                     <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:CodeableConcept" xsi:type="As">
                           <operand localId="1577" locator="493:9-493:21" path="medication" scope="MS" xsi:type="Property"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToConcept">
                        <operand localId="1579" locator="493:25-493:48" name="CAB-LA - HIV.C.DE23" libraryName="HC" xsi:type="CodeRef"/>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1611" locator="496:3-501:3" name="PREP first time" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1611">
               <a:s>define &quot;PREP first time&quot;:
  </a:s>
               <a:s r="1610">
                  <a:s>exists</a:s>
                  <a:s r="1609">
                     <a:s>(</a:s>
                     <a:s r="1609">
                        <a:s>
                           <a:s r="1586">
                              <a:s r="1585">
                                 <a:s r="1585">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1608">
                           <a:s>where </a:s>
                           <a:s r="1608">
                              <a:s r="1599">
                                 <a:s r="1590">
                                    <a:s r="1588">
                                       <a:s r="1587">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1588">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1589">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1598">
                                    <a:s>exists</a:s>
                                    <a:s r="1597">
                                       <a:s>(</a:s>
                                       <a:s r="1597">
                                          <a:s>
                                             <a:s r="1592">
                                                <a:s r="1591">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1596">
                                             <a:s>where </a:s>
                                             <a:s r="1596">
                                                <a:s r="1593">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1595">
                                                   <a:s r="1594">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1595">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1607">
                                 <a:s>exists</a:s>
                                 <a:s r="1606">
                                    <a:s>(</a:s>
                                    <a:s r="1606">
                                       <a:s>
                                          <a:s r="1601">
                                             <a:s r="1600">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1605">
                                          <a:s>where </a:s>
                                          <a:s r="1605">
                                             <a:s r="1602">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1604">
                                                <a:s r="1603">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1604">
                                                   <a:s>&quot;First-time user - HIV.C.DE25&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1610" locator="497:3-501:3" xsi:type="Exists">
            <operand localId="1609" locator="497:9-501:3" xsi:type="Query">
               <source localId="1586" locator="497:10-497:33" alias="MS">
                  <expression localId="1585" locator="497:10-497:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1608" locator="498:5-500:79" xsi:type="And">
                  <operand localId="1599" locator="498:11-499:64" xsi:type="And">
                     <operand localId="1590" locator="498:11-498:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1588" locator="498:11-498:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1589" locator="498:23-498:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1598" locator="499:9-499:64" xsi:type="Exists">
                        <operand localId="1597" locator="499:15-499:64" xsi:type="Query">
                           <source localId="1592" locator="499:16-499:30" alias="C">
                              <expression localId="1591" locator="499:16-499:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1596" locator="499:32-499:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1593" locator="499:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1595" locator="499:42-499:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1607" locator="500:9-500:79" xsi:type="Exists">
                     <operand localId="1606" locator="500:15-500:79" xsi:type="Query">
                        <source localId="1601" locator="500:16-500:33" alias="SR">
                           <expression localId="1600" locator="500:16-500:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1605" locator="500:35-500:78" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1602" locator="500:41-500:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1604" locator="500:46-500:78" name="First-time user - HIV.C.DE25" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1638" locator="503:3-508:3" name="PREP Continuing user" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1638">
               <a:s>define &quot;PREP Continuing user&quot;:
  </a:s>
               <a:s r="1637">
                  <a:s>exists</a:s>
                  <a:s r="1636">
                     <a:s>(</a:s>
                     <a:s r="1636">
                        <a:s>
                           <a:s r="1613">
                              <a:s r="1612">
                                 <a:s r="1612">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1635">
                           <a:s>where </a:s>
                           <a:s r="1635">
                              <a:s r="1626">
                                 <a:s r="1617">
                                    <a:s r="1615">
                                       <a:s r="1614">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1615">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1616">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1625">
                                    <a:s>exists</a:s>
                                    <a:s r="1624">
                                       <a:s>(</a:s>
                                       <a:s r="1624">
                                          <a:s>
                                             <a:s r="1619">
                                                <a:s r="1618">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1623">
                                             <a:s>where </a:s>
                                             <a:s r="1623">
                                                <a:s r="1620">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1622">
                                                   <a:s r="1621">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1622">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1634">
                                 <a:s>exists</a:s>
                                 <a:s r="1633">
                                    <a:s>(</a:s>
                                    <a:s r="1633">
                                       <a:s>
                                          <a:s r="1628">
                                             <a:s r="1627">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1632">
                                          <a:s>where </a:s>
                                          <a:s r="1632">
                                             <a:s r="1629">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1631">
                                                <a:s r="1630">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1631">
                                                   <a:s>&quot;Continuing user&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1637" locator="504:3-508:3" xsi:type="Exists">
            <operand localId="1636" locator="504:9-508:3" xsi:type="Query">
               <source localId="1613" locator="504:10-504:33" alias="MS">
                  <expression localId="1612" locator="504:10-504:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1635" locator="505:5-507:66" xsi:type="And">
                  <operand localId="1626" locator="505:11-506:64" xsi:type="And">
                     <operand localId="1617" locator="505:11-505:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1615" locator="505:11-505:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1616" locator="505:23-505:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1625" locator="506:9-506:64" xsi:type="Exists">
                        <operand localId="1624" locator="506:15-506:64" xsi:type="Query">
                           <source localId="1619" locator="506:16-506:30" alias="C">
                              <expression localId="1618" locator="506:16-506:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1623" locator="506:32-506:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1620" locator="506:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1622" locator="506:42-506:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1634" locator="507:9-507:66" xsi:type="Exists">
                     <operand localId="1633" locator="507:15-507:66" xsi:type="Query">
                        <source localId="1628" locator="507:16-507:33" alias="SR">
                           <expression localId="1627" locator="507:16-507:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1632" locator="507:35-507:65" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1629" locator="507:41-507:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1631" locator="507:46-507:65" name="Continuing user" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1665" locator="510:3-515:3" name="PREP Restarting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1665">
               <a:s>define &quot;PREP Restarting&quot;:
  </a:s>
               <a:s r="1664">
                  <a:s>exists</a:s>
                  <a:s r="1663">
                     <a:s>(</a:s>
                     <a:s r="1663">
                        <a:s>
                           <a:s r="1640">
                              <a:s r="1639">
                                 <a:s r="1639">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1662">
                           <a:s>where </a:s>
                           <a:s r="1662">
                              <a:s r="1653">
                                 <a:s r="1644">
                                    <a:s r="1642">
                                       <a:s r="1641">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1642">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1643">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1652">
                                    <a:s>exists</a:s>
                                    <a:s r="1651">
                                       <a:s>(</a:s>
                                       <a:s r="1651">
                                          <a:s>
                                             <a:s r="1646">
                                                <a:s r="1645">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1650">
                                             <a:s>where </a:s>
                                             <a:s r="1650">
                                                <a:s r="1647">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1649">
                                                   <a:s r="1648">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1649">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1661">
                                 <a:s>exists</a:s>
                                 <a:s r="1660">
                                    <a:s>(</a:s>
                                    <a:s r="1660">
                                       <a:s>
                                          <a:s r="1655">
                                             <a:s r="1654">
                                                <a:s>
                                                   <a:s>MS.statusReason</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> SR</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1659">
                                          <a:s>where </a:s>
                                          <a:s r="1659">
                                             <a:s r="1656">
                                                <a:s>SR</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1658">
                                                <a:s r="1657">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1658">
                                                   <a:s>&quot;Restarting following a period of not taking PrEP&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1664" locator="511:3-515:3" xsi:type="Exists">
            <operand localId="1663" locator="511:9-515:3" xsi:type="Query">
               <source localId="1640" locator="511:10-511:33" alias="MS">
                  <expression localId="1639" locator="511:10-511:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1662" locator="512:5-514:99" xsi:type="And">
                  <operand localId="1653" locator="512:11-513:64" xsi:type="And">
                     <operand localId="1644" locator="512:11-512:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1642" locator="512:11-512:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1643" locator="512:23-512:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1652" locator="513:9-513:64" xsi:type="Exists">
                        <operand localId="1651" locator="513:15-513:64" xsi:type="Query">
                           <source localId="1646" locator="513:16-513:30" alias="C">
                              <expression localId="1645" locator="513:16-513:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1650" locator="513:32-513:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1647" locator="513:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1649" locator="513:42-513:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1661" locator="514:9-514:99" xsi:type="Exists">
                     <operand localId="1660" locator="514:15-514:99" xsi:type="Query">
                        <source localId="1655" locator="514:16-514:33" alias="SR">
                           <expression localId="1654" locator="514:16-514:30" path="statusReason" scope="MS" xsi:type="Property"/>
                        </source>
                        <where localId="1659" locator="514:35-514:98" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1656" locator="514:41-514:42" name="SR" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1658" locator="514:46-514:98" name="Restarting following a period of not taking PrEP" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1692" locator="517:3-522:3" name="Daily_oral_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1692">
               <a:s>define &quot;Daily_oral_PrEP&quot;:
  </a:s>
               <a:s r="1691">
                  <a:s>exists</a:s>
                  <a:s r="1690">
                     <a:s>(</a:s>
                     <a:s r="1690">
                        <a:s>
                           <a:s r="1667">
                              <a:s r="1666">
                                 <a:s r="1666">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1689">
                           <a:s>where </a:s>
                           <a:s r="1689">
                              <a:s r="1680">
                                 <a:s r="1671">
                                    <a:s r="1669">
                                       <a:s r="1668">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1669">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1670">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1679">
                                    <a:s>exists</a:s>
                                    <a:s r="1678">
                                       <a:s>(</a:s>
                                       <a:s r="1678">
                                          <a:s>
                                             <a:s r="1673">
                                                <a:s r="1672">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1677">
                                             <a:s>where </a:s>
                                             <a:s r="1677">
                                                <a:s r="1674">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1676">
                                                   <a:s r="1675">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1676">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1688">
                                 <a:s>exists</a:s>
                                 <a:s r="1687">
                                    <a:s>(</a:s>
                                    <a:s r="1687">
                                       <a:s>
                                          <a:s r="1682">
                                             <a:s r="1681">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1686">
                                          <a:s>where </a:s>
                                          <a:s r="1686">
                                             <a:s r="1683">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1685">
                                                <a:s r="1684">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1685">
                                                   <a:s>&quot;Daily oral PrEP&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1691" locator="518:3-522:3" xsi:type="Exists">
            <operand localId="1690" locator="518:9-522:3" xsi:type="Query">
               <source localId="1667" locator="518:10-518:33" alias="MS">
                  <expression localId="1666" locator="518:10-518:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1689" locator="519:5-521:82" xsi:type="And">
                  <operand localId="1680" locator="519:11-520:64" xsi:type="And">
                     <operand localId="1671" locator="519:11-519:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1669" locator="519:11-519:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1670" locator="519:23-519:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1679" locator="520:9-520:64" xsi:type="Exists">
                        <operand localId="1678" locator="520:15-520:64" xsi:type="Query">
                           <source localId="1673" locator="520:16-520:30" alias="C">
                              <expression localId="1672" locator="520:16-520:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1677" locator="520:32-520:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1674" locator="520:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1676" locator="520:42-520:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1688" locator="521:9-521:82" xsi:type="Exists">
                     <operand localId="1687" locator="521:15-521:82" xsi:type="Query">
                        <source localId="1682" locator="521:16-521:49" alias="AI">
                           <expression localId="1681" locator="521:16-521:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1686" locator="521:51-521:81" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1683" locator="521:57-521:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1685" locator="521:62-521:81" name="Daily oral PrEP" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1719" locator="524:3-529:3" name="Event_driven_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1719">
               <a:s>define &quot;Event_driven_PrEP&quot;:
  </a:s>
               <a:s r="1718">
                  <a:s>exists</a:s>
                  <a:s r="1717">
                     <a:s>(</a:s>
                     <a:s r="1717">
                        <a:s>
                           <a:s r="1694">
                              <a:s r="1693">
                                 <a:s r="1693">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1716">
                           <a:s>where </a:s>
                           <a:s r="1716">
                              <a:s r="1707">
                                 <a:s r="1698">
                                    <a:s r="1696">
                                       <a:s r="1695">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1696">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1697">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1706">
                                    <a:s>exists</a:s>
                                    <a:s r="1705">
                                       <a:s>(</a:s>
                                       <a:s r="1705">
                                          <a:s>
                                             <a:s r="1700">
                                                <a:s r="1699">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1704">
                                             <a:s>where </a:s>
                                             <a:s r="1704">
                                                <a:s r="1701">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1703">
                                                   <a:s r="1702">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1703">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1715">
                                 <a:s>exists</a:s>
                                 <a:s r="1714">
                                    <a:s>(</a:s>
                                    <a:s r="1714">
                                       <a:s>
                                          <a:s r="1709">
                                             <a:s r="1708">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1713">
                                          <a:s>where </a:s>
                                          <a:s r="1713">
                                             <a:s r="1710">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1712">
                                                <a:s r="1711">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1712">
                                                   <a:s>&quot;Event-driven PrEP 2+1+1&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1718" locator="525:3-529:3" xsi:type="Exists">
            <operand localId="1717" locator="525:9-529:3" xsi:type="Query">
               <source localId="1694" locator="525:10-525:33" alias="MS">
                  <expression localId="1693" locator="525:10-525:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1716" locator="526:5-528:90" xsi:type="And">
                  <operand localId="1707" locator="526:11-527:64" xsi:type="And">
                     <operand localId="1698" locator="526:11-526:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1696" locator="526:11-526:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1697" locator="526:23-526:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1706" locator="527:9-527:64" xsi:type="Exists">
                        <operand localId="1705" locator="527:15-527:64" xsi:type="Query">
                           <source localId="1700" locator="527:16-527:30" alias="C">
                              <expression localId="1699" locator="527:16-527:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1704" locator="527:32-527:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1701" locator="527:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1703" locator="527:42-527:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1715" locator="528:9-528:90" xsi:type="Exists">
                     <operand localId="1714" locator="528:15-528:90" xsi:type="Query">
                        <source localId="1709" locator="528:16-528:49" alias="AI">
                           <expression localId="1708" locator="528:16-528:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1713" locator="528:51-528:89" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1710" locator="528:57-528:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1712" locator="528:62-528:89" name="Event-driven PrEP 2+1+1" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1746" locator="531:3-536:3" name="other_dosing_PrEP" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1746">
               <a:s>define &quot;other_dosing_PrEP&quot;:
  </a:s>
               <a:s r="1745">
                  <a:s>exists</a:s>
                  <a:s r="1744">
                     <a:s>(</a:s>
                     <a:s r="1744">
                        <a:s>
                           <a:s r="1721">
                              <a:s r="1720">
                                 <a:s r="1720">
                                    <a:s>[MedicationStatement]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> MS</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    </a:s>
                        <a:s r="1743">
                           <a:s>where </a:s>
                           <a:s r="1743">
                              <a:s r="1734">
                                 <a:s r="1725">
                                    <a:s r="1723">
                                       <a:s r="1722">
                                          <a:s>MS</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1723">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="1724">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
    and </a:s>
                                 <a:s r="1733">
                                    <a:s>exists</a:s>
                                    <a:s r="1732">
                                       <a:s>(</a:s>
                                       <a:s r="1732">
                                          <a:s>
                                             <a:s r="1727">
                                                <a:s r="1726">
                                                   <a:s>
                                                      <a:s>MS.reasonCode</a:s>
                                                   </a:s>
                                                </a:s>
                                                <a:s> C</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> </a:s>
                                          <a:s r="1731">
                                             <a:s>where </a:s>
                                             <a:s r="1731">
                                                <a:s r="1728">
                                                   <a:s>C</a:s>
                                                </a:s>
                                                <a:s> ~ </a:s>
                                                <a:s r="1730">
                                                   <a:s r="1729">
                                                      <a:s>HC</a:s>
                                                   </a:s>
                                                   <a:s>.</a:s>
                                                   <a:s r="1730">
                                                      <a:s>&quot;Currently on PrEP&quot;</a:s>
                                                   </a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
    and </a:s>
                              <a:s r="1742">
                                 <a:s>exists</a:s>
                                 <a:s r="1741">
                                    <a:s>(</a:s>
                                    <a:s r="1741">
                                       <a:s>
                                          <a:s r="1736">
                                             <a:s r="1735">
                                                <a:s>
                                                   <a:s>MS.dosage.additionalInstruction</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s> AI</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> </a:s>
                                       <a:s r="1740">
                                          <a:s>where </a:s>
                                          <a:s r="1740">
                                             <a:s r="1737">
                                                <a:s>AI</a:s>
                                             </a:s>
                                             <a:s> ~ </a:s>
                                             <a:s r="1739">
                                                <a:s r="1738">
                                                   <a:s>HC</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="1739">
                                                   <a:s>&quot;Other PrEP dosing type&quot;</a:s>
                                                </a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> 
  )</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1745" locator="532:3-536:3" xsi:type="Exists">
            <operand localId="1744" locator="532:9-536:3" xsi:type="Query">
               <source localId="1721" locator="532:10-532:33" alias="MS">
                  <expression localId="1720" locator="532:10-532:30" dataType="fhir:MedicationStatement" templateId="http://hl7.org/fhir/StructureDefinition/MedicationStatement" xsi:type="Retrieve"/>
               </source>
               <where localId="1743" locator="533:5-535:89" xsi:type="And">
                  <operand localId="1734" locator="533:11-534:64" xsi:type="And">
                     <operand localId="1725" locator="533:11-533:33" xsi:type="Equal">
                        <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="1723" locator="533:11-533:19" path="status" scope="MS" xsi:type="Property"/>
                        </operand>
                        <operand localId="1724" locator="533:23-533:33" valueType="t:String" value="completed" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1733" locator="534:9-534:64" xsi:type="Exists">
                        <operand localId="1732" locator="534:15-534:64" xsi:type="Query">
                           <source localId="1727" locator="534:16-534:30" alias="C">
                              <expression localId="1726" locator="534:16-534:28" path="reasonCode" scope="MS" xsi:type="Property"/>
                           </source>
                           <where localId="1731" locator="534:32-534:63" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="1728" locator="534:38" name="C" xsi:type="AliasRef"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="1730" locator="534:42-534:63" name="Currently on PrEP" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </where>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1742" locator="535:9-535:89" xsi:type="Exists">
                     <operand localId="1741" locator="535:15-535:89" xsi:type="Query">
                        <source localId="1736" locator="535:16-535:49" alias="AI">
                           <expression localId="1735" locator="535:16-535:46" xsi:type="Flatten">
                              <operand xsi:type="Query">
                                 <source alias="$this">
                                    <expression path="dosage" scope="MS" xsi:type="Property"/>
                                 </source>
                                 <where xsi:type="Not">
                                    <operand xsi:type="IsNull">
                                       <operand path="additionalInstruction" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </operand>
                                    </operand>
                                 </where>
                                 <return distinct="false">
                                    <expression path="additionalInstruction" xsi:type="Property">
                                       <source name="$this" xsi:type="AliasRef"/>
                                    </expression>
                                 </return>
                              </operand>
                           </expression>
                        </source>
                        <where localId="1740" locator="535:51-535:88" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="1737" locator="535:57-535:58" name="AI" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="1739" locator="535:62-535:88" name="Other PrEP dosing type" libraryName="HC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </where>
            </operand>
         </expression>
      </def>
      <def localId="1757" locator="541:3-545:3" name="setting" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1757">
               <a:s>define setting:
  </a:s>
               <a:s r="1756">
                  <a:s>List&lt;</a:s>
                  <a:s r="1747">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1751">
                     <a:s>if </a:s>
                     <a:s r="1748">
                        <a:s>Community_testing</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1749">
                        <a:s>'Community-level testing'</a:s>
                     </a:s>
                     <a:s r="1750"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1755">
                     <a:s>if </a:s>
                     <a:s r="1752">
                        <a:s>Facility_testing</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1753">
                        <a:s>'Facility-level testing'</a:s>
                     </a:s>
                     <a:s r="1754"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1756" locator="542:3-545:3" xsi:type="List">
            <element localId="1751" locator="543:5-543:65" xsi:type="If">
               <condition localId="1748" locator="543:8-543:24" name="Community_testing" xsi:type="ExpressionRef"/>
               <then localId="1749" locator="543:31-543:55" valueType="t:String" value="Community-level testing" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1750" locator="543:62-543:65" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1755" locator="544:5-544:63" xsi:type="If">
               <condition localId="1752" locator="544:8-544:23" name="Facility_testing" xsi:type="ExpressionRef"/>
               <then localId="1753" locator="544:30-544:53" valueType="t:String" value="Facility-level testing" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1754" locator="544:60-544:63" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1764" locator="547:3-550:3" name="anc" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1764">
               <a:s>define anc:
  </a:s>
               <a:s r="1763">
                  <a:s>List&lt;</a:s>
                  <a:s r="1758">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1762">
                     <a:s>if </a:s>
                     <a:s r="1759">
                        <a:s>ANC_case</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1760">
                        <a:s>'ANC case'</a:s>
                     </a:s>
                     <a:s r="1761"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1763" locator="548:3-550:3" xsi:type="List">
            <element localId="1762" locator="549:5-549:41" xsi:type="If">
               <condition localId="1759" locator="549:8-549:15" name="ANC_case" xsi:type="ExpressionRef"/>
               <then localId="1760" locator="549:22-549:31" valueType="t:String" value="ANC case" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1761" locator="549:38-549:41" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1775" locator="552:3-556:3" name="tb" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1775">
               <a:s>define tb:
  </a:s>
               <a:s r="1774">
                  <a:s>List&lt;</a:s>
                  <a:s r="1765">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1769">
                     <a:s>if </a:s>
                     <a:s r="1766">
                        <a:s>TB_diagnosed</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1767">
                        <a:s>'Diagnosed TB'</a:s>
                     </a:s>
                     <a:s r="1768"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1773">
                     <a:s>if </a:s>
                     <a:s r="1770">
                        <a:s>TB_presumptive</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1771">
                        <a:s>'Presumptive TB'</a:s>
                     </a:s>
                     <a:s r="1772"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1774" locator="553:3-556:3" xsi:type="List">
            <element localId="1769" locator="554:5-554:49" xsi:type="If">
               <condition localId="1766" locator="554:8-554:19" name="TB_diagnosed" xsi:type="ExpressionRef"/>
               <then localId="1767" locator="554:26-554:39" valueType="t:String" value="Diagnosed TB" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1768" locator="554:46-554:49" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1773" locator="555:5-555:53" xsi:type="If">
               <condition localId="1770" locator="555:8-555:21" name="TB_presumptive" xsi:type="ExpressionRef"/>
               <then localId="1771" locator="555:28-555:43" valueType="t:String" value="Presumptive TB" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1772" locator="555:50-555:53" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1790" locator="558:3-563:3" name="prep_product" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1790">
               <a:s>define prep_product:
  </a:s>
               <a:s r="1789">
                  <a:s>List&lt;</a:s>
                  <a:s r="1776">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1780">
                     <a:s>if </a:s>
                     <a:s r="1777">
                        <a:s>`PREP Product Oral`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1778">
                        <a:s>'PREP Product Oral'</a:s>
                     </a:s>
                     <a:s r="1779"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1784">
                     <a:s>if </a:s>
                     <a:s r="1781">
                        <a:s>`PREP Product long-acting device`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1782">
                        <a:s>'PREP Product long-acting device'</a:s>
                     </a:s>
                     <a:s r="1783"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1788">
                     <a:s>if </a:s>
                     <a:s r="1785">
                        <a:s>`PREP Product long-acting injectable`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1786">
                        <a:s>'PREP Product long-acting injectable'</a:s>
                     </a:s>
                     <a:s r="1787"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1789" locator="559:3-563:3" xsi:type="List">
            <element localId="1780" locator="560:5-560:61" xsi:type="If">
               <condition localId="1777" locator="560:8-560:26" name="PREP Product Oral" xsi:type="ExpressionRef"/>
               <then localId="1778" locator="560:33-560:51" valueType="t:String" value="PREP Product Oral" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1779" locator="560:58-560:61" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1784" locator="561:5-561:89" xsi:type="If">
               <condition localId="1781" locator="561:8-561:40" name="PREP Product long-acting device" xsi:type="ExpressionRef"/>
               <then localId="1782" locator="561:47-561:79" valueType="t:String" value="PREP Product long-acting device" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1783" locator="561:86-561:89" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1788" locator="562:5-562:97" xsi:type="If">
               <condition localId="1785" locator="562:8-562:44" name="PREP Product long-acting injectable" xsi:type="ExpressionRef"/>
               <then localId="1786" locator="562:51-562:87" valueType="t:String" value="PREP Product long-acting injectable" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1787" locator="562:94-562:97" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1805" locator="565:3-570:3" name="prep_experience" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1805">
               <a:s>define prep_experience:
  </a:s>
               <a:s r="1804">
                  <a:s>List&lt;</a:s>
                  <a:s r="1791">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1795">
                     <a:s>if </a:s>
                     <a:s r="1792">
                        <a:s>`PREP first time`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1793">
                        <a:s>'PREP first time'</a:s>
                     </a:s>
                     <a:s r="1794"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1799">
                     <a:s>if </a:s>
                     <a:s r="1796">
                        <a:s>`PREP Continuing user`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1797">
                        <a:s>'PREP Continuing user'</a:s>
                     </a:s>
                     <a:s r="1798"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1803">
                     <a:s>if </a:s>
                     <a:s r="1800">
                        <a:s>`PREP Restarting`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1801">
                        <a:s>'PREP Restarting'</a:s>
                     </a:s>
                     <a:s r="1802"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1804" locator="566:3-570:3" xsi:type="List">
            <element localId="1795" locator="567:5-567:57" xsi:type="If">
               <condition localId="1792" locator="567:8-567:24" name="PREP first time" xsi:type="ExpressionRef"/>
               <then localId="1793" locator="567:31-567:47" valueType="t:String" value="PREP first time" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1794" locator="567:54-567:57" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1799" locator="568:5-568:67" xsi:type="If">
               <condition localId="1796" locator="568:8-568:29" name="PREP Continuing user" xsi:type="ExpressionRef"/>
               <then localId="1797" locator="568:36-568:57" valueType="t:String" value="PREP Continuing user" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1798" locator="568:64-568:67" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1803" locator="569:5-569:57" xsi:type="If">
               <condition localId="1800" locator="569:8-569:24" name="PREP Restarting" xsi:type="ExpressionRef"/>
               <then localId="1801" locator="569:31-569:47" valueType="t:String" value="PREP Restarting" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1802" locator="569:54-569:57" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1820" locator="572:3-577:3" name="prep_dosing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="1820">
               <a:s>define prep_dosing:
  </a:s>
               <a:s r="1819">
                  <a:s>List&lt;</a:s>
                  <a:s r="1806">
                     <a:s>String</a:s>
                  </a:s>
                  <a:s>>{
    </a:s>
                  <a:s r="1810">
                     <a:s>if </a:s>
                     <a:s r="1807">
                        <a:s>`Daily_oral_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1808">
                        <a:s>'Daily oral PrEP'</a:s>
                     </a:s>
                     <a:s r="1809"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1814">
                     <a:s>if </a:s>
                     <a:s r="1811">
                        <a:s>`Event_driven_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1812">
                        <a:s>'Event driven PrEP'</a:s>
                     </a:s>
                     <a:s r="1813"> else null</a:s>
                  </a:s>
                  <a:s>,
    </a:s>
                  <a:s r="1818">
                     <a:s>if </a:s>
                     <a:s r="1815">
                        <a:s>`other_dosing_PrEP`</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="1816">
                        <a:s>'Other PrEP dosing type'</a:s>
                     </a:s>
                     <a:s r="1817"> else null</a:s>
                  </a:s>
                  <a:s>
  }</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1819" locator="573:3-577:3" xsi:type="List">
            <element localId="1810" locator="574:5-574:57" xsi:type="If">
               <condition localId="1807" locator="574:8-574:24" name="Daily_oral_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1808" locator="574:31-574:47" valueType="t:String" value="Daily oral PrEP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1809" locator="574:54-574:57" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1814" locator="575:5-575:61" xsi:type="If">
               <condition localId="1811" locator="575:8-575:26" name="Event_driven_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1812" locator="575:33-575:51" valueType="t:String" value="Event driven PrEP" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1813" locator="575:58-575:61" xsi:type="Null"/>
               </else>
            </element>
            <element localId="1818" locator="576:5-576:66" xsi:type="If">
               <condition localId="1815" locator="576:8-576:26" name="other_dosing_PrEP" xsi:type="ExpressionRef"/>
               <then localId="1816" locator="576:33-576:56" valueType="t:String" value="Other PrEP dosing type" xsi:type="Literal"/>
               <else asType="t:String" xsi:type="As">
                  <operand localId="1817" locator="576:63-576:66" xsi:type="Null"/>
               </else>
            </element>
         </expression>
      </def>
      <def localId="1901" locator="654:1-665:7" name="GetDurationInDays" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1901">
               <a:s>//need to add Time to start ART (within 7, 30 or 90 days of diagnosis, as per country guidelines)
//need to add Disaggregation by time since diagnosis
  


/* 
* DAK has codes for HAART misspecified 
* ICD-10 Z92.2	Other prophylactic chemotherapy		
* LOINC &quot;54825-5	&quot;	On scheduled pain medication regimen in last 7 days
*
* Should discuss 
*/







/*
* Kenya EMR defined as HIV positive condition
* Will need to discuss if produce flags through conditions for concepts to use in indicator calculation such as HIV positive and On ART
* However, we have moved forward with a more prescriptive approach 
* Inevitably our approach requires that certain data elements be available
*/

/*
 * HIV Treatment during the measurement period
 * uses dosage and dispensation amount to estimate last day of medication
 * medication should be dispensed before end of measurement period
 * medication should last until after 28 days after the end of the measurement period
 * This takes into account lost to follow up
 */

/*
*define &quot;HIV Treatment during the measurement period&quot;:
*   [MedicationDispense] MD
*    where MD.status in { 'final', 'amended', 'corrected' }
*    and MD.medication ~ 'Antiretroviral'
*    and MD.whenHandedOver before end of &quot;Measurement Period&quot;
*    and (MD.whenHandedOver + MD.dosageInstruction[0].timing.repeat.duration.value * MedicationDispense.quantity.value) after (measurementPeriod.end - 28 days)
*/ 

/*
* Immunization defines HAART as
*  exists([MedicationAdministration] A where ExtractMedicationCode(A.medication) in IMMZc.&quot;ARV Drugs&quot; and A.status = 'in-progress')
* I believe this is the incorrect resource unless they mean to say that medication is given during a medical encounter
* would like to discuss 
*/ 

/** 
 * Patient Deceased During Measurement Period
 * Immunization defines this as true when is a boolean. This may have the effect of deleting a person from indicators in all calculations
 * Should intend to use when patient.deceased FHIR boolean was updated to TRUE if no other date is available
 * Kenya EMR example does not account for when deceased is just a boolean
 */


/*
define &quot;PREP Prescription Days&quot;:
  Sum(
    (
      collapse (
        [MedicationRequest] MR
          where MR.status = 'completed'
          and MR.intent = 'order'
          and MR.medication ~ HC.&quot;PrEP for HIV prevention&quot;
        return WComV2.&quot;Prescription Relevant Period&quot;( MR ) intersect &quot;Measurement Period&quot;
      )
    ) PREPUseInterval
      return days between start of PREPUseInterval and end of PREPUseInterval
  )
*/


define function GetDurationInDays(value FHIR.Duration): // returns Decimal:
    </a:s>
               <a:s r="1900">
                  <a:s r="1900">
                     <a:s>case </a:s>
                     <a:s r="1824">
                        <a:s r="1823">
                           <a:s r="1822">
                              <a:s>value</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1823">
                              <a:s>code</a:s>
                           </a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1824">
                           <a:s>value</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1830">
                        <a:s>when </a:s>
                        <a:s r="1825">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1829">
                           <a:s r="1827">
                              <a:s r="1826">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1827">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1828"> * 365.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1837">
                        <a:s>when </a:s>
                        <a:s r="1831">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1836">
                           <a:s r="1834">
                              <a:s r="1833">
                                 <a:s r="1832">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1833">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1834">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1835"> * 30.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1844">
                        <a:s>when </a:s>
                        <a:s r="1838">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1843">
                           <a:s r="1841">
                              <a:s r="1840">
                                 <a:s r="1839">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1840">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1841">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1842"> * 7.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1849">
                        <a:s>when </a:s>
                        <a:s r="1845">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1848">
                           <a:s r="1847">
                              <a:s r="1846">
                                 <a:s>value</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1847">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="1848">
                              <a:s>value</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1856">
                        <a:s>when </a:s>
                        <a:s r="1850">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1855">
                           <a:s r="1853">
                              <a:s r="1852">
                                 <a:s r="1851">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1852">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1853">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1854"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1865">
                        <a:s>when </a:s>
                        <a:s r="1857">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1864">
                           <a:s r="1862">
                              <a:s r="1860">
                                 <a:s r="1859">
                                    <a:s r="1858">
                                       <a:s>value</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1859">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1860">
                                    <a:s>value</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1861"> / 60.0</a:s>
                           </a:s>
                           <a:s r="1863"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1876">
                        <a:s>when </a:s>
                        <a:s r="1866">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1875">
                           <a:s r="1873">
                              <a:s r="1871">
                                 <a:s r="1869">
                                    <a:s r="1868">
                                       <a:s r="1867">
                                          <a:s>value</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1868">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1869">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="1870"> / 60.0</a:s>
                              </a:s>
                              <a:s r="1872"> / 60.0</a:s>
                           </a:s>
                           <a:s r="1874"> / 24.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      </a:s>
                     <a:s r="1889">
                        <a:s>when </a:s>
                        <a:s r="1877">
                           <a:s>'ms'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1888">
                           <a:s r="1886">
                              <a:s r="1884">
                                 <a:s r="1882">
                                    <a:s r="1880">
                                       <a:s r="1879">
                                          <a:s r="1878">
                                             <a:s>value</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1879">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1880">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="1881"> / 60.0</a:s>
                                 </a:s>
                                 <a:s r="1883"> / 60.0</a:s>
                              </a:s>
                              <a:s r="1885"> / 24.0</a:s>
                           </a:s>
                           <a:s r="1887"> / 1000.0</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
      else </a:s>
                     <a:s r="1899">
                        <a:s r="1890">Message(1000, true, </a:s>
                        <a:s r="1892">
                           <a:s>'Undefined'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1893">
                           <a:s>'Error'</a:s>
                        </a:s>
                        <a:s>, </a:s>
                        <a:s r="1898">
                           <a:s r="1894">
                              <a:s>'Unsupported duration unit '</a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="1897">
                              <a:s r="1896">
                                 <a:s r="1895">
                                    <a:s>value</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1896">
                                    <a:s>code</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1897">
                                 <a:s>value</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>)</a:s>
                     </a:s>
                     <a:s>
    end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1900" locator="655:5-665:7" xsi:type="Case">
            <comparand localId="1824" locator="655:10-655:25" path="value" xsi:type="Property">
               <source localId="1823" locator="655:10-655:19" path="code" xsi:type="Property">
                  <source localId="1822" locator="655:10-655:14" name="value" xsi:type="OperandRef"/>
               </source>
            </comparand>
            <caseItem localId="1830" locator="656:7-656:39">
               <when localId="1825" locator="656:12-656:14" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="1829" locator="656:21-656:39" xsi:type="Multiply">
                  <operand name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1827" locator="656:21-656:31" path="value" xsi:type="Property">
                        <source localId="1826" locator="656:21-656:25" name="value" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
                  <operand localId="1828" locator="656:35-656:39" valueType="t:Decimal" value="365.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1837" locator="657:7-657:45">
               <when localId="1831" locator="657:12-657:15" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="1836" locator="657:22-657:45" xsi:type="Multiply">
                  <operand localId="1834" locator="657:22-657:38" path="value" xsi:type="Property">
                     <source localId="1833" locator="657:22-657:32" path="value" xsi:type="Property">
                        <source localId="1832" locator="657:22-657:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1835" locator="657:42-657:45" valueType="t:Decimal" value="30.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1844" locator="658:7-658:44">
               <when localId="1838" locator="658:12-658:15" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="1843" locator="658:22-658:44" xsi:type="Multiply">
                  <operand localId="1841" locator="658:22-658:38" path="value" xsi:type="Property">
                     <source localId="1840" locator="658:22-658:32" path="value" xsi:type="Property">
                        <source localId="1839" locator="658:22-658:26" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1842" locator="658:42-658:44" valueType="t:Decimal" value="7.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1849" locator="659:7-659:37">
               <when localId="1845" locator="659:12-659:14" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="1848" locator="659:21-659:37" path="value" xsi:type="Property">
                  <source localId="1847" locator="659:21-659:31" path="value" xsi:type="Property">
                     <source localId="1846" locator="659:21-659:25" name="value" xsi:type="OperandRef"/>
                  </source>
               </then>
            </caseItem>
            <caseItem localId="1856" locator="660:7-660:44">
               <when localId="1850" locator="660:12-660:14" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="1855" locator="660:21-660:44" xsi:type="Divide">
                  <operand localId="1853" locator="660:21-660:37" path="value" xsi:type="Property">
                     <source localId="1852" locator="660:21-660:31" path="value" xsi:type="Property">
                        <source localId="1851" locator="660:21-660:25" name="value" xsi:type="OperandRef"/>
                     </source>
                  </operand>
                  <operand localId="1854" locator="660:41-660:44" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1865" locator="661:7-661:53">
               <when localId="1857" locator="661:12-661:16" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="1864" locator="661:23-661:53" xsi:type="Divide">
                  <operand localId="1862" locator="661:23-661:46" xsi:type="Divide">
                     <operand localId="1860" locator="661:23-661:39" path="value" xsi:type="Property">
                        <source localId="1859" locator="661:23-661:33" path="value" xsi:type="Property">
                           <source localId="1858" locator="661:23-661:27" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                     <operand localId="1861" locator="661:43-661:46" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1863" locator="661:50-661:53" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1876" locator="662:7-662:58">
               <when localId="1866" locator="662:12-662:14" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="1875" locator="662:21-662:58" xsi:type="Divide">
                  <operand localId="1873" locator="662:21-662:51" xsi:type="Divide">
                     <operand localId="1871" locator="662:21-662:44" xsi:type="Divide">
                        <operand localId="1869" locator="662:21-662:37" path="value" xsi:type="Property">
                           <source localId="1868" locator="662:21-662:31" path="value" xsi:type="Property">
                              <source localId="1867" locator="662:21-662:25" name="value" xsi:type="OperandRef"/>
                           </source>
                        </operand>
                        <operand localId="1870" locator="662:41-662:44" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1872" locator="662:48-662:51" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1874" locator="662:55-662:58" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <caseItem localId="1889" locator="663:7-663:68">
               <when localId="1877" locator="663:12-663:15" valueType="t:String" value="ms" xsi:type="Literal"/>
               <then localId="1888" locator="663:22-663:68" xsi:type="Divide">
                  <operand localId="1886" locator="663:22-663:59" xsi:type="Divide">
                     <operand localId="1884" locator="663:22-663:52" xsi:type="Divide">
                        <operand localId="1882" locator="663:22-663:45" xsi:type="Divide">
                           <operand localId="1880" locator="663:22-663:38" path="value" xsi:type="Property">
                              <source localId="1879" locator="663:22-663:32" path="value" xsi:type="Property">
                                 <source localId="1878" locator="663:22-663:26" name="value" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                           <operand localId="1881" locator="663:42-663:45" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                        </operand>
                        <operand localId="1883" locator="663:49-663:52" valueType="t:Decimal" value="60.0" xsi:type="Literal"/>
                     </operand>
                     <operand localId="1885" locator="663:56-663:59" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                  </operand>
                  <operand localId="1887" locator="663:63-663:68" valueType="t:Decimal" value="1000.0" xsi:type="Literal"/>
               </then>
            </caseItem>
            <else xsi:type="ToDecimal">
               <operand localId="1899" locator="664:12-664:101" xsi:type="Message">
                  <source localId="1890" locator="664:20-664:23" valueType="t:Integer" value="1000" xsi:type="Literal"/>
                  <condition localId="1891" locator="664:26-664:29" valueType="t:Boolean" value="true" xsi:type="Literal"/>
                  <code localId="1892" locator="664:32-664:42" valueType="t:String" value="Undefined" xsi:type="Literal"/>
                  <severity localId="1893" locator="664:45-664:51" valueType="t:String" value="Error" xsi:type="Literal"/>
                  <message localId="1898" locator="664:54-664:100" xsi:type="Concatenate">
                     <operand localId="1894" locator="664:54-664:81" valueType="t:String" value="Unsupported duration unit " xsi:type="Literal"/>
                     <operand localId="1897" locator="664:85-664:100" path="value" xsi:type="Property">
                        <source localId="1896" locator="664:85-664:94" path="code" xsi:type="Property">
                           <source localId="1895" locator="664:85-664:89" name="value" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </message>
               </operand>
            </else>
         </expression>
         <operand name="value">
            <operandTypeSpecifier localId="1821" locator="654:41-654:53" name="fhir:Duration" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="1931" locator="667:1-676:11" name="Prescription Relevant Period" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="1931">
               <a:s>define function &quot;Prescription Relevant Period&quot;(prescription FHIR.MedicationRequest):
  </a:s>
               <a:s r="1930">
                  <a:s r="1930">
                     <a:s>if </a:s>
                     <a:s r="1914">
                        <a:s>(
    </a:s>
                        <a:s r="1914">
                           <a:s r="1909">
                              <a:s r="1905">
                                 <a:s r="1904">
                                    <a:s r="1903">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1904">
                                       <a:s>authoredOn</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                              <a:s> and </a:s>
                              <a:s r="1908">
                                 <a:s r="1907">
                                    <a:s r="1906">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1907">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> is not null</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="1913">
                              <a:s r="1912">
                                 <a:s r="1911">
                                    <a:s r="1910">
                                       <a:s>prescription</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1911">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1912">
                                    <a:s>expectedSupplyDuration</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is not null</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  )</a:s>
                     </a:s>
                     <a:s>
  then </a:s>
                     <a:s r="1928">
                        <a:s>Interval[
    </a:s>
                        <a:s r="1917">
                           <a:s>date from </a:s>
                           <a:s r="1916">
                              <a:s r="1915">
                                 <a:s>prescription</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="1916">
                                 <a:s>authoredOn</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
    </a:s>
                        <a:s r="1927">
                           <a:s r="1920">
                              <a:s>date from </a:s>
                              <a:s r="1919">
                                 <a:s r="1918">
                                    <a:s>prescription</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="1919">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> + </a:s>
                           <a:s r="1926">
                              <a:s>System.Quantity{ </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="1924">
                                    <a:s>GetDurationInDays(</a:s>
                                    <a:s r="1923">
                                       <a:s r="1922">
                                          <a:s r="1921">
                                             <a:s>prescription</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1922">
                                             <a:s>dispenseRequest</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1923">
                                          <a:s>expectedSupplyDuration</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="1925">
                                    <a:s>'days'</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  ]</a:s>
                     </a:s>
                     <a:s r="1929">
  else null</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="1930" locator="668:3-676:11" xsi:type="If">
            <condition localId="1914" locator="668:6-671:3" xsi:type="And">
               <operand localId="1909" locator="669:5-669:84" xsi:type="And">
                  <operand localId="1905" locator="669:5-669:39" xsi:type="Not">
                     <operand locator="669:5-669:39" xsi:type="IsNull">
                        <operand localId="1904" locator="669:5-669:27" path="authoredOn" xsi:type="Property">
                           <source localId="1903" locator="669:5-669:16" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1908" locator="669:45-669:84" xsi:type="Not">
                     <operand locator="669:45-669:84" xsi:type="IsNull">
                        <operand localId="1907" locator="669:45-669:72" path="dispenseRequest" xsi:type="Property">
                           <source localId="1906" locator="669:45-669:56" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
               </operand>
               <operand localId="1913" locator="670:11-670:73" xsi:type="Not">
                  <operand locator="670:11-670:73" xsi:type="IsNull">
                     <operand localId="1912" locator="670:11-670:61" path="expectedSupplyDuration" xsi:type="Property">
                        <source localId="1911" locator="670:11-670:38" path="dispenseRequest" xsi:type="Property">
                           <source localId="1910" locator="670:11-670:22" name="prescription" xsi:type="OperandRef"/>
                        </source>
                     </operand>
                  </operand>
               </operand>
            </condition>
            <then localId="1928" locator="672:8-675:3" lowClosed="true" highClosed="true" xsi:type="Interval">
               <low localId="1917" locator="673:5-673:37" xsi:type="DateFrom">
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="1916" locator="673:15-673:37" path="authoredOn" xsi:type="Property">
                        <source localId="1915" locator="673:15-673:26" name="prescription" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </low>
               <high localId="1927" locator="674:5-674:150" xsi:type="Add">
                  <operand localId="1920" locator="674:5-674:37" xsi:type="DateFrom">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="1919" locator="674:15-674:37" path="authoredOn" xsi:type="Property">
                           <source localId="1918" locator="674:15-674:26" name="prescription" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="1926" locator="674:41-674:150" classType="t:Quantity" xsi:type="Instance">
                     <element name="value">
                        <value localId="1924" locator="674:65-674:134" name="GetDurationInDays" xsi:type="FunctionRef">
                           <operand localId="1923" locator="674:83-674:133" path="expectedSupplyDuration" xsi:type="Property">
                              <source localId="1922" locator="674:83-674:110" path="dispenseRequest" xsi:type="Property">
                                 <source localId="1921" locator="674:83-674:94" name="prescription" xsi:type="OperandRef"/>
                              </source>
                           </operand>
                        </value>
                     </element>
                     <element name="unit">
                        <value localId="1925" locator="674:143-674:148" valueType="t:String" value="days" xsi:type="Literal"/>
                     </element>
                  </operand>
               </high>
            </then>
            <else xsi:type="As">
               <operand localId="1929" locator="676:8-676:11" xsi:type="Null"/>
               <asTypeSpecifier xsi:type="IntervalTypeSpecifier">
                  <pointType name="t:Date" xsi:type="NamedTypeSpecifier"/>
               </asTypeSpecifier>
            </else>
         </expression>
         <operand name="prescription">
            <operandTypeSpecifier localId="1902" locator="667:61-667:82" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2166" locator="679:1-703:5" name="ToDaily" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2166">
               <a:s>//System.Integer
define function ToDaily(frequency System.Integer, period System.Quantity):
  </a:s>
               <a:s r="2165">
                  <a:s r="2165">
                     <a:s>case </a:s>
                     <a:s r="1935">
                        <a:s r="1934">
                           <a:s>period</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="1935">
                           <a:s>unit</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1943">
                        <a:s>when </a:s>
                        <a:s r="1936">
                           <a:s>'h'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1942">
                           <a:s r="1937">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="1941">
                              <a:s>(</a:s>
                              <a:s r="1941">
                                 <a:s r="1938">24.0 / </a:s>
                                 <a:s r="1940">
                                    <a:s r="1939">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="1940">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1953">
                        <a:s>when </a:s>
                        <a:s r="1944">
                           <a:s>'min'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1952">
                           <a:s r="1950">
                              <a:s r="1945">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1949">
                                 <a:s>(</a:s>
                                 <a:s r="1949">
                                    <a:s r="1946">24.0 / </a:s>
                                    <a:s r="1948">
                                       <a:s r="1947">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1948">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1951"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1965">
                        <a:s>when </a:s>
                        <a:s r="1954">
                           <a:s>'s'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1964">
                           <a:s r="1962">
                              <a:s r="1960">
                                 <a:s r="1955">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="1959">
                                    <a:s>(</a:s>
                                    <a:s r="1959">
                                       <a:s r="1956">24.0 / </a:s>
                                       <a:s r="1958">
                                          <a:s r="1957">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="1958">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="1961"> * 60</a:s>
                           </a:s>
                           <a:s r="1963"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1975">
                        <a:s>when </a:s>
                        <a:s r="1966">
                           <a:s>'d'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1974">
                           <a:s r="1972">
                              <a:s r="1967">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1971">
                                 <a:s>(</a:s>
                                 <a:s r="1971">
                                    <a:s r="1968">24.0 / </a:s>
                                    <a:s r="1970">
                                       <a:s r="1969">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1970">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="1973"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1987">
                        <a:s>when </a:s>
                        <a:s r="1976">
                           <a:s>'wk'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1986">
                           <a:s r="1982">
                              <a:s r="1977">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1981">
                                 <a:s>(</a:s>
                                 <a:s r="1981">
                                    <a:s r="1978">24.0 / </a:s>
                                    <a:s r="1980">
                                       <a:s r="1979">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1980">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1985">
                              <a:s>(</a:s>
                              <a:s r="1985">
                                 <a:s r="1983">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="1999">
                        <a:s>when </a:s>
                        <a:s r="1988">
                           <a:s>'mo'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="1998">
                           <a:s r="1994">
                              <a:s r="1989">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="1993">
                                 <a:s>(</a:s>
                                 <a:s r="1993">
                                    <a:s r="1990">24.0 / </a:s>
                                    <a:s r="1992">
                                       <a:s r="1991">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="1992">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="1997">
                              <a:s>(</a:s>
                              <a:s r="1997">
                                 <a:s r="1995">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="2011">
                        <a:s>when </a:s>
                        <a:s r="2000">
                           <a:s>'a'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2010">
                           <a:s r="2006">
                              <a:s r="2001">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2005">
                                 <a:s>(</a:s>
                                 <a:s r="2005">
                                    <a:s r="2002">24.0 / </a:s>
                                    <a:s r="2004">
                                       <a:s r="2003">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2004">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2009">
                              <a:s>(</a:s>
                              <a:s r="2009">
                                 <a:s r="2007">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="2019">
                        <a:s>when </a:s>
                        <a:s r="2012">
                           <a:s>'hour'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2018">
                           <a:s r="2013">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="2017">
                              <a:s>(</a:s>
                              <a:s r="2017">
                                 <a:s r="2014">24.0 / </a:s>
                                 <a:s r="2016">
                                    <a:s r="2015">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2016">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2029">
                        <a:s>when </a:s>
                        <a:s r="2020">
                           <a:s>'minute'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2028">
                           <a:s r="2026">
                              <a:s r="2021">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2025">
                                 <a:s>(</a:s>
                                 <a:s r="2025">
                                    <a:s r="2022">24.0 / </a:s>
                                    <a:s r="2024">
                                       <a:s r="2023">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2024">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2027"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2041">
                        <a:s>when </a:s>
                        <a:s r="2030">
                           <a:s>'second'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2040">
                           <a:s r="2038">
                              <a:s r="2036">
                                 <a:s r="2031">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="2035">
                                    <a:s>(</a:s>
                                    <a:s r="2035">
                                       <a:s r="2032">24.0 / </a:s>
                                       <a:s r="2034">
                                          <a:s r="2033">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2034">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2037"> * 60</a:s>
                           </a:s>
                           <a:s r="2039"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2051">
                        <a:s>when </a:s>
                        <a:s r="2042">
                           <a:s>'day'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2050">
                           <a:s r="2048">
                              <a:s r="2043">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2047">
                                 <a:s>(</a:s>
                                 <a:s r="2047">
                                    <a:s r="2044">24.0 / </a:s>
                                    <a:s r="2046">
                                       <a:s r="2045">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2046">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2049"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2063">
                        <a:s>when </a:s>
                        <a:s r="2052">
                           <a:s>'week'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2062">
                           <a:s r="2058">
                              <a:s r="2053">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2057">
                                 <a:s>(</a:s>
                                 <a:s r="2057">
                                    <a:s r="2054">24.0 / </a:s>
                                    <a:s r="2056">
                                       <a:s r="2055">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2056">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2061">
                              <a:s>(</a:s>
                              <a:s r="2061">
                                 <a:s r="2059">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2075">
                        <a:s>when </a:s>
                        <a:s r="2064">
                           <a:s>'month'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2074">
                           <a:s r="2070">
                              <a:s r="2065">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2069">
                                 <a:s>(</a:s>
                                 <a:s r="2069">
                                    <a:s r="2066">24.0 / </a:s>
                                    <a:s r="2068">
                                       <a:s r="2067">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2068">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2073">
                              <a:s>(</a:s>
                              <a:s r="2073">
                                 <a:s r="2071">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="2087">
                        <a:s>when </a:s>
                        <a:s r="2076">
                           <a:s>'year'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2086">
                           <a:s r="2082">
                              <a:s r="2077">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2081">
                                 <a:s>(</a:s>
                                 <a:s r="2081">
                                    <a:s r="2078">24.0 / </a:s>
                                    <a:s r="2080">
                                       <a:s r="2079">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2080">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2085">
                              <a:s>(</a:s>
                              <a:s r="2085">
                                 <a:s r="2083">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 365 days in year */
    </a:s>
                     <a:s r="2095">
                        <a:s>when </a:s>
                        <a:s r="2088">
                           <a:s>'hours'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2094">
                           <a:s r="2089">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> * </a:s>
                           <a:s r="2093">
                              <a:s>(</a:s>
                              <a:s r="2093">
                                 <a:s r="2090">24.0 / </a:s>
                                 <a:s r="2092">
                                    <a:s r="2091">
                                       <a:s>period</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2092">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2105">
                        <a:s>when </a:s>
                        <a:s r="2096">
                           <a:s>'minutes'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2104">
                           <a:s r="2102">
                              <a:s r="2097">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2101">
                                 <a:s>(</a:s>
                                 <a:s r="2101">
                                    <a:s r="2098">24.0 / </a:s>
                                    <a:s r="2100">
                                       <a:s r="2099">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2100">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2103"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2117">
                        <a:s>when </a:s>
                        <a:s r="2106">
                           <a:s>'seconds'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2116">
                           <a:s r="2114">
                              <a:s r="2112">
                                 <a:s r="2107">
                                    <a:s>frequency</a:s>
                                 </a:s>
                                 <a:s> * </a:s>
                                 <a:s r="2111">
                                    <a:s>(</a:s>
                                    <a:s r="2111">
                                       <a:s r="2108">24.0 / </a:s>
                                       <a:s r="2110">
                                          <a:s r="2109">
                                             <a:s>period</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2110">
                                             <a:s>value</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>)</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2113"> * 60</a:s>
                           </a:s>
                           <a:s r="2115"> * 60</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2127">
                        <a:s>when </a:s>
                        <a:s r="2118">
                           <a:s>'days'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2126">
                           <a:s r="2124">
                              <a:s r="2119">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2123">
                                 <a:s>(</a:s>
                                 <a:s r="2123">
                                    <a:s r="2120">24.0 / </a:s>
                                    <a:s r="2122">
                                       <a:s r="2121">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2122">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="2125"> / 24</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2139">
                        <a:s>when </a:s>
                        <a:s r="2128">
                           <a:s>'weeks'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2138">
                           <a:s r="2134">
                              <a:s r="2129">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2133">
                                 <a:s>(</a:s>
                                 <a:s r="2133">
                                    <a:s r="2130">24.0 / </a:s>
                                    <a:s r="2132">
                                       <a:s r="2131">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2132">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2137">
                              <a:s>(</a:s>
                              <a:s r="2137">
                                 <a:s r="2135">24 * 7</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2151">
                        <a:s>when </a:s>
                        <a:s r="2140">
                           <a:s>'months'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2150">
                           <a:s r="2146">
                              <a:s r="2141">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2145">
                                 <a:s>(</a:s>
                                 <a:s r="2145">
                                    <a:s r="2142">24.0 / </a:s>
                                    <a:s r="2144">
                                       <a:s r="2143">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2144">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2149">
                              <a:s>(</a:s>
                              <a:s r="2149">
                                 <a:s r="2147">24 * 30</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s> /* assuming 30 days in month */
    </a:s>
                     <a:s r="2163">
                        <a:s>when </a:s>
                        <a:s r="2152">
                           <a:s>'years'</a:s>
                        </a:s>
                        <a:s> then </a:s>
                        <a:s r="2162">
                           <a:s r="2158">
                              <a:s r="2153">
                                 <a:s>frequency</a:s>
                              </a:s>
                              <a:s> * </a:s>
                              <a:s r="2157">
                                 <a:s>(</a:s>
                                 <a:s r="2157">
                                    <a:s r="2154">24.0 / </a:s>
                                    <a:s r="2156">
                                       <a:s r="2155">
                                          <a:s>period</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2156">
                                          <a:s>value</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s> / </a:s>
                           <a:s r="2161">
                              <a:s>(</a:s>
                              <a:s r="2161">
                                 <a:s r="2159">24 * 365</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s r="2164"> /* assuming 365 days in year */
    else null
  end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2165" locator="680:3-703:5" xsi:type="Case">
            <comparand localId="1935" locator="680:8-680:18" path="unit" xsi:type="Property">
               <source localId="1934" locator="680:8-680:13" name="period" xsi:type="OperandRef"/>
            </comparand>
            <caseItem localId="1943" locator="681:5-681:51">
               <when localId="1936" locator="681:10-681:12" valueType="t:String" value="h" xsi:type="Literal"/>
               <then localId="1942" locator="681:19-681:51" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="1937" locator="681:19-681:27" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="1941" locator="681:31-681:51" xsi:type="Divide">
                     <operand localId="1938" locator="681:32-681:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="1940" locator="681:39-681:50" path="value" xsi:type="Property">
                        <source localId="1939" locator="681:39-681:44" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1953" locator="682:5-682:58">
               <when localId="1944" locator="682:10-682:14" valueType="t:String" value="min" xsi:type="Literal"/>
               <then localId="1952" locator="682:21-682:58" xsi:type="Multiply">
                  <operand localId="1950" locator="682:21-682:53" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1945" locator="682:21-682:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1949" locator="682:33-682:53" xsi:type="Divide">
                        <operand localId="1946" locator="682:34-682:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1948" locator="682:41-682:52" path="value" xsi:type="Property">
                           <source localId="1947" locator="682:41-682:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1951" locator="682:57-682:58" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1965" locator="683:5-683:61">
               <when localId="1954" locator="683:10-683:12" valueType="t:String" value="s" xsi:type="Literal"/>
               <then localId="1964" locator="683:19-683:61" xsi:type="Multiply">
                  <operand localId="1962" locator="683:19-683:56" xsi:type="Multiply">
                     <operand localId="1960" locator="683:19-683:51" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="1955" locator="683:19-683:27" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="1959" locator="683:31-683:51" xsi:type="Divide">
                           <operand localId="1956" locator="683:32-683:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="1958" locator="683:39-683:50" path="value" xsi:type="Property">
                              <source localId="1957" locator="683:39-683:44" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="1961" locator="683:55-683:56" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1963" locator="683:60-683:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1975" locator="684:5-684:56">
               <when localId="1966" locator="684:10-684:12" valueType="t:String" value="d" xsi:type="Literal"/>
               <then localId="1974" locator="684:19-684:56" xsi:type="Divide">
                  <operand localId="1972" locator="684:19-684:51" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1967" locator="684:19-684:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1971" locator="684:31-684:51" xsi:type="Divide">
                        <operand localId="1968" locator="684:32-684:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1970" locator="684:39-684:50" path="value" xsi:type="Property">
                           <source localId="1969" locator="684:39-684:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1973" locator="684:55-684:56" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1987" locator="685:5-685:63">
               <when localId="1976" locator="685:10-685:13" valueType="t:String" value="wk" xsi:type="Literal"/>
               <then localId="1986" locator="685:20-685:63" xsi:type="Divide">
                  <operand localId="1982" locator="685:20-685:52" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1977" locator="685:20-685:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1981" locator="685:32-685:52" xsi:type="Divide">
                        <operand localId="1978" locator="685:33-685:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1980" locator="685:40-685:51" path="value" xsi:type="Property">
                           <source localId="1979" locator="685:40-685:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1985" locator="685:56-685:63" xsi:type="Multiply">
                        <operand localId="1983" locator="685:57-685:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1984" locator="685:62" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="1999" locator="686:5-686:64">
               <when localId="1988" locator="686:10-686:13" valueType="t:String" value="mo" xsi:type="Literal"/>
               <then localId="1998" locator="686:20-686:64" xsi:type="Divide">
                  <operand localId="1994" locator="686:20-686:52" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="1989" locator="686:20-686:28" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="1993" locator="686:32-686:52" xsi:type="Divide">
                        <operand localId="1990" locator="686:33-686:36" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="1992" locator="686:40-686:51" path="value" xsi:type="Property">
                           <source localId="1991" locator="686:40-686:45" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="1997" locator="686:56-686:64" xsi:type="Multiply">
                        <operand localId="1995" locator="686:57-686:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="1996" locator="686:62-686:63" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2011" locator="687:5-687:64">
               <when localId="2000" locator="687:10-687:12" valueType="t:String" value="a" xsi:type="Literal"/>
               <then localId="2010" locator="687:19-687:64" xsi:type="Divide">
                  <operand localId="2006" locator="687:19-687:51" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2001" locator="687:19-687:27" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2005" locator="687:31-687:51" xsi:type="Divide">
                        <operand localId="2002" locator="687:32-687:35" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2004" locator="687:39-687:50" path="value" xsi:type="Property">
                           <source localId="2003" locator="687:39-687:44" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2009" locator="687:55-687:64" xsi:type="Multiply">
                        <operand localId="2007" locator="687:56-687:57" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2008" locator="687:61-687:63" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2019" locator="688:5-688:54">
               <when localId="2012" locator="688:10-688:15" valueType="t:String" value="hour" xsi:type="Literal"/>
               <then localId="2018" locator="688:22-688:54" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="2013" locator="688:22-688:30" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="2017" locator="688:34-688:54" xsi:type="Divide">
                     <operand localId="2014" locator="688:35-688:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="2016" locator="688:42-688:53" path="value" xsi:type="Property">
                        <source localId="2015" locator="688:42-688:47" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2029" locator="689:5-689:61">
               <when localId="2020" locator="689:10-689:17" valueType="t:String" value="minute" xsi:type="Literal"/>
               <then localId="2028" locator="689:24-689:61" xsi:type="Multiply">
                  <operand localId="2026" locator="689:24-689:56" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2021" locator="689:24-689:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2025" locator="689:36-689:56" xsi:type="Divide">
                        <operand localId="2022" locator="689:37-689:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2024" locator="689:44-689:55" path="value" xsi:type="Property">
                           <source localId="2023" locator="689:44-689:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2027" locator="689:60-689:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2041" locator="690:5-690:66">
               <when localId="2030" locator="690:10-690:17" valueType="t:String" value="second" xsi:type="Literal"/>
               <then localId="2040" locator="690:24-690:66" xsi:type="Multiply">
                  <operand localId="2038" locator="690:24-690:61" xsi:type="Multiply">
                     <operand localId="2036" locator="690:24-690:56" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="2031" locator="690:24-690:32" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="2035" locator="690:36-690:56" xsi:type="Divide">
                           <operand localId="2032" locator="690:37-690:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="2034" locator="690:44-690:55" path="value" xsi:type="Property">
                              <source localId="2033" locator="690:44-690:49" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="2037" locator="690:60-690:61" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2039" locator="690:65-690:66" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2051" locator="691:5-691:58">
               <when localId="2042" locator="691:10-691:14" valueType="t:String" value="day" xsi:type="Literal"/>
               <then localId="2050" locator="691:21-691:58" xsi:type="Divide">
                  <operand localId="2048" locator="691:21-691:53" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2043" locator="691:21-691:29" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2047" locator="691:33-691:53" xsi:type="Divide">
                        <operand localId="2044" locator="691:34-691:37" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2046" locator="691:41-691:52" path="value" xsi:type="Property">
                           <source localId="2045" locator="691:41-691:46" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2049" locator="691:57-691:58" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2063" locator="692:5-692:65">
               <when localId="2052" locator="692:10-692:15" valueType="t:String" value="week" xsi:type="Literal"/>
               <then localId="2062" locator="692:22-692:65" xsi:type="Divide">
                  <operand localId="2058" locator="692:22-692:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2053" locator="692:22-692:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2057" locator="692:34-692:54" xsi:type="Divide">
                        <operand localId="2054" locator="692:35-692:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2056" locator="692:42-692:53" path="value" xsi:type="Property">
                           <source localId="2055" locator="692:42-692:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2061" locator="692:58-692:65" xsi:type="Multiply">
                        <operand localId="2059" locator="692:59-692:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2060" locator="692:64" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2075" locator="693:5-693:67">
               <when localId="2064" locator="693:10-693:16" valueType="t:String" value="month" xsi:type="Literal"/>
               <then localId="2074" locator="693:23-693:67" xsi:type="Divide">
                  <operand localId="2070" locator="693:23-693:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2065" locator="693:23-693:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2069" locator="693:35-693:55" xsi:type="Divide">
                        <operand localId="2066" locator="693:36-693:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2068" locator="693:43-693:54" path="value" xsi:type="Property">
                           <source localId="2067" locator="693:43-693:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2073" locator="693:59-693:67" xsi:type="Multiply">
                        <operand localId="2071" locator="693:60-693:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2072" locator="693:65-693:66" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2087" locator="694:5-694:67">
               <when localId="2076" locator="694:10-694:15" valueType="t:String" value="year" xsi:type="Literal"/>
               <then localId="2086" locator="694:22-694:67" xsi:type="Divide">
                  <operand localId="2082" locator="694:22-694:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2077" locator="694:22-694:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2081" locator="694:34-694:54" xsi:type="Divide">
                        <operand localId="2078" locator="694:35-694:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2080" locator="694:42-694:53" path="value" xsi:type="Property">
                           <source localId="2079" locator="694:42-694:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2085" locator="694:58-694:67" xsi:type="Multiply">
                        <operand localId="2083" locator="694:59-694:60" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2084" locator="694:64-694:66" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2095" locator="695:5-695:55">
               <when localId="2088" locator="695:10-695:16" valueType="t:String" value="hours" xsi:type="Literal"/>
               <then localId="2094" locator="695:23-695:55" xsi:type="Multiply">
                  <operand xsi:type="ToDecimal">
                     <operand localId="2089" locator="695:23-695:31" name="frequency" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="2093" locator="695:35-695:55" xsi:type="Divide">
                     <operand localId="2090" locator="695:36-695:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                     <operand localId="2092" locator="695:43-695:54" path="value" xsi:type="Property">
                        <source localId="2091" locator="695:43-695:48" name="period" xsi:type="OperandRef"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2105" locator="696:5-696:62">
               <when localId="2096" locator="696:10-696:18" valueType="t:String" value="minutes" xsi:type="Literal"/>
               <then localId="2104" locator="696:25-696:62" xsi:type="Multiply">
                  <operand localId="2102" locator="696:25-696:57" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2097" locator="696:25-696:33" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2101" locator="696:37-696:57" xsi:type="Divide">
                        <operand localId="2098" locator="696:38-696:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2100" locator="696:45-696:56" path="value" xsi:type="Property">
                           <source localId="2099" locator="696:45-696:50" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2103" locator="696:61-696:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2117" locator="697:5-697:67">
               <when localId="2106" locator="697:10-697:18" valueType="t:String" value="seconds" xsi:type="Literal"/>
               <then localId="2116" locator="697:25-697:67" xsi:type="Multiply">
                  <operand localId="2114" locator="697:25-697:62" xsi:type="Multiply">
                     <operand localId="2112" locator="697:25-697:57" xsi:type="Multiply">
                        <operand xsi:type="ToDecimal">
                           <operand localId="2107" locator="697:25-697:33" name="frequency" xsi:type="OperandRef"/>
                        </operand>
                        <operand localId="2111" locator="697:37-697:57" xsi:type="Divide">
                           <operand localId="2108" locator="697:38-697:41" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                           <operand localId="2110" locator="697:45-697:56" path="value" xsi:type="Property">
                              <source localId="2109" locator="697:45-697:50" name="period" xsi:type="OperandRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDecimal">
                        <operand localId="2113" locator="697:61-697:62" valueType="t:Integer" value="60" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2115" locator="697:66-697:67" valueType="t:Integer" value="60" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2127" locator="698:5-698:59">
               <when localId="2118" locator="698:10-698:15" valueType="t:String" value="days" xsi:type="Literal"/>
               <then localId="2126" locator="698:22-698:59" xsi:type="Divide">
                  <operand localId="2124" locator="698:22-698:54" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2119" locator="698:22-698:30" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2123" locator="698:34-698:54" xsi:type="Divide">
                        <operand localId="2120" locator="698:35-698:38" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2122" locator="698:42-698:53" path="value" xsi:type="Property">
                           <source localId="2121" locator="698:42-698:47" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2125" locator="698:58-698:59" valueType="t:Integer" value="24" xsi:type="Literal"/>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2139" locator="699:5-699:66">
               <when localId="2128" locator="699:10-699:16" valueType="t:String" value="weeks" xsi:type="Literal"/>
               <then localId="2138" locator="699:23-699:66" xsi:type="Divide">
                  <operand localId="2134" locator="699:23-699:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2129" locator="699:23-699:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2133" locator="699:35-699:55" xsi:type="Divide">
                        <operand localId="2130" locator="699:36-699:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2132" locator="699:43-699:54" path="value" xsi:type="Property">
                           <source localId="2131" locator="699:43-699:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2137" locator="699:59-699:66" xsi:type="Multiply">
                        <operand localId="2135" locator="699:60-699:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2136" locator="699:65" valueType="t:Integer" value="7" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2151" locator="700:5-700:68">
               <when localId="2140" locator="700:10-700:17" valueType="t:String" value="months" xsi:type="Literal"/>
               <then localId="2150" locator="700:24-700:68" xsi:type="Divide">
                  <operand localId="2146" locator="700:24-700:56" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2141" locator="700:24-700:32" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2145" locator="700:36-700:56" xsi:type="Divide">
                        <operand localId="2142" locator="700:37-700:40" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2144" locator="700:44-700:55" path="value" xsi:type="Property">
                           <source localId="2143" locator="700:44-700:49" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2149" locator="700:60-700:68" xsi:type="Multiply">
                        <operand localId="2147" locator="700:61-700:62" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2148" locator="700:66-700:67" valueType="t:Integer" value="30" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <caseItem localId="2163" locator="701:5-701:68">
               <when localId="2152" locator="701:10-701:16" valueType="t:String" value="years" xsi:type="Literal"/>
               <then localId="2162" locator="701:23-701:68" xsi:type="Divide">
                  <operand localId="2158" locator="701:23-701:55" xsi:type="Multiply">
                     <operand xsi:type="ToDecimal">
                        <operand localId="2153" locator="701:23-701:31" name="frequency" xsi:type="OperandRef"/>
                     </operand>
                     <operand localId="2157" locator="701:35-701:55" xsi:type="Divide">
                        <operand localId="2154" locator="701:36-701:39" valueType="t:Decimal" value="24.0" xsi:type="Literal"/>
                        <operand localId="2156" locator="701:43-701:54" path="value" xsi:type="Property">
                           <source localId="2155" locator="701:43-701:48" name="period" xsi:type="OperandRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2161" locator="701:59-701:68" xsi:type="Multiply">
                        <operand localId="2159" locator="701:60-701:61" valueType="t:Integer" value="24" xsi:type="Literal"/>
                        <operand localId="2160" locator="701:65-701:67" valueType="t:Integer" value="365" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </then>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="2164" locator="702:10-702:13" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="frequency">
            <operandTypeSpecifier localId="1932" locator="679:35-679:48" name="t:Integer" xsi:type="NamedTypeSpecifier"/>
         </operand>
         <operand name="period">
            <operandTypeSpecifier localId="1933" locator="679:58-679:72" name="t:Quantity" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2179" locator="705:3-708:1" name="HasEnd" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2179">
               <a:s>define function &quot;HasEnd&quot;(period Interval&lt;DateTime> ):
  </a:s>
               <a:s r="2178">
                  <a:s r="2178">
                     <a:s>not </a:s>
                     <a:s r="2177">
                        <a:s>(</a:s>
                        <a:s r="2177">
                           <a:s r="2171">
                              <a:s r="2170">
                                 <a:s>end of </a:s>
                                 <a:s r="2169">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> is null</a:s>
                           </a:s>
                           <a:s>
    or </a:s>
                           <a:s r="2176">
                              <a:s r="2173">
                                 <a:s>end of </a:s>
                                 <a:s r="2172">
                                    <a:s>period</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> = </a:s>
                              <a:s r="2175">
                                 <a:s>maximum </a:s>
                                 <a:s r="2174">
                                    <a:s>DateTime</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
)</a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2178" locator="706:3-708:1" xsi:type="Not">
            <operand localId="2177" locator="706:7-708:1" xsi:type="Or">
               <operand localId="2171" locator="706:8-706:28" xsi:type="IsNull">
                  <operand localId="2170" locator="706:8-706:20" xsi:type="End">
                     <operand localId="2169" locator="706:15-706:20" name="period" xsi:type="OperandRef"/>
                  </operand>
               </operand>
               <operand localId="2176" locator="707:8-707:39" xsi:type="Equal">
                  <operand localId="2173" locator="707:8-707:20" xsi:type="End">
                     <operand localId="2172" locator="707:15-707:20" name="period" xsi:type="OperandRef"/>
                  </operand>
                  <operand localId="2175" locator="707:24-707:39" valueType="t:DateTime" xsi:type="MaxValue"/>
               </operand>
            </operand>
         </expression>
         <operand name="period">
            <operandTypeSpecifier localId="2168" locator="705:35-705:52" xsi:type="IntervalTypeSpecifier">
               <pointType localId="2167" locator="705:44-705:51" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
            </operandTypeSpecifier>
         </operand>
      </def>
      <def localId="2296" locator="710:3-740:64" name="MedicationRequestPeriod" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2296">
               <a:s>define function MedicationRequestPeriod(Request &quot;MedicationRequest&quot;):
  </a:s>
               <a:s r="2295">
                  <a:s r="2295">
                     <a:s>
                        <a:s r="2182">
                           <a:s r="2181">
                              <a:s>
                                 <a:s>Request</a:s>
                              </a:s>
                           </a:s>
                           <a:s> R</a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s>
                        <a:s>let
      </a:s>
                        <a:s r="2186">
                           <a:s>dosage: </a:s>
                           <a:s r="2185">
                              <a:s>singleton from </a:s>
                              <a:s r="2184">
                                 <a:s r="2183">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2184">
                                    <a:s>dosageInstruction</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2190">
                           <a:s>doseAndRate: </a:s>
                           <a:s r="2189">
                              <a:s>singleton from </a:s>
                              <a:s r="2188">
                                 <a:s r="2187">
                                    <a:s>dosage</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2188">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2195">
                           <a:s>doseRange: </a:s>
                           <a:s r="2194">
                              <a:s r="2192">
                                 <a:s r="2191">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2192">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2193">
                                 <a:s>Range</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2200">
                           <a:s>doseQuantity: </a:s>
                           <a:s r="2199">
                              <a:s r="2197">
                                 <a:s r="2196">
                                    <a:s>doseAndRate</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2197">
                                    <a:s>dose</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2198">
                                 <a:s>SimpleQuantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2205">
                           <a:s>dose: </a:s>
                           <a:s r="2204">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2202">
                                 <a:s>end of </a:s>
                                 <a:s r="2201">
                                    <a:s>doseRange</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2203">
                                 <a:s>doseQuantity</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2208">
                           <a:s>timing: </a:s>
                           <a:s r="2207">
                              <a:s r="2206">
                                 <a:s>dosage</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2207">
                                 <a:s>timing</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2216">
                           <a:s>frequency: </a:s>
                           <a:s r="2215">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2211">
                                 <a:s r="2210">
                                    <a:s r="2209">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2210">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2211">
                                    <a:s>frequencyMax</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2214">
                                 <a:s r="2213">
                                    <a:s r="2212">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2213">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2214">
                                    <a:s>frequency</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2225">
                           <a:s>period: </a:s>
                           <a:s r="2224">
                              <a:s>System.Quantity { </a:s>
                              <a:s>
                                 <a:s>value: </a:s>
                                 <a:s r="2219">
                                    <a:s r="2218">
                                       <a:s r="2217">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2218">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2219">
                                       <a:s>period</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s>
                                 <a:s>unit: </a:s>
                                 <a:s r="2223">
                                    <a:s r="2222">
                                       <a:s r="2221">
                                          <a:s r="2220">
                                             <a:s>timing</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2221">
                                             <a:s>repeat</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2222">
                                          <a:s>periodUnit</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2223">
                                       <a:s>value</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s> }</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2237">
                           <a:s>dosesPerDay: </a:s>
                           <a:s r="2236">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2230">
                                 <a:s>ToDaily(</a:s>
                                 <a:s r="2228">
                                    <a:s r="2226">
                                       <a:s>FHIRHelpers</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2228">
                                       <a:s>ToInteger(</a:s>
                                       <a:s r="2227">
                                          <a:s>frequency</a:s>
                                       </a:s>
                                       <a:s>)</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2229">
                                    <a:s>period</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2234">
                                 <a:s>Count(</a:s>
                                 <a:s r="2233">
                                    <a:s r="2232">
                                       <a:s r="2231">
                                          <a:s>timing</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2232">
                                          <a:s>repeat</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2233">
                                       <a:s>timeOfDay</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="2235">, 1.0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2243">
                           <a:s>boundsPeriod: </a:s>
                           <a:s r="2242">
                              <a:s r="2240">
                                 <a:s r="2239">
                                    <a:s r="2238">
                                       <a:s>timing</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2239">
                                       <a:s>repeat</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2240">
                                    <a:s>bounds</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> as </a:s>
                              <a:s r="2241">
                                 <a:s>Period</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2247">
                           <a:s>daysSupply: </a:s>
                           <a:s r="2246">
                              <a:s r="2245">
                                 <a:s r="2244">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2245">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2246">
                                 <a:s>expectedSupplyDuration</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2251">
                           <a:s>quantity: </a:s>
                           <a:s r="2250">
                              <a:s r="2249">
                                 <a:s r="2248">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2249">
                                    <a:s>dispenseRequest</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2250">
                                 <a:s>quantity</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2257">
                           <a:s>refills: </a:s>
                           <a:s r="2256">
                              <a:s>Coalesce(</a:s>
                              <a:s r="2254">
                                 <a:s r="2253">
                                    <a:s r="2252">
                                       <a:s>R</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2253">
                                       <a:s>dispenseRequest</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2254">
                                    <a:s>numberOfRepeatsAllowed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2255">, 0)</a:s>
                           </a:s>
                        </a:s>
                        <a:s>,
      </a:s>
                        <a:s r="2267">
                           <a:s>startDate:
        </a:s>
                           <a:s r="2266">
                              <a:s>Coalesce(
          </a:s>
                              <a:s r="2259">
                                 <a:s>start of </a:s>
                                 <a:s r="2258">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="2263">
                                 <a:s>start of </a:s>
                                 <a:s r="2262">
                                    <a:s r="2261">
                                       <a:s r="2260">
                                          <a:s>R</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2261">
                                          <a:s>dispenseRequest</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2262">
                                       <a:s>validityPeriod</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>,
          </a:s>
                              <a:s r="2265">
                                 <a:s r="2264">
                                    <a:s>R</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2265">
                                    <a:s>authoredOn</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        )</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                     <a:s>
    </a:s>
                     <a:s r="2294">
                        <a:s>return
      </a:s>
                        <a:s r="2293">
                           <a:s>if </a:s>
                           <a:s r="2269">
                              <a:s>HasEnd(</a:s>
                              <a:s r="2268">
                                 <a:s>boundsPeriod</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s> then
        </a:s>
                           <a:s r="2273">
                              <a:s>Interval[</a:s>
                              <a:s r="2270">
                                 <a:s>startDate</a:s>
                              </a:s>
                              <a:s>, </a:s>
                              <a:s r="2272">
                                 <a:s>end of </a:s>
                                 <a:s r="2271">
                                    <a:s>boundsPeriod</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                           <a:s>
      else
        </a:s>
                           <a:s r="2292">
                              <a:s>
                                 <a:s r="2285">
                                    <a:s r="2284">
                                       <a:s>(
          </a:s>
                                       <a:s r="2284">
                                          <a:s r="2280">
                                             <a:s>Coalesce(</a:s>
                                             <a:s r="2274">
                                                <a:s>daysSupply</a:s>
                                             </a:s>
                                             <a:s>, </a:s>
                                             <a:s r="2279">
                                                <a:s r="2275">
                                                   <a:s>quantity</a:s>
                                                </a:s>
                                                <a:s> / </a:s>
                                                <a:s r="2278">
                                                   <a:s>(</a:s>
                                                   <a:s r="2278">
                                                      <a:s r="2276">
                                                         <a:s>dose</a:s>
                                                      </a:s>
                                                      <a:s> * </a:s>
                                                      <a:s r="2277">
                                                         <a:s>dosesPerDay</a:s>
                                                      </a:s>
                                                   </a:s>
                                                   <a:s>)</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                          <a:s>
            * </a:s>
                                          <a:s r="2283">
                                             <a:s>(</a:s>
                                             <a:s r="2283">
                                                <a:s r="2281">1 + </a:s>
                                                <a:s r="2282">
                                                   <a:s>refills</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>
        )</a:s>
                                    </a:s>
                                    <a:s> durationInDays</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
          </a:s>
                              <a:s r="2291">
                                 <a:s>return </a:s>
                                 <a:s r="2290">
                                    <a:s>Interval[</a:s>
                                    <a:s r="2286">
                                       <a:s>startDate</a:s>
                                    </a:s>
                                    <a:s>, </a:s>
                                    <a:s r="2289">
                                       <a:s r="2287">
                                          <a:s>startDate</a:s>
                                       </a:s>
                                       <a:s> + </a:s>
                                       <a:s r="2288">
                                          <a:s>durationInDays</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2295" locator="711:3-740:64" xsi:type="Query">
            <source localId="2182" locator="711:3-711:11" alias="R">
               <expression localId="2181" locator="711:3-711:9" name="Request" xsi:type="OperandRef"/>
            </source>
            <let localId="2186" locator="713:7-713:48" identifier="dosage">
               <expression localId="2185" locator="713:15-713:48" xsi:type="SingletonFrom">
                  <operand localId="2184" locator="713:30-713:48" path="dosageInstruction" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2190" locator="714:7-714:52" identifier="doseAndRate">
               <expression localId="2189" locator="714:20-714:52" xsi:type="SingletonFrom">
                  <operand localId="2188" locator="714:35-714:52" path="doseAndRate" xsi:type="Property">
                     <source localId="2187" locator="714:35-714:40" name="dosage" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="2195" locator="715:7-715:42" identifier="doseRange">
               <expression localId="2194" locator="715:18-715:42" strict="false" xsi:type="As">
                  <operand localId="2192" locator="715:18-715:33" path="dose" xsi:type="Property">
                     <source localId="2191" locator="715:18-715:28" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="2193" locator="715:38-715:42" name="fhir:Range" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2200" locator="716:7-716:54" identifier="doseQuantity">
               <expression localId="2199" locator="716:21-716:54" strict="false" xsi:type="As">
                  <operand localId="2197" locator="716:21-716:36" path="dose" xsi:type="Property">
                     <source localId="2196" locator="716:21-716:31" name="doseAndRate" xsi:type="QueryLetRef"/>
                  </operand>
                  <asTypeSpecifier localId="2198" locator="716:41-716:54" name="fhir:SimpleQuantity" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2205" locator="717:7-717:52" identifier="dose">
               <expression localId="2204" locator="717:13-717:52" xsi:type="Coalesce">
                  <operand localId="2202" locator="717:22-717:37" xsi:type="End">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2201" locator="717:29-717:37" name="doseRange" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2203" locator="717:40-717:51" name="doseQuantity" xsi:type="QueryLetRef"/>
                  </operand>
               </expression>
            </let>
            <let localId="2208" locator="718:7-718:27" identifier="timing">
               <expression localId="2207" locator="718:15-718:27" path="timing" xsi:type="Property">
                  <source localId="2206" locator="718:15-718:20" name="dosage" xsi:type="QueryLetRef"/>
               </expression>
            </let>
            <let localId="2216" locator="719:7-719:78" identifier="frequency">
               <expression localId="2215" locator="719:18-719:78" xsi:type="Coalesce">
                  <operand localId="2211" locator="719:27-719:52" path="frequencyMax" xsi:type="Property">
                     <source localId="2210" locator="719:27-719:39" path="repeat" xsi:type="Property">
                        <source localId="2209" locator="719:27-719:32" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <operand localId="2214" locator="719:55-719:77" path="frequency" xsi:type="Property">
                     <source localId="2213" locator="719:55-719:67" path="repeat" xsi:type="Property">
                        <source localId="2212" locator="719:55-719:60" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
               </expression>
            </let>
            <let localId="2225" locator="720:7-720:99" identifier="period">
               <expression localId="2224" locator="720:15-720:99" classType="t:Quantity" xsi:type="Instance">
                  <element name="value">
                     <value name="ToDecimal" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2219" locator="720:40-720:59" path="period" xsi:type="Property">
                           <source localId="2218" locator="720:40-720:52" path="repeat" xsi:type="Property">
                              <source localId="2217" locator="720:40-720:45" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </operand>
                     </value>
                  </element>
                  <element name="unit">
                     <value localId="2223" locator="720:68-720:97" path="value" xsi:type="Property">
                        <source localId="2222" locator="720:68-720:91" path="periodUnit" xsi:type="Property">
                           <source localId="2221" locator="720:68-720:80" path="repeat" xsi:type="Property">
                              <source localId="2220" locator="720:68-720:73" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </value>
                  </element>
               </expression>
            </let>
            <let localId="2237" locator="721:7-721:115" identifier="dosesPerDay">
               <expression localId="2236" locator="721:20-721:115" xsi:type="Coalesce">
                  <operand localId="2230" locator="721:29-721:77" name="ToDaily" xsi:type="FunctionRef">
                     <operand localId="2228" locator="721:37-721:68" name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2227" locator="721:59-721:67" name="frequency" xsi:type="QueryLetRef"/>
                     </operand>
                     <operand localId="2229" locator="721:71-721:76" name="period" xsi:type="QueryLetRef"/>
                  </operand>
                  <operand xsi:type="ToDecimal">
                     <operand localId="2234" locator="721:80-721:109" xsi:type="Count">
                        <source localId="2233" locator="721:86-721:108" path="timeOfDay" xsi:type="Property">
                           <source localId="2232" locator="721:86-721:98" path="repeat" xsi:type="Property">
                              <source localId="2231" locator="721:86-721:91" name="timing" xsi:type="QueryLetRef"/>
                           </source>
                        </source>
                     </operand>
                  </operand>
                  <operand localId="2235" locator="721:112-721:114" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="2243" locator="722:7-722:50" identifier="boundsPeriod">
               <expression localId="2242" locator="722:21-722:50" strict="false" xsi:type="As">
                  <operand localId="2240" locator="722:21-722:40" path="bounds" xsi:type="Property">
                     <source localId="2239" locator="722:21-722:33" path="repeat" xsi:type="Property">
                        <source localId="2238" locator="722:21-722:26" name="timing" xsi:type="QueryLetRef"/>
                     </source>
                  </operand>
                  <asTypeSpecifier localId="2241" locator="722:45-722:50" name="fhir:Period" xsi:type="NamedTypeSpecifier"/>
               </expression>
            </let>
            <let localId="2247" locator="723:7-723:58" identifier="daysSupply">
               <expression localId="2246" locator="723:19-723:58" path="expectedSupplyDuration" xsi:type="Property">
                  <source localId="2245" locator="723:19-723:35" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2251" locator="724:7-724:42" identifier="quantity">
               <expression localId="2250" locator="724:17-724:42" path="quantity" xsi:type="Property">
                  <source localId="2249" locator="724:17-724:33" path="dispenseRequest" scope="R" xsi:type="Property"/>
               </expression>
            </let>
            <let localId="2257" locator="725:7-725:68" identifier="refills">
               <expression localId="2256" locator="725:16-725:68" xsi:type="Coalesce">
                  <operand name="ToInteger" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2254" locator="725:25-725:64" path="numberOfRepeatsAllowed" xsi:type="Property">
                        <source localId="2253" locator="725:25-725:41" path="dispenseRequest" scope="R" xsi:type="Property"/>
                     </operand>
                  </operand>
                  <operand localId="2255" locator="725:67" valueType="t:Integer" value="0" xsi:type="Literal"/>
               </expression>
            </let>
            <let localId="2267" locator="726:7-731:9" identifier="startDate">
               <expression localId="2266" locator="727:9-731:9" xsi:type="Coalesce">
                  <operand localId="2259" locator="728:11-728:31" xsi:type="Start">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2258" locator="728:20-728:31" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </operand>
                  <operand localId="2263" locator="729:11-729:51" xsi:type="Start">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2262" locator="729:20-729:51" path="validityPeriod" xsi:type="Property">
                           <source localId="2261" locator="729:20-729:36" path="dispenseRequest" scope="R" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2265" locator="730:11-730:22" path="authoredOn" scope="R" xsi:type="Property"/>
                  </operand>
               </expression>
            </let>
            <return localId="2294" locator="732:5-740:64">
               <expression localId="2293" locator="733:7-740:64" xsi:type="If">
                  <condition localId="2269" locator="733:10-733:29" name="HasEnd" xsi:type="FunctionRef">
                     <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2268" locator="733:17-733:28" name="boundsPeriod" xsi:type="QueryLetRef"/>
                     </operand>
                  </condition>
                  <then localId="2273" locator="734:9-734:48" lowClosed="true" highClosed="true" xsi:type="Interval">
                     <low localId="2270" locator="734:18-734:26" name="startDate" xsi:type="QueryLetRef"/>
                     <high localId="2272" locator="734:29-734:47" xsi:type="End">
                        <operand name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2271" locator="734:36-734:47" name="boundsPeriod" xsi:type="QueryLetRef"/>
                        </operand>
                     </high>
                  </then>
                  <else localId="2292" locator="736:9-740:64" xsi:type="Query">
                     <source localId="2285" locator="736:9-739:24" alias="durationInDays">
                        <expression localId="2284" locator="736:9-739:9" xsi:type="Multiply">
                           <operand localId="2280" locator="737:11-737:63" xsi:type="Coalesce">
                              <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2274" locator="737:20-737:29" name="daysSupply" xsi:type="QueryLetRef"/>
                              </operand>
                              <operand localId="2279" locator="737:32-737:62" xsi:type="Divide">
                                 <operand name="ToQuantity" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2275" locator="737:32-737:39" name="quantity" xsi:type="QueryLetRef"/>
                                 </operand>
                                 <operand localId="2278" locator="737:43-737:62" xsi:type="Multiply">
                                    <operand localId="2276" locator="737:44-737:47" name="dose" xsi:type="QueryLetRef"/>
                                    <operand xsi:type="ToQuantity">
                                       <operand localId="2277" locator="737:51-737:61" name="dosesPerDay" xsi:type="QueryLetRef"/>
                                    </operand>
                                 </operand>
                              </operand>
                           </operand>
                           <operand xsi:type="ToQuantity">
                              <operand localId="2283" locator="738:15-738:27" xsi:type="Add">
                                 <operand localId="2281" locator="738:16" valueType="t:Integer" value="1" xsi:type="Literal"/>
                                 <operand localId="2282" locator="738:20-738:26" name="refills" xsi:type="QueryLetRef"/>
                              </operand>
                           </operand>
                        </expression>
                     </source>
                     <return localId="2291" locator="740:11-740:64">
                        <expression localId="2290" locator="740:18-740:64" lowClosed="true" highClosed="true" xsi:type="Interval">
                           <low localId="2286" locator="740:27-740:35" name="startDate" xsi:type="QueryLetRef"/>
                           <high localId="2289" locator="740:38-740:63" xsi:type="Add">
                              <operand localId="2287" locator="740:38-740:46" name="startDate" xsi:type="QueryLetRef"/>
                              <operand localId="2288" locator="740:50-740:63" name="durationInDays" xsi:type="AliasRef"/>
                           </high>
                        </expression>
                     </return>
                  </else>
               </expression>
            </return>
         </expression>
         <operand name="Request">
            <operandTypeSpecifier localId="2180" locator="710:51-710:69" name="fhir:MedicationRequest" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2420" locator="743:1-767:4" name="DosesPerDay" context="Patient" accessLevel="Public" xsi:type="FunctionDef">
         <annotation xsi:type="a:Annotation">
            <a:s r="2420">
               <a:s>define function &quot;DosesPerDay&quot;(frequency Code):
	/*Calculates the cumulative dose per day for each prescription*/
	</a:s>
               <a:s r="2419">
                  <a:s r="2419">
                     <a:s>case
		</a:s>
                     <a:s r="2303">
                        <a:s>when </a:s>
                        <a:s r="2301">
                           <a:s r="2298">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2300">
                              <a:s r="2299">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2300">
                                 <a:s>&quot;Once daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2302"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2309">
                        <a:s>when </a:s>
                        <a:s r="2307">
                           <a:s r="2304">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2306">
                              <a:s r="2305">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2306">
                                 <a:s>&quot;Twice a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2308"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2315">
                        <a:s>when </a:s>
                        <a:s r="2313">
                           <a:s r="2310">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2312">
                              <a:s r="2311">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2312">
                                 <a:s>&quot;Three times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2314"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2321">
                        <a:s>when </a:s>
                        <a:s r="2319">
                           <a:s r="2316">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2318">
                              <a:s r="2317">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2318">
                                 <a:s>&quot;Four times daily (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2320"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2327">
                        <a:s>when </a:s>
                        <a:s r="2325">
                           <a:s r="2322">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2324">
                              <a:s r="2323">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2324">
                                 <a:s>&quot;Every twenty four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2326"> then 1.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2333">
                        <a:s>when </a:s>
                        <a:s r="2331">
                           <a:s r="2328">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2330">
                              <a:s r="2329">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2330">
                                 <a:s>&quot;Every twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2332"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2339">
                        <a:s>when </a:s>
                        <a:s r="2337">
                           <a:s r="2334">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2336">
                              <a:s r="2335">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2336">
                                 <a:s>&quot;Every thirty six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2338"> then 0.67</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2345">
                        <a:s>when </a:s>
                        <a:s r="2343">
                           <a:s r="2340">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2342">
                              <a:s r="2341">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2342">
                                 <a:s>&quot;Every eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2344"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2351">
                        <a:s>when </a:s>
                        <a:s r="2349">
                           <a:s r="2346">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2348">
                              <a:s r="2347">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2348">
                                 <a:s>&quot;Every four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2350"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2357">
                        <a:s>when </a:s>
                        <a:s r="2355">
                           <a:s r="2352">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2354">
                              <a:s r="2353">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2354">
                                 <a:s>&quot;Every six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2356"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2363">
                        <a:s>when </a:s>
                        <a:s r="2361">
                           <a:s r="2358">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2360">
                              <a:s r="2359">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2360">
                                 <a:s>&quot;Every seventy two hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2362"> then 0.34</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2369">
                        <a:s>when </a:s>
                        <a:s r="2367">
                           <a:s r="2364">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2366">
                              <a:s r="2365">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2366">
                                 <a:s>&quot;Every forty eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2368"> then 0.5</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2375">
                        <a:s>when </a:s>
                        <a:s r="2373">
                           <a:s r="2370">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2372">
                              <a:s r="2371">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2372">
                                 <a:s>&quot;Every eight to twelve hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2374"> then 2.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2381">
                        <a:s>when </a:s>
                        <a:s r="2379">
                           <a:s r="2376">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2378">
                              <a:s r="2377">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2378">
                                 <a:s>&quot;Every six to eight hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2380"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2387">
                        <a:s>when </a:s>
                        <a:s r="2385">
                           <a:s r="2382">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2384">
                              <a:s r="2383">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2384">
                                 <a:s>&quot;Every three to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2386"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2393">
                        <a:s>when </a:s>
                        <a:s r="2391">
                           <a:s r="2388">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2390">
                              <a:s r="2389">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2390">
                                 <a:s>&quot;Every three to six hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2392"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2399">
                        <a:s>when </a:s>
                        <a:s r="2397">
                           <a:s r="2394">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2396">
                              <a:s r="2395">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2396">
                                 <a:s>&quot;Every two to four hours (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2398"> then 6.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2405">
                        <a:s>when </a:s>
                        <a:s r="2403">
                           <a:s r="2400">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2402">
                              <a:s r="2401">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2402">
                                 <a:s>&quot;One to four times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2404"> then 4.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2411">
                        <a:s>when </a:s>
                        <a:s r="2409">
                           <a:s r="2406">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2408">
                              <a:s r="2407">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2408">
                                 <a:s>&quot;One to three times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2410"> then 3.0</a:s>
                     </a:s>
                     <a:s>
		</a:s>
                     <a:s r="2417">
                        <a:s>when </a:s>
                        <a:s r="2415">
                           <a:s r="2412">
                              <a:s>frequency</a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2414">
                              <a:s r="2413">
                                 <a:s>HCC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2414">
                                 <a:s>&quot;One to two times a day (qualifier value)&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2416"> then 2.0</a:s>
                     </a:s>
                     <a:s r="2418">
		else null 
	end</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2419" locator="745:2-767:4" xsi:type="Case">
            <caseItem localId="2303" locator="746:3-746:62">
               <when localId="2301" locator="746:8-746:53" xsi:type="Equivalent">
                  <operand localId="2298" locator="746:8-746:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2300" locator="746:20-746:53" name="Once daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2302" locator="746:60-746:62" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2309" locator="747:3-747:63">
               <when localId="2307" locator="747:8-747:54" xsi:type="Equivalent">
                  <operand localId="2304" locator="747:8-747:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2306" locator="747:20-747:54" name="Twice a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2308" locator="747:61-747:63" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2315" locator="748:3-748:69">
               <when localId="2313" locator="748:8-748:60" xsi:type="Equivalent">
                  <operand localId="2310" locator="748:8-748:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2312" locator="748:20-748:60" name="Three times daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2314" locator="748:67-748:69" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2321" locator="749:3-749:68">
               <when localId="2319" locator="749:8-749:59" xsi:type="Equivalent">
                  <operand localId="2316" locator="749:8-749:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2318" locator="749:20-749:59" name="Four times daily (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2320" locator="749:66-749:68" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2327" locator="750:3-750:75">
               <when localId="2325" locator="750:8-750:66" xsi:type="Equivalent">
                  <operand localId="2322" locator="750:8-750:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2324" locator="750:20-750:66" name="Every twenty four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2326" locator="750:73-750:75" valueType="t:Decimal" value="1.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2333" locator="751:3-751:70">
               <when localId="2331" locator="751:8-751:61" xsi:type="Equivalent">
                  <operand localId="2328" locator="751:8-751:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2330" locator="751:20-751:61" name="Every twelve hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2332" locator="751:68-751:70" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2339" locator="752:3-752:75">
               <when localId="2337" locator="752:8-752:65" xsi:type="Equivalent">
                  <operand localId="2334" locator="752:8-752:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2336" locator="752:20-752:65" name="Every thirty six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2338" locator="752:72-752:75" valueType="t:Decimal" value="0.67" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2345" locator="753:3-753:69">
               <when localId="2343" locator="753:8-753:60" xsi:type="Equivalent">
                  <operand localId="2340" locator="753:8-753:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2342" locator="753:20-753:60" name="Every eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2344" locator="753:67-753:69" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2351" locator="754:3-754:68">
               <when localId="2349" locator="754:8-754:59" xsi:type="Equivalent">
                  <operand localId="2346" locator="754:8-754:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2348" locator="754:20-754:59" name="Every four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2350" locator="754:66-754:68" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2357" locator="755:3-755:67">
               <when localId="2355" locator="755:8-755:58" xsi:type="Equivalent">
                  <operand localId="2352" locator="755:8-755:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2354" locator="755:20-755:58" name="Every six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2356" locator="755:65-755:67" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2363" locator="756:3-756:76">
               <when localId="2361" locator="756:8-756:66" xsi:type="Equivalent">
                  <operand localId="2358" locator="756:8-756:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2360" locator="756:20-756:66" name="Every seventy two hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2362" locator="756:73-756:76" valueType="t:Decimal" value="0.34" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2369" locator="757:3-757:75">
               <when localId="2367" locator="757:8-757:66" xsi:type="Equivalent">
                  <operand localId="2364" locator="757:8-757:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2366" locator="757:20-757:66" name="Every forty eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2368" locator="757:73-757:75" valueType="t:Decimal" value="0.5" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2375" locator="758:3-758:79">
               <when localId="2373" locator="758:8-758:70" xsi:type="Equivalent">
                  <operand localId="2370" locator="758:8-758:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2372" locator="758:20-758:70" name="Every eight to twelve hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2374" locator="758:77-758:79" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2381" locator="759:3-759:76">
               <when localId="2379" locator="759:8-759:67" xsi:type="Equivalent">
                  <operand localId="2376" locator="759:8-759:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2378" locator="759:20-759:67" name="Every six to eight hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2380" locator="759:74-759:76" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2387" locator="760:3-760:77">
               <when localId="2385" locator="760:8-760:68" xsi:type="Equivalent">
                  <operand localId="2382" locator="760:8-760:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2384" locator="760:20-760:68" name="Every three to four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2386" locator="760:75-760:77" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2393" locator="761:3-761:76">
               <when localId="2391" locator="761:8-761:67" xsi:type="Equivalent">
                  <operand localId="2388" locator="761:8-761:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2390" locator="761:20-761:67" name="Every three to six hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2392" locator="761:74-761:76" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2399" locator="762:3-762:75">
               <when localId="2397" locator="762:8-762:66" xsi:type="Equivalent">
                  <operand localId="2394" locator="762:8-762:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2396" locator="762:20-762:66" name="Every two to four hours (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2398" locator="762:73-762:75" valueType="t:Decimal" value="6.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2405" locator="763:3-763:75">
               <when localId="2403" locator="763:8-763:66" xsi:type="Equivalent">
                  <operand localId="2400" locator="763:8-763:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2402" locator="763:20-763:66" name="One to four times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2404" locator="763:73-763:75" valueType="t:Decimal" value="4.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2411" locator="764:3-764:76">
               <when localId="2409" locator="764:8-764:67" xsi:type="Equivalent">
                  <operand localId="2406" locator="764:8-764:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2408" locator="764:20-764:67" name="One to three times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2410" locator="764:74-764:76" valueType="t:Decimal" value="3.0" xsi:type="Literal"/>
            </caseItem>
            <caseItem localId="2417" locator="765:3-765:74">
               <when localId="2415" locator="765:8-765:65" xsi:type="Equivalent">
                  <operand localId="2412" locator="765:8-765:16" name="frequency" xsi:type="OperandRef"/>
                  <operand localId="2414" locator="765:20-765:65" name="One to two times a day (qualifier value)" libraryName="HCC" xsi:type="CodeRef"/>
               </when>
               <then localId="2416" locator="765:72-765:74" valueType="t:Decimal" value="2.0" xsi:type="Literal"/>
            </caseItem>
            <else asType="t:Decimal" xsi:type="As">
               <operand localId="2418" locator="766:8-766:11" xsi:type="Null"/>
            </else>
         </expression>
         <operand name="frequency">
            <operandTypeSpecifier localId="2297" locator="743:41-743:44" name="t:Code" xsi:type="NamedTypeSpecifier"/>
         </operand>
      </def>
      <def localId="2449" locator="773:1-780:69" name="methadone_prescribed at date" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2449">
               <a:s>//define function &quot;GetMedicationDailyDose&quot;(dosage Quantity, dosesPerDay Decimal):
  //dosage * Quantity { value: dosesPerDay, unit: '/d' }


define &quot;methadone_prescribed at date&quot;:
</a:s>
               <a:s r="2448">
                  <a:s>
                     <a:s r="2422">
                        <a:s r="2421">
                           <a:s r="2421">
                              <a:s>[MedicationRequest]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> MR</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2447">
                     <a:s>where </a:s>
                     <a:s r="2447">
                        <a:s r="2442">
                           <a:s r="2437">
                              <a:s r="2431">
                                 <a:s r="2426">
                                    <a:s r="2424">
                                       <a:s r="2423">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2424">
                                          <a:s>status</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="2425">
                                       <a:s>'completed'</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
        and </a:s>
                                 <a:s r="2430">
                                    <a:s r="2428">
                                       <a:s r="2427">
                                          <a:s>MR</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2428">
                                          <a:s>intent</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> = </a:s>
                                    <a:s r="2429">
                                       <a:s>'order'</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
        and </a:s>
                              <a:s r="2436">
                                 <a:s r="2433">
                                    <a:s r="2432">
                                       <a:s>MR</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2433">
                                       <a:s>medication</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> ~ </a:s>
                                 <a:s r="2435">
                                    <a:s r="2434">
                                       <a:s>HCC</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2435">
                                       <a:s>&quot;methadone&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
        //and &quot;GetMedicationDailyDose&quot;(MR.dosageInstruction, &quot;DosesPerDay&quot;(singleton from MR.dosageInstruction.timing.repeat.frequencyMax)) >= 60 'mg/d'
        and </a:s>
                           <a:s r="2441">
                              <a:s r="2439">
                                 <a:s>MedicationRequestPeriod(</a:s>
                                 <a:s r="2438">
                                    <a:s>MR</a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                              <a:s r="2441"> starts before </a:s>
                              <a:s r="2440">
                                 <a:s>&quot;Measurement Date&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
        and </a:s>
                        <a:s r="2446">
                           <a:s r="2444">
                              <a:s>MedicationRequestPeriod(</a:s>
                              <a:s r="2443">
                                 <a:s>MR</a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                           <a:s r="2446"> ends after </a:s>
                           <a:s r="2445">
                              <a:s>&quot;Measurement Date&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2448" locator="774:1-780:69" xsi:type="Query">
            <source localId="2422" locator="774:1-774:22" alias="MR">
               <expression localId="2421" locator="774:1-774:19" dataType="fhir:MedicationRequest" templateId="http://hl7.org/fhir/StructureDefinition/MedicationRequest" xsi:type="Retrieve"/>
            </source>
            <where localId="2447" locator="775:9-780:69" xsi:type="And">
               <operand localId="2442" locator="775:15-779:72" xsi:type="And">
                  <operand localId="2437" locator="775:15-777:43" xsi:type="And">
                     <operand localId="2431" locator="775:15-776:31" xsi:type="And">
                        <operand localId="2426" locator="775:15-775:37" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2424" locator="775:15-775:23" path="status" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="2425" locator="775:27-775:37" valueType="t:String" value="completed" xsi:type="Literal"/>
                        </operand>
                        <operand localId="2430" locator="776:13-776:31" xsi:type="Equal">
                           <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2428" locator="776:13-776:21" path="intent" scope="MR" xsi:type="Property"/>
                           </operand>
                           <operand localId="2429" locator="776:25-776:31" valueType="t:String" value="order" xsi:type="Literal"/>
                        </operand>
                     </operand>
                     <operand localId="2436" locator="777:13-777:43" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:CodeableConcept" xsi:type="As">
                              <operand localId="2433" locator="777:13-777:25" path="medication" scope="MR" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2435" locator="777:29-777:43" name="methadone" libraryName="HCC" xsi:type="CodeRef"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2441" locator="779:13-779:72" xsi:type="Before">
                     <operand locator="779:41-779:46" xsi:type="Start">
                        <operand localId="2439" locator="779:13-779:39" name="MedicationRequestPeriod" xsi:type="FunctionRef">
                           <operand localId="2438" locator="779:37-779:38" name="MR" xsi:type="AliasRef"/>
                        </operand>
                     </operand>
                     <operand xsi:type="ToDateTime">
                        <operand localId="2440" locator="779:55-779:72" name="Measurement Date" xsi:type="ParameterRef"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2446" locator="780:13-780:69" xsi:type="After">
                  <operand locator="780:41-780:44" xsi:type="End">
                     <operand localId="2444" locator="780:13-780:39" name="MedicationRequestPeriod" xsi:type="FunctionRef">
                        <operand localId="2443" locator="780:37-780:38" name="MR" xsi:type="AliasRef"/>
                     </operand>
                  </operand>
                  <operand xsi:type="ToDateTime">
                     <operand localId="2445" locator="780:52-780:69" name="Measurement Date" xsi:type="ParameterRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2463" locator="782:1-785:60" name="VMMC_done" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2463">
               <a:s>define &quot;VMMC_done&quot;:
</a:s>
               <a:s r="2462">
                  <a:s>
                     <a:s r="2451">
                        <a:s r="2450">
                           <a:s r="2450">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2461">
                     <a:s>where </a:s>
                     <a:s r="2461">
                        <a:s r="2455">
                           <a:s r="2453">
                              <a:s r="2452">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2453">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="2454">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="2460">
                           <a:s r="2457">
                              <a:s r="2456">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2457">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2459">
                              <a:s r="2458">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2459">
                                 <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2462" locator="783:1-785:60" xsi:type="Query">
            <source localId="2451" locator="783:1-783:13" alias="P">
               <expression localId="2450" locator="783:1-783:11" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="2461" locator="784:3-785:60" xsi:type="And">
               <operand localId="2455" locator="784:9-784:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2453" locator="784:9-784:16" path="status" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="2454" locator="784:20-784:30" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="2460" locator="785:7-785:60" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2457" locator="785:7-785:12" path="code" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2459" locator="785:16-785:60" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2516" locator="787:1-796:31" name="VMMC_adverse_event" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2516">
               <a:s>define &quot;VMMC_adverse_event&quot;:
</a:s>
               <a:s r="2515">
                  <a:s>
                     <a:s r="2465">
                        <a:s r="2464">
                           <a:s r="2464">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2510">
                     <a:s>with </a:s>
                     <a:s r="2467">
                        <a:s r="2466">
                           <a:s r="2466">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2509">
                        <a:s r="2503">
                           <a:s r="2495">
                              <a:s r="2489">
                                 <a:s r="2483">
                                    <a:s r="2477">
                                       <a:s r="2472">
                                          <a:s r="2470">
                                             <a:s r="2469">
                                                <a:s r="2468">
                                                   <a:s>AE</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2469">
                                                   <a:s>suspectEntity</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2470">
                                                <a:s>instance</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2472">
                                             <a:s>references(</a:s>
                                             <a:s r="2471">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="2476">
                                          <a:s r="2474">
                                             <a:s r="2473">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2474">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="2475">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      and </a:s>
                                    <a:s r="2482">
                                       <a:s r="2479">
                                          <a:s r="2478">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2479">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~  </a:s>
                                       <a:s r="2481">
                                          <a:s r="2480">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2481">
                                             <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2488">
                                    <a:s r="2485">
                                       <a:s r="2484">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2485">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="2488"> after </a:s>
                                    <a:s r="2487">
                                       <a:s>start of </a:s>
                                       <a:s r="2486">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2494">
                                 <a:s r="2491">
                                    <a:s r="2490">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2491">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2494"> before </a:s>
                                 <a:s r="2493">
                                    <a:s>end of </a:s>
                                    <a:s r="2492">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2502">
                              <a:s r="2497">
                                 <a:s r="2496">
                                    <a:s>AE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2497">
                                    <a:s>date</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> &lt;= </a:s>
                              <a:s r="2501">
                                 <a:s>(</a:s>
                                 <a:s r="2501">
                                    <a:s r="2499">
                                       <a:s r="2498">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2499">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="2500">
                                       <a:s>30 days</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2508">
                           <a:s r="2505">
                              <a:s r="2504">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2505">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> >= </a:s>
                           <a:s r="2507">
                              <a:s>(</a:s>
                              <a:s r="2507">
                                 <a:s r="2506">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2507">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2514">
                     <a:s>where </a:s>
                     <a:s r="2514">
                        <a:s r="2512">
                           <a:s r="2511">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2512">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2513">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2515" locator="788:1-796:31" xsi:type="Query">
            <source localId="2465" locator="788:1-788:17" alias="AE">
               <expression localId="2464" locator="788:1-788:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2510" locator="789:3-795:34" alias="P" xsi:type="With">
               <expression localId="2466" locator="789:8-789:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2509" locator="790:17-795:34" xsi:type="And">
                  <operand localId="2503" locator="790:17-794:44" xsi:type="And">
                     <operand localId="2495" locator="790:17-793:56" xsi:type="And">
                        <operand localId="2489" locator="790:17-792:57" xsi:type="And">
                           <operand localId="2483" locator="790:17-791:65" xsi:type="And">
                              <operand localId="2477" locator="790:17-790:82" xsi:type="And">
                                 <operand localId="2472" locator="790:17-790:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="2470" locator="790:17-790:41" xsi:type="Query">
                                       <source alias="$this">
                                          <expression localId="2469" locator="790:17-790:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                       </source>
                                       <where xsi:type="Not">
                                          <operand xsi:type="IsNull">
                                             <operand path="instance" xsi:type="Property">
                                                <source name="$this" xsi:type="AliasRef"/>
                                             </operand>
                                          </operand>
                                       </where>
                                       <return distinct="false">
                                          <expression path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </operand>
                                    <operand localId="2471" locator="790:54" name="P" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="2476" locator="790:61-790:82" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2474" locator="790:61-790:68" path="status" scope="P" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="2475" locator="790:72-790:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="2482" locator="791:11-791:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2479" locator="791:11-791:16" path="code" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="2481" locator="791:21-791:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="2488" locator="792:11-792:57" xsi:type="After">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="2485" locator="792:11-792:21" path="performed" scope="P" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="2487" locator="792:29-792:57" xsi:type="Start">
                                    <operand localId="2486" locator="792:38-792:57" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2494" locator="793:11-793:56" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2491" locator="793:11-793:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2493" locator="793:30-793:56" xsi:type="End">
                                 <operand localId="2492" locator="793:37-793:56" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2502" locator="794:11-794:44" xsi:type="LessOrEqual">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2497" locator="794:11-794:17" path="date" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand localId="2501" locator="794:22-794:44" xsi:type="Add">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2499" locator="794:23-794:33" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="2500" locator="794:37-794:43" value="30" unit="days" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2508" locator="795:11-795:34" xsi:type="GreaterOrEqual">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2505" locator="795:11-795:17" path="date" scope="AE" xsi:type="Property"/>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="2507" locator="795:22-795:34" path="performed" scope="P" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2514" locator="796:3-796:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2512" locator="796:9-796:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2513" locator="796:24-796:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2676" locator="798:1-814:7" name="VMMC_adverse_event_type" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2676">
               <a:s>define &quot;VMMC_adverse_event_type&quot;:
    </a:s>
               <a:s r="2675">
                  <a:s>case 
        </a:s>
                  <a:s r="2528">
                     <a:s>when </a:s>
                     <a:s r="2525">
                        <a:s>exists</a:s>
                        <a:s r="2524">
                           <a:s>(</a:s>
                           <a:s r="2524">
                              <a:s>
                                 <a:s r="2518">
                                    <a:s r="2517">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2523">
                                 <a:s>where </a:s>
                                 <a:s r="2523">
                                    <a:s r="2520">
                                       <a:s r="2519">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2520">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2522">
                                       <a:s r="2521">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2522">
                                          <a:s>&quot;Abnormal pain&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2527">
                        <a:s r="2526">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2527">
                           <a:s>&quot;Abnormal pain&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2540">
                     <a:s>when </a:s>
                     <a:s r="2537">
                        <a:s>exists</a:s>
                        <a:s r="2536">
                           <a:s>(</a:s>
                           <a:s r="2536">
                              <a:s>
                                 <a:s r="2530">
                                    <a:s r="2529">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2535">
                                 <a:s>where </a:s>
                                 <a:s r="2535">
                                    <a:s r="2532">
                                       <a:s r="2531">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2532">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2534">
                                       <a:s r="2533">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2534">
                                          <a:s>&quot;Anaesthesia-related effects&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2539">
                        <a:s r="2538">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2539">
                           <a:s>&quot;Anaesthesia-related effects&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2552">
                     <a:s>when </a:s>
                     <a:s r="2549">
                        <a:s>exists</a:s>
                        <a:s r="2548">
                           <a:s>(</a:s>
                           <a:s r="2548">
                              <a:s>
                                 <a:s r="2542">
                                    <a:s r="2541">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2547">
                                 <a:s>where </a:s>
                                 <a:s r="2547">
                                    <a:s r="2544">
                                       <a:s r="2543">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2544">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2546">
                                       <a:s r="2545">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2546">
                                          <a:s>&quot;Damage to the penis&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2551">
                        <a:s r="2550">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2551">
                           <a:s>&quot;Damage to the penis&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2564">
                     <a:s>when </a:s>
                     <a:s r="2561">
                        <a:s>exists</a:s>
                        <a:s r="2560">
                           <a:s>(</a:s>
                           <a:s r="2560">
                              <a:s>
                                 <a:s r="2554">
                                    <a:s r="2553">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2559">
                                 <a:s>where </a:s>
                                 <a:s r="2559">
                                    <a:s r="2556">
                                       <a:s r="2555">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2556">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2558">
                                       <a:s r="2557">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2558">
                                          <a:s>&quot;Difficulty urinating&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2563">
                        <a:s r="2562">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2563">
                           <a:s>&quot;Difficulty urinating&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2576">
                     <a:s>when </a:s>
                     <a:s r="2573">
                        <a:s>exists</a:s>
                        <a:s r="2572">
                           <a:s>(</a:s>
                           <a:s r="2572">
                              <a:s>
                                 <a:s r="2566">
                                    <a:s r="2565">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2571">
                                 <a:s>where </a:s>
                                 <a:s r="2571">
                                    <a:s r="2568">
                                       <a:s r="2567">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2568">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2570">
                                       <a:s r="2569">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2570">
                                          <a:s>&quot;Excessive bleeding&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2575">
                        <a:s r="2574">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2575">
                           <a:s>&quot;Excessive bleeding&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2588">
                     <a:s>when </a:s>
                     <a:s r="2585">
                        <a:s>exists</a:s>
                        <a:s r="2584">
                           <a:s>(</a:s>
                           <a:s r="2584">
                              <a:s>
                                 <a:s r="2578">
                                    <a:s r="2577">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2583">
                                 <a:s>where </a:s>
                                 <a:s r="2583">
                                    <a:s r="2580">
                                       <a:s r="2579">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2580">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2582">
                                       <a:s r="2581">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2582">
                                          <a:s>&quot;Excessive skin removal&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2587">
                        <a:s r="2586">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2587">
                           <a:s>&quot;Excessive skin removal&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2600">
                     <a:s>when </a:s>
                     <a:s r="2597">
                        <a:s>exists</a:s>
                        <a:s r="2596">
                           <a:s>(</a:s>
                           <a:s r="2596">
                              <a:s>
                                 <a:s r="2590">
                                    <a:s r="2589">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2595">
                                 <a:s>where </a:s>
                                 <a:s r="2595">
                                    <a:s r="2592">
                                       <a:s r="2591">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2592">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2594">
                                       <a:s r="2593">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2594">
                                          <a:s>&quot;Excessive swelling&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2599">
                        <a:s r="2598">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2599">
                           <a:s>&quot;Excessive swelling&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2612">
                     <a:s>when </a:s>
                     <a:s r="2609">
                        <a:s>exists</a:s>
                        <a:s r="2608">
                           <a:s>(</a:s>
                           <a:s r="2608">
                              <a:s>
                                 <a:s r="2602">
                                    <a:s r="2601">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2607">
                                 <a:s>where </a:s>
                                 <a:s r="2607">
                                    <a:s r="2604">
                                       <a:s r="2603">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2604">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2606">
                                       <a:s r="2605">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2606">
                                          <a:s>&quot;Haematoma&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2611">
                        <a:s r="2610">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2611">
                           <a:s>&quot;Haematoma&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2624">
                     <a:s>when </a:s>
                     <a:s r="2621">
                        <a:s>exists</a:s>
                        <a:s r="2620">
                           <a:s>(</a:s>
                           <a:s r="2620">
                              <a:s>
                                 <a:s r="2614">
                                    <a:s r="2613">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2619">
                                 <a:s>where </a:s>
                                 <a:s r="2619">
                                    <a:s r="2616">
                                       <a:s r="2615">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2616">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2618">
                                       <a:s r="2617">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2618">
                                          <a:s>&quot;Infection&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2623">
                        <a:s r="2622">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2623">
                           <a:s>&quot;Infection&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2636">
                     <a:s>when </a:s>
                     <a:s r="2633">
                        <a:s>exists</a:s>
                        <a:s r="2632">
                           <a:s>(</a:s>
                           <a:s r="2632">
                              <a:s>
                                 <a:s r="2626">
                                    <a:s r="2625">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2631">
                                 <a:s>where </a:s>
                                 <a:s r="2631">
                                    <a:s r="2628">
                                       <a:s r="2627">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2628">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2630">
                                       <a:s r="2629">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2630">
                                          <a:s>&quot;Injury to glans&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2635">
                        <a:s r="2634">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2635">
                           <a:s>&quot;Injury to glans&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2648">
                     <a:s>when </a:s>
                     <a:s r="2645">
                        <a:s>exists</a:s>
                        <a:s r="2644">
                           <a:s>(</a:s>
                           <a:s r="2644">
                              <a:s>
                                 <a:s r="2638">
                                    <a:s r="2637">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2643">
                                 <a:s>where </a:s>
                                 <a:s r="2643">
                                    <a:s r="2640">
                                       <a:s r="2639">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2640">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2642">
                                       <a:s r="2641">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2642">
                                          <a:s>&quot;Scar or disfigurement&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2647">
                        <a:s r="2646">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2647">
                           <a:s>&quot;Scar or disfigurement&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2660">
                     <a:s>when </a:s>
                     <a:s r="2657">
                        <a:s>exists</a:s>
                        <a:s r="2656">
                           <a:s>(</a:s>
                           <a:s r="2656">
                              <a:s>
                                 <a:s r="2650">
                                    <a:s r="2649">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2655">
                                 <a:s>where </a:s>
                                 <a:s r="2655">
                                    <a:s r="2652">
                                       <a:s r="2651">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2652">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2654">
                                       <a:s r="2653">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2654">
                                          <a:s>&quot;Sharps injury to personnel&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2659">
                        <a:s r="2658">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2659">
                           <a:s>&quot;Sharps injury to personnel&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2672">
                     <a:s>when </a:s>
                     <a:s r="2669">
                        <a:s>exists</a:s>
                        <a:s r="2668">
                           <a:s>(</a:s>
                           <a:s r="2668">
                              <a:s>
                                 <a:s r="2662">
                                    <a:s r="2661">
                                       <a:s>
                                          <a:s>&quot;VMMC_adverse_event&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> AE</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> </a:s>
                              <a:s r="2667">
                                 <a:s>where </a:s>
                                 <a:s r="2667">
                                    <a:s r="2664">
                                       <a:s r="2663">
                                          <a:s>AE</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2664">
                                          <a:s>event</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~ </a:s>
                                    <a:s r="2666">
                                       <a:s r="2665">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2666">
                                          <a:s>&quot;Wound disruption&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2671">
                        <a:s r="2670">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2671">
                           <a:s>&quot;Wound disruption&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        else </a:s>
                  <a:s r="2674">
                     <a:s r="2673">
                        <a:s>HC</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2674">
                        <a:s>&quot;Other - HIV.B.DE222&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2675" locator="799:5-814:7" xsi:type="Case">
            <caseItem localId="2528" locator="800:9-800:105">
               <when localId="2525" locator="800:14-800:80" xsi:type="Exists">
                  <operand localId="2524" locator="800:20-800:80" xsi:type="Query">
                     <source localId="2518" locator="800:21-800:43" alias="AE">
                        <expression localId="2517" locator="800:21-800:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2523" locator="800:45-800:79" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2520" locator="800:51-800:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2522" locator="800:62-800:79" name="Abnormal pain" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2527" locator="800:88-800:105" name="Abnormal pain" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2540" locator="801:9-801:133">
               <when localId="2537" locator="801:14-801:94" xsi:type="Exists">
                  <operand localId="2536" locator="801:20-801:94" xsi:type="Query">
                     <source localId="2530" locator="801:21-801:43" alias="AE">
                        <expression localId="2529" locator="801:21-801:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2535" locator="801:45-801:93" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2532" locator="801:51-801:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2534" locator="801:62-801:93" name="Anaesthesia-related effects" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2539" locator="801:102-801:133" name="Anaesthesia-related effects" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2552" locator="802:9-802:117">
               <when localId="2549" locator="802:14-802:86" xsi:type="Exists">
                  <operand localId="2548" locator="802:20-802:86" xsi:type="Query">
                     <source localId="2542" locator="802:21-802:43" alias="AE">
                        <expression localId="2541" locator="802:21-802:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2547" locator="802:45-802:85" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2544" locator="802:51-802:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2546" locator="802:62-802:85" name="Damage to the penis" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2551" locator="802:94-802:117" name="Damage to the penis" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2564" locator="803:9-803:119">
               <when localId="2561" locator="803:14-803:87" xsi:type="Exists">
                  <operand localId="2560" locator="803:20-803:87" xsi:type="Query">
                     <source localId="2554" locator="803:21-803:43" alias="AE">
                        <expression localId="2553" locator="803:21-803:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2559" locator="803:45-803:86" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2556" locator="803:51-803:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2558" locator="803:62-803:86" name="Difficulty urinating" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2563" locator="803:95-803:119" name="Difficulty urinating" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2576" locator="804:9-804:115">
               <when localId="2573" locator="804:14-804:85" xsi:type="Exists">
                  <operand localId="2572" locator="804:20-804:85" xsi:type="Query">
                     <source localId="2566" locator="804:21-804:43" alias="AE">
                        <expression localId="2565" locator="804:21-804:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2571" locator="804:45-804:84" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2568" locator="804:51-804:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2570" locator="804:62-804:84" name="Excessive bleeding" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2575" locator="804:93-804:115" name="Excessive bleeding" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2588" locator="805:9-805:123">
               <when localId="2585" locator="805:14-805:89" xsi:type="Exists">
                  <operand localId="2584" locator="805:20-805:89" xsi:type="Query">
                     <source localId="2578" locator="805:21-805:43" alias="AE">
                        <expression localId="2577" locator="805:21-805:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2583" locator="805:45-805:88" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2580" locator="805:51-805:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2582" locator="805:62-805:88" name="Excessive skin removal" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2587" locator="805:97-805:123" name="Excessive skin removal" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2600" locator="806:9-806:115">
               <when localId="2597" locator="806:14-806:85" xsi:type="Exists">
                  <operand localId="2596" locator="806:20-806:85" xsi:type="Query">
                     <source localId="2590" locator="806:21-806:43" alias="AE">
                        <expression localId="2589" locator="806:21-806:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2595" locator="806:45-806:84" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2592" locator="806:51-806:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2594" locator="806:62-806:84" name="Excessive swelling" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2599" locator="806:93-806:115" name="Excessive swelling" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2612" locator="807:9-807:97">
               <when localId="2609" locator="807:14-807:76" xsi:type="Exists">
                  <operand localId="2608" locator="807:20-807:76" xsi:type="Query">
                     <source localId="2602" locator="807:21-807:43" alias="AE">
                        <expression localId="2601" locator="807:21-807:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2607" locator="807:45-807:75" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2604" locator="807:51-807:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2606" locator="807:62-807:75" name="Haematoma" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2611" locator="807:84-807:97" name="Haematoma" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2624" locator="808:9-808:97">
               <when localId="2621" locator="808:14-808:76" xsi:type="Exists">
                  <operand localId="2620" locator="808:20-808:76" xsi:type="Query">
                     <source localId="2614" locator="808:21-808:43" alias="AE">
                        <expression localId="2613" locator="808:21-808:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2619" locator="808:45-808:75" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2616" locator="808:51-808:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2618" locator="808:62-808:75" name="Infection" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2623" locator="808:84-808:97" name="Infection" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2636" locator="809:9-809:109">
               <when localId="2633" locator="809:14-809:82" xsi:type="Exists">
                  <operand localId="2632" locator="809:20-809:82" xsi:type="Query">
                     <source localId="2626" locator="809:21-809:43" alias="AE">
                        <expression localId="2625" locator="809:21-809:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2631" locator="809:45-809:81" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2628" locator="809:51-809:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2630" locator="809:62-809:81" name="Injury to glans" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2635" locator="809:90-809:109" name="Injury to glans" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2648" locator="810:9-810:121">
               <when localId="2645" locator="810:14-810:88" xsi:type="Exists">
                  <operand localId="2644" locator="810:20-810:88" xsi:type="Query">
                     <source localId="2638" locator="810:21-810:43" alias="AE">
                        <expression localId="2637" locator="810:21-810:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2643" locator="810:45-810:87" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2640" locator="810:51-810:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2642" locator="810:62-810:87" name="Scar or disfigurement" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2647" locator="810:96-810:121" name="Scar or disfigurement" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2660" locator="811:9-811:131">
               <when localId="2657" locator="811:14-811:93" xsi:type="Exists">
                  <operand localId="2656" locator="811:20-811:93" xsi:type="Query">
                     <source localId="2650" locator="811:21-811:43" alias="AE">
                        <expression localId="2649" locator="811:21-811:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2655" locator="811:45-811:92" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2652" locator="811:51-811:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2654" locator="811:62-811:92" name="Sharps injury to personnel" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2659" locator="811:101-811:131" name="Sharps injury to personnel" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2672" locator="812:9-812:111">
               <when localId="2669" locator="812:14-812:83" xsi:type="Exists">
                  <operand localId="2668" locator="812:20-812:83" xsi:type="Query">
                     <source localId="2662" locator="812:21-812:43" alias="AE">
                        <expression localId="2661" locator="812:21-812:40" name="VMMC_adverse_event" xsi:type="ExpressionRef"/>
                     </source>
                     <where localId="2667" locator="812:45-812:82" xsi:type="Equivalent">
                        <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2664" locator="812:51-812:58" path="event" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand xsi:type="ToConcept">
                           <operand localId="2666" locator="812:62-812:82" name="Wound disruption" libraryName="HC" xsi:type="CodeRef"/>
                        </operand>
                     </where>
                  </operand>
               </when>
               <then localId="2671" locator="812:91-812:111" name="Wound disruption" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else localId="2674" locator="813:14-813:37" name="Other - HIV.B.DE222" libraryName="HC" xsi:type="CodeRef"/>
         </expression>
      </def>
      <def localId="2721" locator="816:1-824:31" name="VMMC_adverse_event_Intraoperative" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2721">
               <a:s>define &quot;VMMC_adverse_event_Intraoperative&quot;:
</a:s>
               <a:s r="2720">
                  <a:s>
                     <a:s r="2678">
                        <a:s r="2677">
                           <a:s r="2677">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2715">
                     <a:s>with </a:s>
                     <a:s r="2680">
                        <a:s r="2679">
                           <a:s r="2679">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2714">
                        <a:s r="2708">
                           <a:s r="2702">
                              <a:s r="2696">
                                 <a:s r="2690">
                                    <a:s r="2685">
                                       <a:s r="2683">
                                          <a:s r="2682">
                                             <a:s r="2681">
                                                <a:s>AE</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2682">
                                                <a:s>suspectEntity</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2683">
                                             <a:s>instance</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2685">
                                          <a:s>references(</a:s>
                                          <a:s r="2684">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>)</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> and </a:s>
                                    <a:s r="2689">
                                       <a:s r="2687">
                                          <a:s r="2686">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2687">
                                             <a:s>status</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> = </a:s>
                                       <a:s r="2688">
                                          <a:s>'completed'</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s> 
      and </a:s>
                                 <a:s r="2695">
                                    <a:s r="2692">
                                       <a:s r="2691">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2692">
                                          <a:s>code</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> ~  </a:s>
                                    <a:s r="2694">
                                       <a:s r="2693">
                                          <a:s>HC</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2694">
                                          <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2701">
                                 <a:s r="2698">
                                    <a:s r="2697">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2698">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2701"> after </a:s>
                                 <a:s r="2700">
                                    <a:s>start of </a:s>
                                    <a:s r="2699">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2707">
                              <a:s r="2704">
                                 <a:s r="2703">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2704">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s r="2707"> before </a:s>
                              <a:s r="2706">
                                 <a:s>end of </a:s>
                                 <a:s r="2705">
                                    <a:s>&quot;Measurement Period&quot;</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2713">
                           <a:s r="2710">
                              <a:s r="2709">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2710">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="2712">
                              <a:s r="2711">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2712">
                                 <a:s>performed</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2719">
                     <a:s>where </a:s>
                     <a:s r="2719">
                        <a:s r="2717">
                           <a:s r="2716">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2717">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2718">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2720" locator="817:1-824:31" xsi:type="Query">
            <source localId="2678" locator="817:1-817:17" alias="AE">
               <expression localId="2677" locator="817:1-817:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2715" locator="818:3-823:31" alias="P" xsi:type="With">
               <expression localId="2679" locator="818:8-818:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2714" locator="819:17-823:31" xsi:type="And">
                  <operand localId="2708" locator="819:17-822:56" xsi:type="And">
                     <operand localId="2702" locator="819:17-821:57" xsi:type="And">
                        <operand localId="2696" locator="819:17-820:65" xsi:type="And">
                           <operand localId="2690" locator="819:17-819:82" xsi:type="And">
                              <operand localId="2685" locator="819:17-819:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                 <operand localId="2683" locator="819:17-819:41" xsi:type="Query">
                                    <source alias="$this">
                                       <expression localId="2682" locator="819:17-819:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                    </source>
                                    <where xsi:type="Not">
                                       <operand xsi:type="IsNull">
                                          <operand path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </operand>
                                       </operand>
                                    </where>
                                    <return distinct="false">
                                       <expression path="instance" xsi:type="Property">
                                          <source name="$this" xsi:type="AliasRef"/>
                                       </expression>
                                    </return>
                                 </operand>
                                 <operand localId="2684" locator="819:54" name="P" xsi:type="AliasRef"/>
                              </operand>
                              <operand localId="2689" locator="819:61-819:82" xsi:type="Equal">
                                 <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2687" locator="819:61-819:68" path="status" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand localId="2688" locator="819:72-819:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                              </operand>
                           </operand>
                           <operand localId="2695" locator="820:11-820:65" xsi:type="Equivalent">
                              <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand localId="2692" locator="820:11-820:16" path="code" scope="P" xsi:type="Property"/>
                              </operand>
                              <operand xsi:type="ToConcept">
                                 <operand localId="2694" locator="820:21-820:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2701" locator="821:11-821:57" xsi:type="After">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2698" locator="821:11-821:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2700" locator="821:29-821:57" xsi:type="Start">
                                 <operand localId="2699" locator="821:38-821:57" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2707" locator="822:11-822:56" xsi:type="Before">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand asType="fhir:dateTime" xsi:type="As">
                              <operand localId="2704" locator="822:11-822:21" path="performed" scope="P" xsi:type="Property"/>
                           </operand>
                        </operand>
                        <operand xsi:type="ToDateTime">
                           <operand localId="2706" locator="822:30-822:56" xsi:type="End">
                              <operand localId="2705" locator="822:37-822:56" name="Measurement Period" xsi:type="ParameterRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2713" locator="823:11-823:31" xsi:type="Equal">
                     <operand localId="2710" locator="823:11-823:17" path="date" scope="AE" xsi:type="Property"/>
                     <operand asType="fhir:dateTime" xsi:type="As">
                        <operand localId="2712" locator="823:21-823:31" path="performed" scope="P" xsi:type="Property"/>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2719" locator="824:3-824:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2717" locator="824:9-824:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2718" locator="824:24-824:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2774" locator="826:1-835:31" name="VMMC_adverse_event_Postoperative" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2774">
               <a:s>define &quot;VMMC_adverse_event_Postoperative&quot;:
</a:s>
               <a:s r="2773">
                  <a:s>
                     <a:s r="2723">
                        <a:s r="2722">
                           <a:s r="2722">
                              <a:s>[AdverseEvent]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> AE</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
  </a:s>
                  <a:s r="2768">
                     <a:s>with </a:s>
                     <a:s r="2725">
                        <a:s r="2724">
                           <a:s r="2724">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                     <a:s>
      such that </a:s>
                     <a:s r="2767">
                        <a:s r="2761">
                           <a:s r="2753">
                              <a:s r="2747">
                                 <a:s r="2741">
                                    <a:s r="2735">
                                       <a:s r="2730">
                                          <a:s r="2728">
                                             <a:s r="2727">
                                                <a:s r="2726">
                                                   <a:s>AE</a:s>
                                                </a:s>
                                                <a:s>.</a:s>
                                                <a:s r="2727">
                                                   <a:s>suspectEntity</a:s>
                                                </a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2728">
                                                <a:s>instance</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2730">
                                             <a:s>references(</a:s>
                                             <a:s r="2729">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>)</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> and </a:s>
                                       <a:s r="2734">
                                          <a:s r="2732">
                                             <a:s r="2731">
                                                <a:s>P</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2732">
                                                <a:s>status</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> = </a:s>
                                          <a:s r="2733">
                                             <a:s>'completed'</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> 
      and </a:s>
                                    <a:s r="2740">
                                       <a:s r="2737">
                                          <a:s r="2736">
                                             <a:s>P</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2737">
                                             <a:s>code</a:s>
                                          </a:s>
                                       </a:s>
                                       <a:s> ~  </a:s>
                                       <a:s r="2739">
                                          <a:s r="2738">
                                             <a:s>HC</a:s>
                                          </a:s>
                                          <a:s>.</a:s>
                                          <a:s r="2739">
                                             <a:s>&quot;Voluntary medical male circumcision VMMC&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      and </a:s>
                                 <a:s r="2746">
                                    <a:s r="2743">
                                       <a:s r="2742">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2743">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s r="2746"> after </a:s>
                                    <a:s r="2745">
                                       <a:s>start of </a:s>
                                       <a:s r="2744">
                                          <a:s>&quot;Measurement Period&quot;</a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      and </a:s>
                              <a:s r="2752">
                                 <a:s r="2749">
                                    <a:s r="2748">
                                       <a:s>P</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2749">
                                       <a:s>performed</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s r="2752"> before </a:s>
                                 <a:s r="2751">
                                    <a:s>end of </a:s>
                                    <a:s r="2750">
                                       <a:s>&quot;Measurement Period&quot;</a:s>
                                    </a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="2760">
                              <a:s r="2755">
                                 <a:s r="2754">
                                    <a:s>AE</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2755">
                                    <a:s>date</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> &lt;= </a:s>
                              <a:s r="2759">
                                 <a:s>(</a:s>
                                 <a:s r="2759">
                                    <a:s r="2757">
                                       <a:s r="2756">
                                          <a:s>P</a:s>
                                       </a:s>
                                       <a:s>.</a:s>
                                       <a:s r="2757">
                                          <a:s>performed</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> + </a:s>
                                    <a:s r="2758">
                                       <a:s>30 days</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="2766">
                           <a:s r="2763">
                              <a:s r="2762">
                                 <a:s>AE</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2763">
                                 <a:s>date</a:s>
                              </a:s>
                           </a:s>
                           <a:s> > </a:s>
                           <a:s r="2765">
                              <a:s>(</a:s>
                              <a:s r="2765">
                                 <a:s r="2764">
                                    <a:s>P</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2765">
                                    <a:s>performed</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>)</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="2772">
                     <a:s>where </a:s>
                     <a:s r="2772">
                        <a:s r="2770">
                           <a:s r="2769">
                              <a:s>AE</a:s>
                           </a:s>
                           <a:s>.</a:s>
                           <a:s r="2770">
                              <a:s>actuality</a:s>
                           </a:s>
                        </a:s>
                        <a:s> = </a:s>
                        <a:s r="2771">
                           <a:s>'actual'</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2773" locator="827:1-835:31" xsi:type="Query">
            <source localId="2723" locator="827:1-827:17" alias="AE">
               <expression localId="2722" locator="827:1-827:14" dataType="fhir:AdverseEvent" templateId="http://hl7.org/fhir/StructureDefinition/AdverseEvent" xsi:type="Retrieve"/>
            </source>
            <relationship localId="2768" locator="828:3-834:33" alias="P" xsi:type="With">
               <expression localId="2724" locator="828:8-828:18" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
               <suchThat localId="2767" locator="829:17-834:33" xsi:type="And">
                  <operand localId="2761" locator="829:17-833:44" xsi:type="And">
                     <operand localId="2753" locator="829:17-832:56" xsi:type="And">
                        <operand localId="2747" locator="829:17-831:57" xsi:type="And">
                           <operand localId="2741" locator="829:17-830:65" xsi:type="And">
                              <operand localId="2735" locator="829:17-829:82" xsi:type="And">
                                 <operand localId="2730" locator="829:17-829:55" name="references" libraryName="WCom" xsi:type="FunctionRef">
                                    <operand localId="2728" locator="829:17-829:41" xsi:type="Query">
                                       <source alias="$this">
                                          <expression localId="2727" locator="829:17-829:32" path="suspectEntity" scope="AE" xsi:type="Property"/>
                                       </source>
                                       <where xsi:type="Not">
                                          <operand xsi:type="IsNull">
                                             <operand path="instance" xsi:type="Property">
                                                <source name="$this" xsi:type="AliasRef"/>
                                             </operand>
                                          </operand>
                                       </where>
                                       <return distinct="false">
                                          <expression path="instance" xsi:type="Property">
                                             <source name="$this" xsi:type="AliasRef"/>
                                          </expression>
                                       </return>
                                    </operand>
                                    <operand localId="2729" locator="829:54" name="P" xsi:type="AliasRef"/>
                                 </operand>
                                 <operand localId="2734" locator="829:61-829:82" xsi:type="Equal">
                                    <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                       <operand localId="2732" locator="829:61-829:68" path="status" scope="P" xsi:type="Property"/>
                                    </operand>
                                    <operand localId="2733" locator="829:72-829:82" valueType="t:String" value="completed" xsi:type="Literal"/>
                                 </operand>
                              </operand>
                              <operand localId="2740" locator="830:11-830:65" xsi:type="Equivalent">
                                 <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                    <operand localId="2737" locator="830:11-830:16" path="code" scope="P" xsi:type="Property"/>
                                 </operand>
                                 <operand xsi:type="ToConcept">
                                    <operand localId="2739" locator="830:21-830:65" name="Voluntary medical male circumcision VMMC" libraryName="HC" xsi:type="CodeRef"/>
                                 </operand>
                              </operand>
                           </operand>
                           <operand localId="2746" locator="831:11-831:57" xsi:type="After">
                              <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                                 <operand asType="fhir:dateTime" xsi:type="As">
                                    <operand localId="2743" locator="831:11-831:21" path="performed" scope="P" xsi:type="Property"/>
                                 </operand>
                              </operand>
                              <operand xsi:type="ToDateTime">
                                 <operand localId="2745" locator="831:29-831:57" xsi:type="Start">
                                    <operand localId="2744" locator="831:38-831:57" name="Measurement Period" xsi:type="ParameterRef"/>
                                 </operand>
                              </operand>
                           </operand>
                        </operand>
                        <operand localId="2752" locator="832:11-832:56" xsi:type="Before">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2749" locator="832:11-832:21" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand xsi:type="ToDateTime">
                              <operand localId="2751" locator="832:30-832:56" xsi:type="End">
                                 <operand localId="2750" locator="832:37-832:56" name="Measurement Period" xsi:type="ParameterRef"/>
                              </operand>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2760" locator="833:11-833:44" xsi:type="LessOrEqual">
                        <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="2755" locator="833:11-833:17" path="date" scope="AE" xsi:type="Property"/>
                        </operand>
                        <operand localId="2759" locator="833:22-833:44" xsi:type="Add">
                           <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand asType="fhir:dateTime" xsi:type="As">
                                 <operand localId="2757" locator="833:23-833:33" path="performed" scope="P" xsi:type="Property"/>
                              </operand>
                           </operand>
                           <operand localId="2758" locator="833:37-833:43" value="30" unit="days" xsi:type="Quantity"/>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2766" locator="834:11-834:33" xsi:type="Greater">
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2763" locator="834:11-834:17" path="date" scope="AE" xsi:type="Property"/>
                     </operand>
                     <operand name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand asType="fhir:dateTime" xsi:type="As">
                           <operand localId="2765" locator="834:21-834:33" path="performed" scope="P" xsi:type="Property"/>
                        </operand>
                     </operand>
                  </operand>
               </suchThat>
            </relationship>
            <where localId="2772" locator="835:3-835:31" xsi:type="Equal">
               <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                  <operand localId="2770" locator="835:9-835:20" path="actuality" scope="AE" xsi:type="Property"/>
               </operand>
               <operand localId="2771" locator="835:24-835:31" valueType="t:String" value="actual" xsi:type="Literal"/>
            </where>
         </expression>
      </def>
      <def localId="2787" locator="837:3-842:7" name="VMMC_adverse_event_timing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2787">
               <a:s>define &quot;VMMC_adverse_event_timing&quot;:
    </a:s>
               <a:s r="2786">
                  <a:s>case 
        </a:s>
                  <a:s r="2779">
                     <a:s>when </a:s>
                     <a:s r="2776">
                        <a:s>exists</a:s>
                        <a:s r="2775">
                           <a:s>(</a:s>
                           <a:s r="2775">
                              <a:s>VMMC_adverse_event_Intraoperative</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2778">
                        <a:s r="2777">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2778">
                           <a:s>&quot;Intraoperative&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2784">
                     <a:s>when </a:s>
                     <a:s r="2781">
                        <a:s>exists</a:s>
                        <a:s r="2780">
                           <a:s>(</a:s>
                           <a:s r="2780">
                              <a:s>VMMC_adverse_event_Postoperative</a:s>
                           </a:s>
                           <a:s>)</a:s>
                        </a:s>
                     </a:s>
                     <a:s> then  </a:s>
                     <a:s r="2783">
                        <a:s r="2782">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2783">
                           <a:s>&quot;Postoperative&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="2785">
        else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2786" locator="838:5-842:7" xsi:type="Case">
            <caseItem localId="2779" locator="839:9-839:80">
               <when localId="2776" locator="839:14-839:54" xsi:type="Exists">
                  <operand localId="2775" locator="839:20-839:54" name="VMMC_adverse_event_Intraoperative" xsi:type="ExpressionRef"/>
               </when>
               <then localId="2778" locator="839:62-839:80" name="Intraoperative" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2784" locator="840:9-840:78">
               <when localId="2781" locator="840:14-840:53" xsi:type="Exists">
                  <operand localId="2780" locator="840:20-840:53" name="VMMC_adverse_event_Postoperative" xsi:type="ExpressionRef"/>
               </when>
               <then localId="2783" locator="840:61-840:78" name="Postoperative" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else asType="t:Code" xsi:type="As">
               <operand localId="2785" locator="841:14-841:17" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="2813" locator="845:3-849:57" name="Partner or contact of an index case" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2813">
               <a:s>define &quot;Partner or contact of an index case&quot;:
    </a:s>
               <a:s r="2812">
                  <a:s>
                     <a:s r="2789">
                        <a:s r="2788">
                           <a:s r="2788">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Referred through partner services&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2811">
                     <a:s>where </a:s>
                     <a:s r="2811">
                        <a:s r="2805">
                           <a:s r="2796">
                              <a:s r="2791">
                                 <a:s r="2790">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2791">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2795">
                                 <a:s>{ </a:s>
                                 <a:s r="2792">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2793">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2794">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2804">
                              <a:s>exists</a:s>
                              <a:s r="2803">
                                 <a:s>(</a:s>
                                 <a:s r="2803">
                                    <a:s>
                                       <a:s r="2798">
                                          <a:s r="2797">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2802">
                                       <a:s>where </a:s>
                                       <a:s r="2802">
                                          <a:s r="2799">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2801">
                                             <a:s r="2800">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2801">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2810">
                           <a:s r="2807">
                              <a:s r="2806">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2807">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2809">
                              <a:s r="2808">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2809">
                                 <a:s>&quot;Partner or contact of an index case&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2812" locator="846:5-849:57" xsi:type="Query">
            <source localId="2789" locator="846:5-846:59" alias="O">
               <expression localId="2788" locator="846:5-846:57" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="846:19-846:56" name="Referred through partner services" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2811" locator="847:5-849:57" xsi:type="And">
               <operand localId="2805" locator="847:11-848:61" xsi:type="And">
                  <operand localId="2796" locator="847:11-847:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2791" locator="847:11-847:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2795" locator="847:23-847:57" xsi:type="List">
                        <element localId="2792" locator="847:25-847:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2793" locator="847:34-847:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2794" locator="847:45-847:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2804" locator="848:9-848:61" xsi:type="Exists">
                     <operand localId="2803" locator="848:15-848:61" xsi:type="Query">
                        <source localId="2798" locator="848:16-848:28" alias="OC">
                           <expression localId="2797" locator="848:16-848:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2802" locator="848:30-848:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2799" locator="848:36-848:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2801" locator="848:41-848:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2810" locator="849:9-849:57" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2807" locator="849:9-849:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2809" locator="849:18-849:57" name="Partner or contact of an index case" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2839" locator="851:3-855:57" name="Drug-injecting partner" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2839">
               <a:s>define &quot;Drug-injecting partner&quot;:
    </a:s>
               <a:s r="2838">
                  <a:s>
                     <a:s r="2815">
                        <a:s r="2814">
                           <a:s r="2814">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Type of contact or partner for partner services&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2837">
                     <a:s>where </a:s>
                     <a:s r="2837">
                        <a:s r="2831">
                           <a:s r="2822">
                              <a:s r="2817">
                                 <a:s r="2816">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2817">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2821">
                                 <a:s>{ </a:s>
                                 <a:s r="2818">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2819">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2820">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2830">
                              <a:s>exists</a:s>
                              <a:s r="2829">
                                 <a:s>(</a:s>
                                 <a:s r="2829">
                                    <a:s>
                                       <a:s r="2824">
                                          <a:s r="2823">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2828">
                                       <a:s>where </a:s>
                                       <a:s r="2828">
                                          <a:s r="2825">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2827">
                                             <a:s r="2826">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2827">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2836">
                           <a:s r="2833">
                              <a:s r="2832">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2833">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2835">
                              <a:s r="2834">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2835">
                                 <a:s>&quot;Drug-injecting partner - HIV.B.DE10&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2838" locator="852:5-855:57" xsi:type="Query">
            <source localId="2815" locator="852:5-852:73" alias="O">
               <expression localId="2814" locator="852:5-852:71" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="852:19-852:70" name="Type of contact or partner for partner services" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2837" locator="853:5-855:57" xsi:type="And">
               <operand localId="2831" locator="853:11-854:61" xsi:type="And">
                  <operand localId="2822" locator="853:11-853:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2817" locator="853:11-853:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2821" locator="853:23-853:57" xsi:type="List">
                        <element localId="2818" locator="853:25-853:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2819" locator="853:34-853:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2820" locator="853:45-853:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2830" locator="854:9-854:61" xsi:type="Exists">
                     <operand localId="2829" locator="854:15-854:61" xsi:type="Query">
                        <source localId="2824" locator="854:16-854:28" alias="OC">
                           <expression localId="2823" locator="854:16-854:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2828" locator="854:30-854:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2825" locator="854:36-854:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2827" locator="854:41-854:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2836" locator="855:9-855:57" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2833" locator="855:9-855:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2835" locator="855:18-855:57" name="Drug-injecting partner - HIV.B.DE10" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2865" locator="857:3-861:49" name="Sexual partner" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2865">
               <a:s>define &quot;Sexual partner&quot;:
    </a:s>
               <a:s r="2864">
                  <a:s>
                     <a:s r="2841">
                        <a:s r="2840">
                           <a:s r="2840">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;Type of contact or partner for partner services&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2863">
                     <a:s>where </a:s>
                     <a:s r="2863">
                        <a:s r="2857">
                           <a:s r="2848">
                              <a:s r="2843">
                                 <a:s r="2842">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2843">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2847">
                                 <a:s>{ </a:s>
                                 <a:s r="2844">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2845">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2846">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2856">
                              <a:s>exists</a:s>
                              <a:s r="2855">
                                 <a:s>(</a:s>
                                 <a:s r="2855">
                                    <a:s>
                                       <a:s r="2850">
                                          <a:s r="2849">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2854">
                                       <a:s>where </a:s>
                                       <a:s r="2854">
                                          <a:s r="2851">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2853">
                                             <a:s r="2852">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2853">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2862">
                           <a:s r="2859">
                              <a:s r="2858">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2859">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2861">
                              <a:s r="2860">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2861">
                                 <a:s>&quot;Sexual partner - HIV.B.DE11&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2864" locator="858:5-861:49" xsi:type="Query">
            <source localId="2841" locator="858:5-858:73" alias="O">
               <expression localId="2840" locator="858:5-858:71" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="858:19-858:70" name="Type of contact or partner for partner services" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2863" locator="859:5-861:49" xsi:type="And">
               <operand localId="2857" locator="859:11-860:61" xsi:type="And">
                  <operand localId="2848" locator="859:11-859:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2843" locator="859:11-859:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2847" locator="859:23-859:57" xsi:type="List">
                        <element localId="2844" locator="859:25-859:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2845" locator="859:34-859:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2846" locator="859:45-859:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2856" locator="860:9-860:61" xsi:type="Exists">
                     <operand localId="2855" locator="860:15-860:61" xsi:type="Query">
                        <source localId="2850" locator="860:16-860:28" alias="OC">
                           <expression localId="2849" locator="860:16-860:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2854" locator="860:30-860:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2851" locator="860:36-860:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2853" locator="860:41-860:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2862" locator="861:9-861:49" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2859" locator="861:9-861:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2861" locator="861:18-861:49" name="Sexual partner - HIV.B.DE11" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2869" locator="864:3-865:29" name="First HIV Treatment" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2869">
               <a:s>define &quot;First HIV Treatment&quot;:
    </a:s>
               <a:s r="2868">
                  <a:s>First(</a:s>
                  <a:s r="2867">
                     <a:s r="2866">
                        <a:s>HE</a:s>
                     </a:s>
                     <a:s>.</a:s>
                     <a:s r="2867">
                        <a:s>&quot;On ART H.DE47&quot;</a:s>
                     </a:s>
                  </a:s>
                  <a:s>)</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2868" locator="865:5-865:29" xsi:type="First">
            <source localId="2867" locator="865:11-865:28" name="On ART H.DE47" libraryName="HE" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="2914" locator="868:3-874:7" name="Time to start ART" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2914">
               <a:s>define &quot;Time to start ART&quot;:
    </a:s>
               <a:s r="2913">
                  <a:s>case 
        </a:s>
                  <a:s r="2883">
                     <a:s>when </a:s>
                     <a:s r="2880">
                        <a:s r="2878">
                           <a:s>difference in days between </a:s>
                           <a:s r="2873">
                              <a:s>start of </a:s>
                              <a:s r="2872">
                                 <a:s r="2871">
                                    <a:s r="2870">
                                       <a:s>&quot;First HIV Treatment&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2871">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2872">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2877">
                              <a:s>start of </a:s>
                              <a:s r="2876">
                                 <a:s r="2875">
                                    <a:s r="2874">
                                       <a:s>&quot;First HIV Positive Condition&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2875">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2876">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2879"> &lt;= 7</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="2882">
                        <a:s r="2881">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2882">
                           <a:s>&quot;Within 7 days of HIV diagnosis&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2897">
                     <a:s>when </a:s>
                     <a:s r="2894">
                        <a:s r="2892">
                           <a:s>difference in days between </a:s>
                           <a:s r="2887">
                              <a:s>start of </a:s>
                              <a:s r="2886">
                                 <a:s r="2885">
                                    <a:s r="2884">
                                       <a:s>&quot;First HIV Treatment&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2885">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2886">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2891">
                              <a:s>start of </a:s>
                              <a:s r="2890">
                                 <a:s r="2889">
                                    <a:s r="2888">
                                       <a:s>&quot;First HIV Positive Condition&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2889">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2890">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2893"> &lt;= 30</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="2896">
                        <a:s r="2895">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2896">
                           <a:s>&quot;Within 30 days of HIV diagnosis&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s>
        </a:s>
                  <a:s r="2911">
                     <a:s>when </a:s>
                     <a:s r="2908">
                        <a:s r="2906">
                           <a:s>difference in days between </a:s>
                           <a:s r="2901">
                              <a:s>start of </a:s>
                              <a:s r="2900">
                                 <a:s r="2899">
                                    <a:s r="2898">
                                       <a:s>&quot;First HIV Treatment&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2899">
                                       <a:s>effective</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2900">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                           <a:s> and </a:s>
                           <a:s r="2905">
                              <a:s>start of </a:s>
                              <a:s r="2904">
                                 <a:s r="2903">
                                    <a:s r="2902">
                                       <a:s>&quot;First HIV Positive Condition&quot;</a:s>
                                    </a:s>
                                    <a:s>.</a:s>
                                    <a:s r="2903">
                                       <a:s>onset</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2904">
                                    <a:s>toInterval()</a:s>
                                 </a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s r="2907"> &lt;= 90</a:s>
                     </a:s>
                     <a:s> then </a:s>
                     <a:s r="2910">
                        <a:s r="2909">
                           <a:s>HC</a:s>
                        </a:s>
                        <a:s>.</a:s>
                        <a:s r="2910">
                           <a:s>&quot;Within 90 days of HIV diagnosis&quot;</a:s>
                        </a:s>
                     </a:s>
                  </a:s>
                  <a:s r="2912">
    else null
    end</a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2913" locator="869:5-874:7" xsi:type="Case">
            <caseItem localId="2883" locator="870:9-870:202">
               <when localId="2880" locator="870:14-870:161" xsi:type="LessOrEqual">
                  <operand localId="2878" locator="870:14-870:156" precision="Day" xsi:type="DifferenceBetween">
                     <operand localId="2873" locator="870:41-870:93" xsi:type="Start">
                        <operand localId="2872" locator="870:50-870:93" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2871" locator="870:50-870:80" path="effective" xsi:type="Property">
                              <source localId="2870" locator="870:50-870:70" name="First HIV Treatment" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2877" locator="870:99-870:156" xsi:type="Start">
                        <operand localId="2876" locator="870:108-870:156" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2875" locator="870:108-870:143" path="onset" xsi:type="Property">
                              <source localId="2874" locator="870:108-870:137" name="First HIV Positive Condition" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2879" locator="870:161" valueType="t:Integer" value="7" xsi:type="Literal"/>
               </when>
               <then localId="2882" locator="870:168-870:202" name="Within 7 days of HIV diagnosis" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2897" locator="871:9-871:204">
               <when localId="2894" locator="871:14-871:162" xsi:type="LessOrEqual">
                  <operand localId="2892" locator="871:14-871:156" precision="Day" xsi:type="DifferenceBetween">
                     <operand localId="2887" locator="871:41-871:93" xsi:type="Start">
                        <operand localId="2886" locator="871:50-871:93" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2885" locator="871:50-871:80" path="effective" xsi:type="Property">
                              <source localId="2884" locator="871:50-871:70" name="First HIV Treatment" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2891" locator="871:99-871:156" xsi:type="Start">
                        <operand localId="2890" locator="871:108-871:156" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2889" locator="871:108-871:143" path="onset" xsi:type="Property">
                              <source localId="2888" locator="871:108-871:137" name="First HIV Positive Condition" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2893" locator="871:161-871:162" valueType="t:Integer" value="30" xsi:type="Literal"/>
               </when>
               <then localId="2896" locator="871:169-871:204" name="Within 30 days of HIV diagnosis" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <caseItem localId="2911" locator="872:9-872:204">
               <when localId="2908" locator="872:14-872:162" xsi:type="LessOrEqual">
                  <operand localId="2906" locator="872:14-872:156" precision="Day" xsi:type="DifferenceBetween">
                     <operand localId="2901" locator="872:41-872:93" xsi:type="Start">
                        <operand localId="2900" locator="872:50-872:93" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2899" locator="872:50-872:80" path="effective" xsi:type="Property">
                              <source localId="2898" locator="872:50-872:70" name="First HIV Treatment" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                     <operand localId="2905" locator="872:99-872:156" xsi:type="Start">
                        <operand localId="2904" locator="872:108-872:156" name="toInterval" libraryName="WCom" xsi:type="FunctionRef">
                           <operand localId="2903" locator="872:108-872:143" path="onset" xsi:type="Property">
                              <source localId="2902" locator="872:108-872:137" name="First HIV Positive Condition" xsi:type="ExpressionRef"/>
                           </operand>
                        </operand>
                     </operand>
                  </operand>
                  <operand localId="2907" locator="872:161-872:162" valueType="t:Integer" value="90" xsi:type="Literal"/>
               </when>
               <then localId="2910" locator="872:169-872:204" name="Within 90 days of HIV diagnosis" libraryName="HC" xsi:type="CodeRef"/>
            </caseItem>
            <else asType="t:Code" xsi:type="As">
               <operand localId="2912" locator="873:10-873:13" xsi:type="Null"/>
            </else>
         </expression>
      </def>
      <def localId="2940" locator="878:3-882:43" name="already known positive" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2940">
               <a:s>//HIV status of partner or contact (already known positive, newly diagnosed positive, negative) 

  define &quot;already known positive&quot;:
    </a:s>
               <a:s r="2939">
                  <a:s>
                     <a:s r="2916">
                        <a:s r="2915">
                           <a:s r="2915">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;HIV status of partner or contact&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2938">
                     <a:s>where </a:s>
                     <a:s r="2938">
                        <a:s r="2932">
                           <a:s r="2923">
                              <a:s r="2918">
                                 <a:s r="2917">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2918">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2922">
                                 <a:s>{ </a:s>
                                 <a:s r="2919">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2920">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2921">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2931">
                              <a:s>exists</a:s>
                              <a:s r="2930">
                                 <a:s>(</a:s>
                                 <a:s r="2930">
                                    <a:s>
                                       <a:s r="2925">
                                          <a:s r="2924">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2929">
                                       <a:s>where </a:s>
                                       <a:s r="2929">
                                          <a:s r="2926">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2928">
                                             <a:s r="2927">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2928">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2937">
                           <a:s r="2934">
                              <a:s r="2933">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2934">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2936">
                              <a:s r="2935">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2936">
                                 <a:s>&quot;Already knew positive&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2939" locator="879:5-882:43" xsi:type="Query">
            <source localId="2916" locator="879:5-879:58" alias="O">
               <expression localId="2915" locator="879:5-879:56" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="879:19-879:55" name="HIV status of partner or contact" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2938" locator="880:5-882:43" xsi:type="And">
               <operand localId="2932" locator="880:11-881:61" xsi:type="And">
                  <operand localId="2923" locator="880:11-880:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2918" locator="880:11-880:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2922" locator="880:23-880:57" xsi:type="List">
                        <element localId="2919" locator="880:25-880:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2920" locator="880:34-880:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2921" locator="880:45-880:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2931" locator="881:9-881:61" xsi:type="Exists">
                     <operand localId="2930" locator="881:15-881:61" xsi:type="Query">
                        <source localId="2925" locator="881:16-881:28" alias="OC">
                           <expression localId="2924" locator="881:16-881:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2929" locator="881:30-881:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2926" locator="881:36-881:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2928" locator="881:41-881:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2937" locator="882:9-882:43" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2934" locator="882:9-882:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2936" locator="882:18-882:43" name="Already knew positive" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2966" locator="884:3-888:37" name="Newly diagnosed" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2966">
               <a:s>define &quot;Newly diagnosed&quot;:
    </a:s>
               <a:s r="2965">
                  <a:s>
                     <a:s r="2942">
                        <a:s r="2941">
                           <a:s r="2941">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;HIV status of partner or contact&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2964">
                     <a:s>where </a:s>
                     <a:s r="2964">
                        <a:s r="2958">
                           <a:s r="2949">
                              <a:s r="2944">
                                 <a:s r="2943">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2944">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2948">
                                 <a:s>{ </a:s>
                                 <a:s r="2945">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2946">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2947">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2957">
                              <a:s>exists</a:s>
                              <a:s r="2956">
                                 <a:s>(</a:s>
                                 <a:s r="2956">
                                    <a:s>
                                       <a:s r="2951">
                                          <a:s r="2950">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2955">
                                       <a:s>where </a:s>
                                       <a:s r="2955">
                                          <a:s r="2952">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2954">
                                             <a:s r="2953">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2954">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2963">
                           <a:s r="2960">
                              <a:s r="2959">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2960">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2962">
                              <a:s r="2961">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2962">
                                 <a:s>&quot;Newly diagnosed&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2965" locator="885:5-888:37" xsi:type="Query">
            <source localId="2942" locator="885:5-885:58" alias="O">
               <expression localId="2941" locator="885:5-885:56" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="885:19-885:55" name="HIV status of partner or contact" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2964" locator="886:5-888:37" xsi:type="And">
               <operand localId="2958" locator="886:11-887:61" xsi:type="And">
                  <operand localId="2949" locator="886:11-886:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2944" locator="886:11-886:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2948" locator="886:23-886:57" xsi:type="List">
                        <element localId="2945" locator="886:25-886:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2946" locator="886:34-886:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2947" locator="886:45-886:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2957" locator="887:9-887:61" xsi:type="Exists">
                     <operand localId="2956" locator="887:15-887:61" xsi:type="Query">
                        <source localId="2951" locator="887:16-887:28" alias="OC">
                           <expression localId="2950" locator="887:16-887:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2955" locator="887:30-887:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2952" locator="887:36-887:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2954" locator="887:41-887:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2963" locator="888:9-888:37" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2960" locator="888:9-888:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2962" locator="888:18-888:37" name="Newly diagnosed" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="2992" locator="890:3-894:43" name="Negative - HIV.H.DE37" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="2992">
               <a:s>define &quot;Negative - HIV.H.DE37&quot;:
    </a:s>
               <a:s r="2991">
                  <a:s>
                     <a:s r="2968">
                        <a:s r="2967">
                           <a:s r="2967">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>HC.&quot;HIV status of partner or contact&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> O</a:s>
                     </a:s>
                  </a:s>
                  <a:s> 
    </a:s>
                  <a:s r="2990">
                     <a:s>where </a:s>
                     <a:s r="2990">
                        <a:s r="2984">
                           <a:s r="2975">
                              <a:s r="2970">
                                 <a:s r="2969">
                                    <a:s>O</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="2970">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="2974">
                                 <a:s>{ </a:s>
                                 <a:s r="2971">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2972">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="2973">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
    and </a:s>
                           <a:s r="2983">
                              <a:s>exists</a:s>
                              <a:s r="2982">
                                 <a:s>(</a:s>
                                 <a:s r="2982">
                                    <a:s>
                                       <a:s r="2977">
                                          <a:s r="2976">
                                             <a:s>
                                                <a:s>O.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> OC</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="2981">
                                       <a:s>where </a:s>
                                       <a:s r="2981">
                                          <a:s r="2978">
                                             <a:s>OC</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="2980">
                                             <a:s r="2979">
                                                <a:s>HCC</a:s>
                                             </a:s>
                                             <a:s>.</a:s>
                                             <a:s r="2980">
                                                <a:s>&quot;social-history&quot;</a:s>
                                             </a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
    and </a:s>
                        <a:s r="2989">
                           <a:s r="2986">
                              <a:s r="2985">
                                 <a:s>O</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2986">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="2988">
                              <a:s r="2987">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2988">
                                 <a:s>&quot;Negative - HIV.H.DE37&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="2991" locator="891:5-894:43" xsi:type="Query">
            <source localId="2968" locator="891:5-891:58" alias="O">
               <expression localId="2967" locator="891:5-891:56" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="~" xsi:type="Retrieve">
                  <codes xsi:type="ToList">
                     <operand locator="891:19-891:55" name="HIV status of partner or contact" libraryName="HC" xsi:type="CodeRef"/>
                  </codes>
               </expression>
            </source>
            <where localId="2990" locator="892:5-894:43" xsi:type="And">
               <operand localId="2984" locator="892:11-893:61" xsi:type="And">
                  <operand localId="2975" locator="892:11-892:57" xsi:type="In">
                     <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="2970" locator="892:11-892:18" path="status" scope="O" xsi:type="Property"/>
                     </operand>
                     <operand localId="2974" locator="892:23-892:57" xsi:type="List">
                        <element localId="2971" locator="892:25-892:31" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="2972" locator="892:34-892:42" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="2973" locator="892:45-892:55" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
                  <operand localId="2983" locator="893:9-893:61" xsi:type="Exists">
                     <operand localId="2982" locator="893:15-893:61" xsi:type="Query">
                        <source localId="2977" locator="893:16-893:28" alias="OC">
                           <expression localId="2976" locator="893:16-893:25" path="category" scope="O" xsi:type="Property"/>
                        </source>
                        <where localId="2981" locator="893:30-893:60" xsi:type="Equivalent">
                           <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="2978" locator="893:36-893:37" name="OC" xsi:type="AliasRef"/>
                           </operand>
                           <operand xsi:type="ToConcept">
                              <operand localId="2980" locator="893:41-893:60" name="social-history" libraryName="HCC" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
               </operand>
               <operand localId="2989" locator="894:9-894:43" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2986" locator="894:9-894:14" path="code" scope="O" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="2988" locator="894:18-894:43" name="Negative - HIV.H.DE37" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="3006" locator="899:3-902:54" name="STI_testing" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="3006">
               <a:s>//need to define
  define STI_testing:
    </a:s>
               <a:s r="3005">
                  <a:s>
                     <a:s r="2994">
                        <a:s r="2993">
                           <a:s r="2993">
                              <a:s>[Procedure]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> P</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
  </a:s>
                  <a:s r="3004">
                     <a:s>where </a:s>
                     <a:s r="3004">
                        <a:s r="2998">
                           <a:s r="2996">
                              <a:s r="2995">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="2996">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="2997">
                              <a:s>'completed'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
  and </a:s>
                        <a:s r="3003">
                           <a:s r="3000">
                              <a:s r="2999">
                                 <a:s>P</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="3000">
                                 <a:s>code</a:s>
                              </a:s>
                           </a:s>
                           <a:s> ~ </a:s>
                           <a:s r="3002">
                              <a:s r="3001">
                                 <a:s>HC</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="3002">
                                 <a:s>&quot;STI testing and treatment services&quot;</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="3005" locator="900:5-902:54" xsi:type="Query">
            <source localId="2994" locator="900:5-900:17" alias="P">
               <expression localId="2993" locator="900:5-900:15" dataType="fhir:Procedure" templateId="http://hl7.org/fhir/StructureDefinition/Procedure" xsi:type="Retrieve"/>
            </source>
            <where localId="3004" locator="901:3-902:54" xsi:type="And">
               <operand localId="2998" locator="901:9-901:30" xsi:type="Equal">
                  <operand name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="2996" locator="901:9-901:16" path="status" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand localId="2997" locator="901:20-901:30" valueType="t:String" value="completed" xsi:type="Literal"/>
               </operand>
               <operand localId="3003" locator="902:7-902:54" xsi:type="Equivalent">
                  <operand name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="3000" locator="902:7-902:12" path="code" scope="P" xsi:type="Property"/>
                  </operand>
                  <operand xsi:type="ToConcept">
                     <operand localId="3002" locator="902:16-902:54" name="STI testing and treatment services" libraryName="HC" xsi:type="CodeRef"/>
                  </operand>
               </operand>
            </where>
         </expression>
      </def>
   </statements>
</library>
